(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function hf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function lT(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),n}var _d={exports:{}},Qr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg;function uT(){if(dg)return Qr;dg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,l){var f=null;if(l!==void 0&&(f=""+l),r.key!==void 0&&(f=""+r.key),"key"in r){l={};for(var h in r)h!=="key"&&(l[h]=r[h])}else l=r;return r=l.ref,{$$typeof:t,type:s,key:f,ref:r!==void 0?r:null,props:l}}return Qr.Fragment=e,Qr.jsx=n,Qr.jsxs=n,Qr}var fg;function cT(){return fg||(fg=1,_d.exports=uT()),_d.exports}var y=cT(),Td={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hg;function dT(){if(hg)return ke;hg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),_=Symbol.iterator;function b(S){return S===null||typeof S!="object"?null:(S=_&&S[_]||S["@@iterator"],typeof S=="function"?S:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,N={};function D(S,M,H){this.props=S,this.context=M,this.refs=N,this.updater=H||C}D.prototype.isReactComponent={},D.prototype.setState=function(S,M){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,M,"setState")},D.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function B(){}B.prototype=D.prototype;function z(S,M,H){this.props=S,this.context=M,this.refs=N,this.updater=H||C}var U=z.prototype=new B;U.constructor=z,E(U,D.prototype),U.isPureReactComponent=!0;var F=Array.isArray,V={H:null,A:null,T:null,S:null,V:null},W=Object.prototype.hasOwnProperty;function se(S,M,H,K,le,ae){return H=ae.ref,{$$typeof:t,type:S,key:M,ref:H!==void 0?H:null,props:ae}}function ye(S,M){return se(S.type,M,void 0,void 0,void 0,S.props)}function ne(S){return typeof S=="object"&&S!==null&&S.$$typeof===t}function oe(S){var M={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(H){return M[H]})}var re=/\/+/g;function Q(S,M){return typeof S=="object"&&S!==null&&S.key!=null?oe(""+S.key):M.toString(36)}function Se(){}function Fe(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(Se,Se):(S.status="pending",S.then(function(M){S.status==="pending"&&(S.status="fulfilled",S.value=M)},function(M){S.status==="pending"&&(S.status="rejected",S.reason=M)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function Ce(S,M,H,K,le){var ae=typeof S;(ae==="undefined"||ae==="boolean")&&(S=null);var de=!1;if(S===null)de=!0;else switch(ae){case"bigint":case"string":case"number":de=!0;break;case"object":switch(S.$$typeof){case t:case e:de=!0;break;case x:return de=S._init,Ce(de(S._payload),M,H,K,le)}}if(de)return le=le(S),de=K===""?"."+Q(S,0):K,F(le)?(H="",de!=null&&(H=de.replace(re,"$&/")+"/"),Ce(le,M,H,"",function(rt){return rt})):le!=null&&(ne(le)&&(le=ye(le,H+(le.key==null||S&&S.key===le.key?"":(""+le.key).replace(re,"$&/")+"/")+de)),M.push(le)),1;de=0;var _e=K===""?".":K+":";if(F(S))for(var Me=0;Me<S.length;Me++)K=S[Me],ae=_e+Q(K,Me),de+=Ce(K,M,H,ae,le);else if(Me=b(S),typeof Me=="function")for(S=Me.call(S),Me=0;!(K=S.next()).done;)K=K.value,ae=_e+Q(K,Me++),de+=Ce(K,M,H,ae,le);else if(ae==="object"){if(typeof S.then=="function")return Ce(Fe(S),M,H,K,le);throw M=String(S),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return de}function q(S,M,H){if(S==null)return S;var K=[],le=0;return Ce(S,K,"","",function(ae){return M.call(H,ae,le++)}),K}function $(S){if(S._status===-1){var M=S._result;M=M(),M.then(function(H){(S._status===0||S._status===-1)&&(S._status=1,S._result=H)},function(H){(S._status===0||S._status===-1)&&(S._status=2,S._result=H)}),S._status===-1&&(S._status=0,S._result=M)}if(S._status===1)return S._result.default;throw S._result}var R=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)};function Y(){}return ke.Children={map:q,forEach:function(S,M,H){q(S,function(){M.apply(this,arguments)},H)},count:function(S){var M=0;return q(S,function(){M++}),M},toArray:function(S){return q(S,function(M){return M})||[]},only:function(S){if(!ne(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},ke.Component=D,ke.Fragment=n,ke.Profiler=r,ke.PureComponent=z,ke.StrictMode=s,ke.Suspense=g,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,ke.__COMPILER_RUNTIME={__proto__:null,c:function(S){return V.H.useMemoCache(S)}},ke.cache=function(S){return function(){return S.apply(null,arguments)}},ke.cloneElement=function(S,M,H){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var K=E({},S.props),le=S.key,ae=void 0;if(M!=null)for(de in M.ref!==void 0&&(ae=void 0),M.key!==void 0&&(le=""+M.key),M)!W.call(M,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&M.ref===void 0||(K[de]=M[de]);var de=arguments.length-2;if(de===1)K.children=H;else if(1<de){for(var _e=Array(de),Me=0;Me<de;Me++)_e[Me]=arguments[Me+2];K.children=_e}return se(S.type,le,void 0,void 0,ae,K)},ke.createContext=function(S){return S={$$typeof:f,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:l,_context:S},S},ke.createElement=function(S,M,H){var K,le={},ae=null;if(M!=null)for(K in M.key!==void 0&&(ae=""+M.key),M)W.call(M,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(le[K]=M[K]);var de=arguments.length-2;if(de===1)le.children=H;else if(1<de){for(var _e=Array(de),Me=0;Me<de;Me++)_e[Me]=arguments[Me+2];le.children=_e}if(S&&S.defaultProps)for(K in de=S.defaultProps,de)le[K]===void 0&&(le[K]=de[K]);return se(S,ae,void 0,void 0,null,le)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(S){return{$$typeof:h,render:S}},ke.isValidElement=ne,ke.lazy=function(S){return{$$typeof:x,_payload:{_status:-1,_result:S},_init:$}},ke.memo=function(S,M){return{$$typeof:m,type:S,compare:M===void 0?null:M}},ke.startTransition=function(S){var M=V.T,H={};V.T=H;try{var K=S(),le=V.S;le!==null&&le(H,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(Y,R)}catch(ae){R(ae)}finally{V.T=M}},ke.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},ke.use=function(S){return V.H.use(S)},ke.useActionState=function(S,M,H){return V.H.useActionState(S,M,H)},ke.useCallback=function(S,M){return V.H.useCallback(S,M)},ke.useContext=function(S){return V.H.useContext(S)},ke.useDebugValue=function(){},ke.useDeferredValue=function(S,M){return V.H.useDeferredValue(S,M)},ke.useEffect=function(S,M,H){var K=V.H;if(typeof H=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(S,M)},ke.useId=function(){return V.H.useId()},ke.useImperativeHandle=function(S,M,H){return V.H.useImperativeHandle(S,M,H)},ke.useInsertionEffect=function(S,M){return V.H.useInsertionEffect(S,M)},ke.useLayoutEffect=function(S,M){return V.H.useLayoutEffect(S,M)},ke.useMemo=function(S,M){return V.H.useMemo(S,M)},ke.useOptimistic=function(S,M){return V.H.useOptimistic(S,M)},ke.useReducer=function(S,M,H){return V.H.useReducer(S,M,H)},ke.useRef=function(S){return V.H.useRef(S)},ke.useState=function(S){return V.H.useState(S)},ke.useSyncExternalStore=function(S,M,H){return V.H.useSyncExternalStore(S,M,H)},ke.useTransition=function(){return V.H.useTransition()},ke.version="19.1.0",ke}var mg;function mf(){return mg||(mg=1,Td.exports=dT()),Td.exports}var G=mf();const qo=hf(G);var bd={exports:{}},ea={},wd={exports:{}},Sd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pg;function fT(){return pg||(pg=1,function(t){function e(q,$){var R=q.length;q.push($);e:for(;0<R;){var Y=R-1>>>1,S=q[Y];if(0<r(S,$))q[Y]=$,q[R]=S,R=Y;else break e}}function n(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var $=q[0],R=q.pop();if(R!==$){q[0]=R;e:for(var Y=0,S=q.length,M=S>>>1;Y<M;){var H=2*(Y+1)-1,K=q[H],le=H+1,ae=q[le];if(0>r(K,R))le<S&&0>r(ae,K)?(q[Y]=ae,q[le]=R,Y=le):(q[Y]=K,q[H]=R,Y=H);else if(le<S&&0>r(ae,R))q[Y]=ae,q[le]=R,Y=le;else break e}}return $}function r(q,$){var R=q.sortIndex-$.sortIndex;return R!==0?R:q.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var f=Date,h=f.now();t.unstable_now=function(){return f.now()-h}}var g=[],m=[],x=1,_=null,b=3,C=!1,E=!1,N=!1,D=!1,B=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function F(q){for(var $=n(m);$!==null;){if($.callback===null)s(m);else if($.startTime<=q)s(m),$.sortIndex=$.expirationTime,e(g,$);else break;$=n(m)}}function V(q){if(N=!1,F(q),!E)if(n(g)!==null)E=!0,W||(W=!0,Q());else{var $=n(m);$!==null&&Ce(V,$.startTime-q)}}var W=!1,se=-1,ye=5,ne=-1;function oe(){return D?!0:!(t.unstable_now()-ne<ye)}function re(){if(D=!1,W){var q=t.unstable_now();ne=q;var $=!0;try{e:{E=!1,N&&(N=!1,z(se),se=-1),C=!0;var R=b;try{t:{for(F(q),_=n(g);_!==null&&!(_.expirationTime>q&&oe());){var Y=_.callback;if(typeof Y=="function"){_.callback=null,b=_.priorityLevel;var S=Y(_.expirationTime<=q);if(q=t.unstable_now(),typeof S=="function"){_.callback=S,F(q),$=!0;break t}_===n(g)&&s(g),F(q)}else s(g);_=n(g)}if(_!==null)$=!0;else{var M=n(m);M!==null&&Ce(V,M.startTime-q),$=!1}}break e}finally{_=null,b=R,C=!1}$=void 0}}finally{$?Q():W=!1}}}var Q;if(typeof U=="function")Q=function(){U(re)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,Fe=Se.port2;Se.port1.onmessage=re,Q=function(){Fe.postMessage(null)}}else Q=function(){B(re,0)};function Ce(q,$){se=B(function(){q(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ye=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(q){switch(b){case 1:case 2:case 3:var $=3;break;default:$=b}var R=b;b=$;try{return q()}finally{b=R}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(q,$){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var R=b;b=q;try{return $()}finally{b=R}},t.unstable_scheduleCallback=function(q,$,R){var Y=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?Y+R:Y):R=Y,q){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=R+S,q={id:x++,callback:$,priorityLevel:q,startTime:R,expirationTime:S,sortIndex:-1},R>Y?(q.sortIndex=R,e(m,q),n(g)===null&&q===n(m)&&(N?(z(se),se=-1):N=!0,Ce(V,R-Y))):(q.sortIndex=S,e(g,q),E||C||(E=!0,W||(W=!0,Q()))),q},t.unstable_shouldYield=oe,t.unstable_wrapCallback=function(q){var $=b;return function(){var R=b;b=$;try{return q.apply(this,arguments)}finally{b=R}}}}(Sd)),Sd}var gg;function hT(){return gg||(gg=1,wd.exports=fT()),wd.exports}var Cd={exports:{}},Vt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yg;function mT(){if(yg)return Vt;yg=1;var t=mf();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,m,x){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:g,containerInfo:m,implementation:x}}var f=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Vt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Vt.createPortal=function(g,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(g,m,null,x)},Vt.flushSync=function(g){var m=f.T,x=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=m,s.p=x,s.d.f()}},Vt.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(g,m))},Vt.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Vt.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var x=m.as,_=h(x,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,C=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?s.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:C}):x==="script"&&s.d.X(g,{crossOrigin:_,integrity:b,fetchPriority:C,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Vt.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=h(m.as,m.crossOrigin);s.d.M(g,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(g)},Vt.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,_=h(x,m.crossOrigin);s.d.L(g,x,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Vt.preloadModule=function(g,m){if(typeof g=="string")if(m){var x=h(m.as,m.crossOrigin);s.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(g)},Vt.requestFormReset=function(g){s.d.r(g)},Vt.unstable_batchedUpdates=function(g,m){return g(m)},Vt.useFormState=function(g,m,x){return f.H.useFormState(g,m,x)},Vt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Vt.version="19.1.0",Vt}var vg;function pT(){if(vg)return Cd.exports;vg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Cd.exports=mT(),Cd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg;function gT(){if(xg)return ea;xg=1;var t=hT(),e=mf(),n=pT();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,a=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(a=o.return),i=o.return;while(i)}return o.tag===3?a:null}function f(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function h(i){if(l(i)!==i)throw Error(s(188))}function g(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(s(188));return o!==i?null:i}for(var a=i,d=o;;){var p=a.return;if(p===null)break;var v=p.alternate;if(v===null){if(d=p.return,d!==null){a=d;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===a)return h(p),i;if(v===d)return h(p),o;v=v.sibling}throw Error(s(188))}if(a.return!==d.return)a=p,d=v;else{for(var T=!1,w=p.child;w;){if(w===a){T=!0,a=p,d=v;break}if(w===d){T=!0,d=p,a=v;break}w=w.sibling}if(!T){for(w=v.child;w;){if(w===a){T=!0,a=v,d=p;break}if(w===d){T=!0,d=v,a=p;break}w=w.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==d)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var x=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),U=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function Q(i){return i===null||typeof i!="object"?null:(i=re&&i[re]||i["@@iterator"],typeof i=="function"?i:null)}var Se=Symbol.for("react.client.reference");function Fe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Se?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case E:return"Fragment";case D:return"Profiler";case N:return"StrictMode";case V:return"Suspense";case W:return"SuspenseList";case ne:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case C:return"Portal";case U:return(i.displayName||"Context")+".Provider";case z:return(i._context.displayName||"Context")+".Consumer";case F:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case se:return o=i.displayName||null,o!==null?o:Fe(i.type)||"Memo";case ye:o=i._payload,i=i._init;try{return Fe(i(o))}catch{}}return null}var Ce=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},Y=[],S=-1;function M(i){return{current:i}}function H(i){0>S||(i.current=Y[S],Y[S]=null,S--)}function K(i,o){S++,Y[S]=i.current,i.current=o}var le=M(null),ae=M(null),de=M(null),_e=M(null);function Me(i,o){switch(K(de,o),K(ae,i),K(le,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?Vp(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=Vp(o),i=qp(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}H(le),K(le,i)}function rt(){H(le),H(ae),H(de)}function Je(i){i.memoizedState!==null&&K(_e,i);var o=le.current,a=qp(o,i.type);o!==a&&(K(ae,i),K(le,a))}function Ht(i){ae.current===i&&(H(le),H(ae)),_e.current===i&&(H(_e),Yr._currentValue=R)}var Cn=Object.prototype.hasOwnProperty,En=t.unstable_scheduleCallback,$t=t.unstable_cancelCallback,Os=t.unstable_shouldYield,er=t.unstable_requestPaint,kt=t.unstable_now,ts=t.unstable_getCurrentPriorityLevel,Kn=t.unstable_ImmediatePriority,ns=t.unstable_UserBlockingPriority,An=t.unstable_NormalPriority,tr=t.unstable_LowPriority,is=t.unstable_IdlePriority,nr=t.log,ss=t.unstable_setDisableYieldValue,On=null,wt=null;function ee(i){if(typeof nr=="function"&&ss(i),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(On,i)}catch{}}var ue=Math.clz32?Math.clz32:mt,ve=Math.log,Te=Math.LN2;function mt(i){return i>>>=0,i===0?32:31-(ve(i)/Te|0)|0}var at=256,yt=4194304;function fn(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Nn(i,o,a){var d=i.pendingLanes;if(d===0)return 0;var p=0,v=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var w=d&134217727;return w!==0?(d=w&~v,d!==0?p=fn(d):(T&=w,T!==0?p=fn(T):a||(a=w&~i,a!==0&&(p=fn(a))))):(w=d&~v,w!==0?p=fn(w):T!==0?p=fn(T):a||(a=d&~i,a!==0&&(p=fn(a)))),p===0?0:o!==0&&o!==p&&(o&v)===0&&(v=p&-p,a=o&-o,v>=a||v===32&&(a&4194048)!==0)?o:p}function jn(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Dt(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xi(){var i=at;return at<<=1,(at&4194048)===0&&(at=256),i}function tn(){var i=yt;return yt<<=1,(yt&62914560)===0&&(yt=4194304),i}function _i(i){for(var o=[],a=0;31>a;a++)o.push(i);return o}function Be(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function zt(i,o,a,d,p,v){var T=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var w=i.entanglements,A=i.expirationTimes,P=i.hiddenUpdates;for(a=T&~a;0<a;){var J=31-ue(a),X=1<<J;w[J]=0,A[J]=-1;var O=P[J];if(O!==null)for(P[J]=null,J=0;J<O.length;J++){var j=O[J];j!==null&&(j.lane&=-536870913)}a&=~X}d!==0&&nn(i,d,0),v!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=v&~(T&~o))}function nn(i,o,a){i.pendingLanes|=o,i.suspendedLanes&=~o;var d=31-ue(o);i.entangledLanes|=o,i.entanglements[d]=i.entanglements[d]|1073741824|a&4194090}function Mn(i,o){var a=i.entangledLanes|=o;for(i=i.entanglements;a;){var d=31-ue(a),p=1<<d;p&o|i[d]&o&&(i[d]|=o),a&=~p}}function os(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function rs(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ba(){var i=$.p;return i!==0?i:(i=window.event,i===void 0?32:og(i.type))}function du(i,o){var a=$.p;try{return $.p=i,o()}finally{$.p=a}}var Vn=Math.random().toString(36).slice(2),St="__reactFiber$"+Vn,Pt="__reactProps$"+Vn,Ti="__reactContainer$"+Vn,ir="__reactEvents$"+Vn,fu="__reactListeners$"+Vn,hu="__reactHandles$"+Vn,wa="__reactResources$"+Vn,te="__reactMarker$"+Vn;function we(i){delete i[St],delete i[Pt],delete i[ir],delete i[fu],delete i[hu]}function Ie(i){var o=i[St];if(o)return o;for(var a=i.parentNode;a;){if(o=a[Ti]||a[St]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(i=Gp(i);i!==null;){if(a=i[St])return a;i=Gp(i)}return o}i=a,a=i.parentNode}return null}function ct(i){if(i=i[St]||i[Ti]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function Ot(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function Ct(i){var o=i[wa];return o||(o=i[wa]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function st(i){i[te]=!0}var js=new Set,as={};function hn(i,o){Rn(i,o),Rn(i+"Capture",o)}function Rn(i,o){for(as[i]=o,i=0;i<o.length;i++)js.add(o[i])}var sr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vs={},or={};function mu(i){return Cn.call(or,i)?!0:Cn.call(Vs,i)?!1:sr.test(i)?or[i]=!0:(Vs[i]=!0,!1)}function qs(i,o,a){if(mu(o))if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+a)}}function Bs(i,o,a){if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+a)}}function kn(i,o,a,d){if(d===null)i.removeAttribute(a);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(o,a,""+d)}}var $s,rr;function bi(i){if($s===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);$s=o&&o[1]||"",rr=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$s+i+rr}var pu=!1;function gu(i,o){if(!i||pu)return"";pu=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(j){var O=j}Reflect.construct(i,[],X)}else{try{X.call()}catch(j){O=j}i.call(X.prototype)}}else{try{throw Error()}catch(j){O=j}(X=i())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(j){if(j&&O&&typeof j.stack=="string")return[j.stack,O.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),T=v[0],w=v[1];if(T&&w){var A=T.split(`
`),P=w.split(`
`);for(p=d=0;d<A.length&&!A[d].includes("DetermineComponentFrameRoot");)d++;for(;p<P.length&&!P[p].includes("DetermineComponentFrameRoot");)p++;if(d===A.length||p===P.length)for(d=A.length-1,p=P.length-1;1<=d&&0<=p&&A[d]!==P[p];)p--;for(;1<=d&&0<=p;d--,p--)if(A[d]!==P[p]){if(d!==1||p!==1)do if(d--,p--,0>p||A[d]!==P[p]){var J=`
`+A[d].replace(" at new "," at ");return i.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",i.displayName)),J}while(1<=d&&0<=p);break}}}finally{pu=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?bi(a):""}function nx(i){switch(i.tag){case 26:case 27:case 5:return bi(i.type);case 16:return bi("Lazy");case 13:return bi("Suspense");case 19:return bi("SuspenseList");case 0:case 15:return gu(i.type,!1);case 11:return gu(i.type.render,!1);case 1:return gu(i.type,!0);case 31:return bi("Activity");default:return""}}function If(i){try{var o="";do o+=nx(i),i=i.return;while(i);return o}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function mn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Uf(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ix(i){var o=Uf(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var p=a.get,v=a.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(T){d=""+T,v.call(this,T)}}),Object.defineProperty(i,o,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Sa(i){i._valueTracker||(i._valueTracker=ix(i))}function Lf(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var a=o.getValue(),d="";return i&&(d=Uf(i)?i.checked?"true":"false":i.value),i=d,i!==a?(o.setValue(i),!0):!1}function Ca(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var sx=/[\n"\\]/g;function pn(i){return i.replace(sx,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function yu(i,o,a,d,p,v,T,w){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),o!=null?T==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+mn(o)):i.value!==""+mn(o)&&(i.value=""+mn(o)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),o!=null?vu(i,T,mn(o)):a!=null?vu(i,T,mn(a)):d!=null&&i.removeAttribute("value"),p==null&&v!=null&&(i.defaultChecked=!!v),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.name=""+mn(w):i.removeAttribute("name")}function Pf(i,o,a,d,p,v,T,w){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),o!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||o!=null))return;a=a!=null?""+mn(a):"",o=o!=null?""+mn(o):a,w||o===i.value||(i.value=o),i.defaultValue=o}d=d??p,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=w?i.checked:!!d,i.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function vu(i,o,a){o==="number"&&Ca(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function zs(i,o,a,d){if(i=i.options,o){o={};for(var p=0;p<a.length;p++)o["$"+a[p]]=!0;for(a=0;a<i.length;a++)p=o.hasOwnProperty("$"+i[a].value),i[a].selected!==p&&(i[a].selected=p),p&&d&&(i[a].defaultSelected=!0)}else{for(a=""+mn(a),o=null,p=0;p<i.length;p++){if(i[p].value===a){i[p].selected=!0,d&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function Of(i,o,a){if(o!=null&&(o=""+mn(o),o!==i.value&&(i.value=o),a==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=a!=null?""+mn(a):""}function jf(i,o,a,d){if(o==null){if(d!=null){if(a!=null)throw Error(s(92));if(Ce(d)){if(1<d.length)throw Error(s(93));d=d[0]}a=d}a==null&&(a=""),o=a}a=mn(o),i.defaultValue=a,d=i.textContent,d===a&&d!==""&&d!==null&&(i.value=d)}function Gs(i,o){if(o){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=o;return}}i.textContent=o}var ox=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vf(i,o,a){var d=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?d?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":d?i.setProperty(o,a):typeof a!="number"||a===0||ox.has(o)?o==="float"?i.cssFloat=a:i[o]=(""+a).trim():i[o]=a+"px"}function qf(i,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,a!=null){for(var d in a)!a.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var p in o)d=o[p],o.hasOwnProperty(p)&&a[p]!==d&&Vf(i,p,d)}else for(var v in o)o.hasOwnProperty(v)&&Vf(i,v,o[v])}function xu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ax=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ea(i){return ax.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var _u=null;function Tu(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Fs=null,Hs=null;function Bf(i){var o=ct(i);if(o&&(i=o.stateNode)){var a=i[Pt]||null;e:switch(i=o.stateNode,o.type){case"input":if(yu(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+pn(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var d=a[o];if(d!==i&&d.form===i.form){var p=d[Pt]||null;if(!p)throw Error(s(90));yu(d,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(o=0;o<a.length;o++)d=a[o],d.form===i.form&&Lf(d)}break e;case"textarea":Of(i,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&zs(i,!!a.multiple,o,!1)}}}var bu=!1;function $f(i,o,a){if(bu)return i(o,a);bu=!0;try{var d=i(o);return d}finally{if(bu=!1,(Fs!==null||Hs!==null)&&(dl(),Fs&&(o=Fs,i=Hs,Hs=Fs=null,Bf(o),i)))for(o=0;o<i.length;o++)Bf(i[o])}}function ar(i,o){var a=i.stateNode;if(a===null)return null;var d=a[Pt]||null;if(d===null)return null;a=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wu=!1;if(Xn)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){wu=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{wu=!1}var wi=null,Su=null,Aa=null;function zf(){if(Aa)return Aa;var i,o=Su,a=o.length,d,p="value"in wi?wi.value:wi.textContent,v=p.length;for(i=0;i<a&&o[i]===p[i];i++);var T=a-i;for(d=1;d<=T&&o[a-d]===p[v-d];d++);return Aa=p.slice(i,1<d?1-d:void 0)}function Na(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Ma(){return!0}function Gf(){return!1}function Jt(i){function o(a,d,p,v,T){this._reactName=a,this._targetInst=p,this.type=d,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var w in i)i.hasOwnProperty(w)&&(a=i[w],this[w]=a?a(v):v[w]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ma:Gf,this.isPropagationStopped=Gf,this}return x(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ma)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ma)},persist:function(){},isPersistent:Ma}),o}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ra=Jt(ls),ur=x({},ls,{view:0,detail:0}),lx=Jt(ur),Cu,Eu,cr,ka=x({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nu,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==cr&&(cr&&i.type==="mousemove"?(Cu=i.screenX-cr.screenX,Eu=i.screenY-cr.screenY):Eu=Cu=0,cr=i),Cu)},movementY:function(i){return"movementY"in i?i.movementY:Eu}}),Ff=Jt(ka),ux=x({},ka,{dataTransfer:0}),cx=Jt(ux),dx=x({},ur,{relatedTarget:0}),Au=Jt(dx),fx=x({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),hx=Jt(fx),mx=x({},ls,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),px=Jt(mx),gx=x({},ls,{data:0}),Hf=Jt(gx),yx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _x(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=xx[i])?!!o[i]:!1}function Nu(){return _x}var Tx=x({},ur,{key:function(i){if(i.key){var o=yx[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Na(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?vx[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nu,charCode:function(i){return i.type==="keypress"?Na(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Na(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),bx=Jt(Tx),wx=x({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jf=Jt(wx),Sx=x({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nu}),Cx=Jt(Sx),Ex=x({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ax=Jt(Ex),Nx=x({},ka,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Mx=Jt(Nx),Rx=x({},ls,{newState:0,oldState:0}),kx=Jt(Rx),Dx=[9,13,27,32],Mu=Xn&&"CompositionEvent"in window,dr=null;Xn&&"documentMode"in document&&(dr=document.documentMode);var Ix=Xn&&"TextEvent"in window&&!dr,Yf=Xn&&(!Mu||dr&&8<dr&&11>=dr),Zf=" ",Kf=!1;function Xf(i,o){switch(i){case"keyup":return Dx.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wf(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Js=!1;function Ux(i,o){switch(i){case"compositionend":return Wf(o);case"keypress":return o.which!==32?null:(Kf=!0,Zf);case"textInput":return i=o.data,i===Zf&&Kf?null:i;default:return null}}function Lx(i,o){if(Js)return i==="compositionend"||!Mu&&Xf(i,o)?(i=zf(),Aa=Su=wi=null,Js=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Yf&&o.locale!=="ko"?null:o.data;default:return null}}var Px={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Px[i.type]:o==="textarea"}function eh(i,o,a,d){Fs?Hs?Hs.push(d):Hs=[d]:Fs=d,o=yl(o,"onChange"),0<o.length&&(a=new Ra("onChange","change",null,a,d),i.push({event:a,listeners:o}))}var fr=null,hr=null;function Ox(i){Up(i,0)}function Da(i){var o=Ot(i);if(Lf(o))return i}function th(i,o){if(i==="change")return o}var nh=!1;if(Xn){var Ru;if(Xn){var ku="oninput"in document;if(!ku){var ih=document.createElement("div");ih.setAttribute("oninput","return;"),ku=typeof ih.oninput=="function"}Ru=ku}else Ru=!1;nh=Ru&&(!document.documentMode||9<document.documentMode)}function sh(){fr&&(fr.detachEvent("onpropertychange",oh),hr=fr=null)}function oh(i){if(i.propertyName==="value"&&Da(hr)){var o=[];eh(o,hr,i,Tu(i)),$f(Ox,o)}}function jx(i,o,a){i==="focusin"?(sh(),fr=o,hr=a,fr.attachEvent("onpropertychange",oh)):i==="focusout"&&sh()}function Vx(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Da(hr)}function qx(i,o){if(i==="click")return Da(o)}function Bx(i,o){if(i==="input"||i==="change")return Da(o)}function $x(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var sn=typeof Object.is=="function"?Object.is:$x;function mr(i,o){if(sn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var a=Object.keys(i),d=Object.keys(o);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var p=a[d];if(!Cn.call(o,p)||!sn(i[p],o[p]))return!1}return!0}function rh(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ah(i,o){var a=rh(i);i=0;for(var d;a;){if(a.nodeType===3){if(d=i+a.textContent.length,i<=o&&d>=o)return{node:a,offset:o-i};i=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=rh(a)}}function lh(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?lh(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function uh(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Ca(i.document);o instanceof i.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)i=o.contentWindow;else break;o=Ca(i.document)}return o}function Du(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var zx=Xn&&"documentMode"in document&&11>=document.documentMode,Ys=null,Iu=null,pr=null,Uu=!1;function ch(i,o,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Uu||Ys==null||Ys!==Ca(d)||(d=Ys,"selectionStart"in d&&Du(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),pr&&mr(pr,d)||(pr=d,d=yl(Iu,"onSelect"),0<d.length&&(o=new Ra("onSelect","select",null,o,a),i.push({event:o,listeners:d}),o.target=Ys)))}function us(i,o){var a={};return a[i.toLowerCase()]=o.toLowerCase(),a["Webkit"+i]="webkit"+o,a["Moz"+i]="moz"+o,a}var Zs={animationend:us("Animation","AnimationEnd"),animationiteration:us("Animation","AnimationIteration"),animationstart:us("Animation","AnimationStart"),transitionrun:us("Transition","TransitionRun"),transitionstart:us("Transition","TransitionStart"),transitioncancel:us("Transition","TransitionCancel"),transitionend:us("Transition","TransitionEnd")},Lu={},dh={};Xn&&(dh=document.createElement("div").style,"AnimationEvent"in window||(delete Zs.animationend.animation,delete Zs.animationiteration.animation,delete Zs.animationstart.animation),"TransitionEvent"in window||delete Zs.transitionend.transition);function cs(i){if(Lu[i])return Lu[i];if(!Zs[i])return i;var o=Zs[i],a;for(a in o)if(o.hasOwnProperty(a)&&a in dh)return Lu[i]=o[a];return i}var fh=cs("animationend"),hh=cs("animationiteration"),mh=cs("animationstart"),Gx=cs("transitionrun"),Fx=cs("transitionstart"),Hx=cs("transitioncancel"),ph=cs("transitionend"),gh=new Map,Pu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pu.push("scrollEnd");function Dn(i,o){gh.set(i,o),hn(o,[i])}var yh=new WeakMap;function gn(i,o){if(typeof i=="object"&&i!==null){var a=yh.get(i);return a!==void 0?a:(o={value:i,source:o,stack:If(o)},yh.set(i,o),o)}return{value:i,source:o,stack:If(o)}}var yn=[],Ks=0,Ou=0;function Ia(){for(var i=Ks,o=Ou=Ks=0;o<i;){var a=yn[o];yn[o++]=null;var d=yn[o];yn[o++]=null;var p=yn[o];yn[o++]=null;var v=yn[o];if(yn[o++]=null,d!==null&&p!==null){var T=d.pending;T===null?p.next=p:(p.next=T.next,T.next=p),d.pending=p}v!==0&&vh(a,p,v)}}function Ua(i,o,a,d){yn[Ks++]=i,yn[Ks++]=o,yn[Ks++]=a,yn[Ks++]=d,Ou|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function ju(i,o,a,d){return Ua(i,o,a,d),La(i)}function Xs(i,o){return Ua(i,null,null,o),La(i)}function vh(i,o,a){i.lanes|=a;var d=i.alternate;d!==null&&(d.lanes|=a);for(var p=!1,v=i.return;v!==null;)v.childLanes|=a,d=v.alternate,d!==null&&(d.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(p=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,p&&o!==null&&(p=31-ue(a),i=v.hiddenUpdates,d=i[p],d===null?i[p]=[o]:d.push(o),o.lane=a|536870912),v):null}function La(i){if(50<qr)throw qr=0,Gc=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Ws={};function Jx(i,o,a,d){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(i,o,a,d){return new Jx(i,o,a,d)}function Vu(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Wn(i,o){var a=i.alternate;return a===null?(a=on(i.tag,o,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=o,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,o=i.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function xh(i,o){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,o=a.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Pa(i,o,a,d,p,v){var T=0;if(d=i,typeof i=="function")Vu(i)&&(T=1);else if(typeof i=="string")T=Z_(i,a,le.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case ne:return i=on(31,a,o,p),i.elementType=ne,i.lanes=v,i;case E:return ds(a.children,p,v,o);case N:T=8,p|=24;break;case D:return i=on(12,a,o,p|2),i.elementType=D,i.lanes=v,i;case V:return i=on(13,a,o,p),i.elementType=V,i.lanes=v,i;case W:return i=on(19,a,o,p),i.elementType=W,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:case U:T=10;break e;case z:T=9;break e;case F:T=11;break e;case se:T=14;break e;case ye:T=16,d=null;break e}T=29,a=Error(s(130,i===null?"null":typeof i,"")),d=null}return o=on(T,a,o,p),o.elementType=i,o.type=d,o.lanes=v,o}function ds(i,o,a,d){return i=on(7,i,d,o),i.lanes=a,i}function qu(i,o,a){return i=on(6,i,null,o),i.lanes=a,i}function Bu(i,o,a){return o=on(4,i.children!==null?i.children:[],i.key,o),o.lanes=a,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Qs=[],eo=0,Oa=null,ja=0,vn=[],xn=0,fs=null,Qn=1,ei="";function hs(i,o){Qs[eo++]=ja,Qs[eo++]=Oa,Oa=i,ja=o}function _h(i,o,a){vn[xn++]=Qn,vn[xn++]=ei,vn[xn++]=fs,fs=i;var d=Qn;i=ei;var p=32-ue(d)-1;d&=~(1<<p),a+=1;var v=32-ue(o)+p;if(30<v){var T=p-p%5;v=(d&(1<<T)-1).toString(32),d>>=T,p-=T,Qn=1<<32-ue(o)+p|a<<p|d,ei=v+i}else Qn=1<<v|a<<p|d,ei=i}function $u(i){i.return!==null&&(hs(i,1),_h(i,1,0))}function zu(i){for(;i===Oa;)Oa=Qs[--eo],Qs[eo]=null,ja=Qs[--eo],Qs[eo]=null;for(;i===fs;)fs=vn[--xn],vn[xn]=null,ei=vn[--xn],vn[xn]=null,Qn=vn[--xn],vn[xn]=null}var Gt=null,dt=null,He=!1,ms=null,qn=!1,Gu=Error(s(519));function ps(i){var o=Error(s(418,""));throw vr(gn(o,i)),Gu}function Th(i){var o=i.stateNode,a=i.type,d=i.memoizedProps;switch(o[St]=i,o[Pt]=d,a){case"dialog":je("cancel",o),je("close",o);break;case"iframe":case"object":case"embed":je("load",o);break;case"video":case"audio":for(a=0;a<$r.length;a++)je($r[a],o);break;case"source":je("error",o);break;case"img":case"image":case"link":je("error",o),je("load",o);break;case"details":je("toggle",o);break;case"input":je("invalid",o),Pf(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Sa(o);break;case"select":je("invalid",o);break;case"textarea":je("invalid",o),jf(o,d.value,d.defaultValue,d.children),Sa(o)}a=d.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||d.suppressHydrationWarning===!0||jp(o.textContent,a)?(d.popover!=null&&(je("beforetoggle",o),je("toggle",o)),d.onScroll!=null&&je("scroll",o),d.onScrollEnd!=null&&je("scrollend",o),d.onClick!=null&&(o.onclick=vl),o=!0):o=!1,o||ps(i)}function bh(i){for(Gt=i.return;Gt;)switch(Gt.tag){case 5:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:Gt=Gt.return}}function gr(i){if(i!==Gt)return!1;if(!He)return bh(i),He=!0,!1;var o=i.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||rd(i.type,i.memoizedProps)),a=!a),a&&dt&&ps(i),bh(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(a=i.data,a==="/$"){if(o===0){dt=Un(i.nextSibling);break e}o--}else a!=="$"&&a!=="$!"&&a!=="$?"||o++;i=i.nextSibling}dt=null}}else o===27?(o=dt,Vi(i.type)?(i=cd,cd=null,dt=i):dt=o):dt=Gt?Un(i.stateNode.nextSibling):null;return!0}function yr(){dt=Gt=null,He=!1}function wh(){var i=ms;return i!==null&&(Kt===null?Kt=i:Kt.push.apply(Kt,i),ms=null),i}function vr(i){ms===null?ms=[i]:ms.push(i)}var Fu=M(null),gs=null,ti=null;function Si(i,o,a){K(Fu,o._currentValue),o._currentValue=a}function ni(i){i._currentValue=Fu.current,H(Fu)}function Hu(i,o,a){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===a)break;i=i.return}}function Ju(i,o,a,d){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var v=p.dependencies;if(v!==null){var T=p.child;v=v.firstContext;e:for(;v!==null;){var w=v;v=p;for(var A=0;A<o.length;A++)if(w.context===o[A]){v.lanes|=a,w=v.alternate,w!==null&&(w.lanes|=a),Hu(v.return,a,i),d||(T=null);break e}v=w.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(s(341));T.lanes|=a,v=T.alternate,v!==null&&(v.lanes|=a),Hu(T,a,i),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===i){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function xr(i,o,a,d){i=null;for(var p=o,v=!1;p!==null;){if(!v){if((p.flags&524288)!==0)v=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var w=p.type;sn(p.pendingProps.value,T.value)||(i!==null?i.push(w):i=[w])}}else if(p===_e.current){if(T=p.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(Yr):i=[Yr])}p=p.return}i!==null&&Ju(o,i,a,d),o.flags|=262144}function Va(i){for(i=i.firstContext;i!==null;){if(!sn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ys(i){gs=i,ti=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function jt(i){return Sh(gs,i)}function qa(i,o){return gs===null&&ys(i),Sh(i,o)}function Sh(i,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},ti===null){if(i===null)throw Error(s(308));ti=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else ti=ti.next=o;return a}var Yx=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(a,d){i.push(d)}};this.abort=function(){o.aborted=!0,i.forEach(function(a){return a()})}},Zx=t.unstable_scheduleCallback,Kx=t.unstable_NormalPriority,Tt={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yu(){return{controller:new Yx,data:new Map,refCount:0}}function _r(i){i.refCount--,i.refCount===0&&Zx(Kx,function(){i.controller.abort()})}var Tr=null,Zu=0,to=0,no=null;function Xx(i,o){if(Tr===null){var a=Tr=[];Zu=0,to=Xc(),no={status:"pending",value:void 0,then:function(d){a.push(d)}}}return Zu++,o.then(Ch,Ch),o}function Ch(){if(--Zu===0&&Tr!==null){no!==null&&(no.status="fulfilled");var i=Tr;Tr=null,to=0,no=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function Wx(i,o){var a=[],d={status:"pending",value:null,reason:null,then:function(p){a.push(p)}};return i.then(function(){d.status="fulfilled",d.value=o;for(var p=0;p<a.length;p++)(0,a[p])(o)},function(p){for(d.status="rejected",d.reason=p,p=0;p<a.length;p++)(0,a[p])(void 0)}),d}var Eh=q.S;q.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&Xx(i,o),Eh!==null&&Eh(i,o)};var vs=M(null);function Ku(){var i=vs.current;return i!==null?i:tt.pooledCache}function Ba(i,o){o===null?K(vs,vs.current):K(vs,o.pool)}function Ah(){var i=Ku();return i===null?null:{parent:Tt._currentValue,pool:i}}var br=Error(s(460)),Nh=Error(s(474)),$a=Error(s(542)),Xu={then:function(){}};function Mh(i){return i=i.status,i==="fulfilled"||i==="rejected"}function za(){}function Rh(i,o,a){switch(a=i[a],a===void 0?i.push(o):a!==o&&(o.then(za,za),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Dh(i),i;default:if(typeof o.status=="string")o.then(za,za);else{if(i=tt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(d){if(o.status==="pending"){var p=o;p.status="fulfilled",p.value=d}},function(d){if(o.status==="pending"){var p=o;p.status="rejected",p.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Dh(i),i}throw wr=o,br}}var wr=null;function kh(){if(wr===null)throw Error(s(459));var i=wr;return wr=null,i}function Dh(i){if(i===br||i===$a)throw Error(s(483))}var Ci=!1;function Wu(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qu(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ei(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ai(i,o,a){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Ye&2)!==0){var p=d.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),d.pending=o,o=La(i),vh(i,null,a),o}return Ua(i,d,o,a),La(i)}function Sr(i,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var d=o.lanes;d&=i.pendingLanes,a|=d,o.lanes=a,Mn(i,a)}}function ec(i,o){var a=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var p=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?p=v=T:v=v.next=T,a=a.next}while(a!==null);v===null?p=v=o:v=v.next=o}else p=v=o;a={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=o:i.next=o,a.lastBaseUpdate=o}var tc=!1;function Cr(){if(tc){var i=no;if(i!==null)throw i}}function Er(i,o,a,d){tc=!1;var p=i.updateQueue;Ci=!1;var v=p.firstBaseUpdate,T=p.lastBaseUpdate,w=p.shared.pending;if(w!==null){p.shared.pending=null;var A=w,P=A.next;A.next=null,T===null?v=P:T.next=P,T=A;var J=i.alternate;J!==null&&(J=J.updateQueue,w=J.lastBaseUpdate,w!==T&&(w===null?J.firstBaseUpdate=P:w.next=P,J.lastBaseUpdate=A))}if(v!==null){var X=p.baseState;T=0,J=P=A=null,w=v;do{var O=w.lane&-536870913,j=O!==w.lane;if(j?($e&O)===O:(d&O)===O){O!==0&&O===to&&(tc=!0),J!==null&&(J=J.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ee=i,xe=w;O=o;var Qe=a;switch(xe.tag){case 1:if(Ee=xe.payload,typeof Ee=="function"){X=Ee.call(Qe,X,O);break e}X=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=xe.payload,O=typeof Ee=="function"?Ee.call(Qe,X,O):Ee,O==null)break e;X=x({},X,O);break e;case 2:Ci=!0}}O=w.callback,O!==null&&(i.flags|=64,j&&(i.flags|=8192),j=p.callbacks,j===null?p.callbacks=[O]:j.push(O))}else j={lane:O,tag:w.tag,payload:w.payload,callback:w.callback,next:null},J===null?(P=J=j,A=X):J=J.next=j,T|=O;if(w=w.next,w===null){if(w=p.shared.pending,w===null)break;j=w,w=j.next,j.next=null,p.lastBaseUpdate=j,p.shared.pending=null}}while(!0);J===null&&(A=X),p.baseState=A,p.firstBaseUpdate=P,p.lastBaseUpdate=J,v===null&&(p.shared.lanes=0),Li|=T,i.lanes=T,i.memoizedState=X}}function Ih(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function Uh(i,o){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Ih(a[i],o)}var io=M(null),Ga=M(0);function Lh(i,o){i=ui,K(Ga,i),K(io,o),ui=i|o.baseLanes}function nc(){K(Ga,ui),K(io,io.current)}function ic(){ui=Ga.current,H(io),H(Ga)}var Ni=0,Ue=null,Xe=null,vt=null,Fa=!1,so=!1,xs=!1,Ha=0,Ar=0,oo=null,Qx=0;function pt(){throw Error(s(321))}function sc(i,o){if(o===null)return!1;for(var a=0;a<o.length&&a<i.length;a++)if(!sn(i[a],o[a]))return!1;return!0}function oc(i,o,a,d,p,v){return Ni=v,Ue=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,q.H=i===null||i.memoizedState===null?vm:xm,xs=!1,v=a(d,p),xs=!1,so&&(v=Oh(o,a,d,p)),Ph(i),v}function Ph(i){q.H=Wa;var o=Xe!==null&&Xe.next!==null;if(Ni=0,vt=Xe=Ue=null,Fa=!1,Ar=0,oo=null,o)throw Error(s(300));i===null||Et||(i=i.dependencies,i!==null&&Va(i)&&(Et=!0))}function Oh(i,o,a,d){Ue=i;var p=0;do{if(so&&(oo=null),Ar=0,so=!1,25<=p)throw Error(s(301));if(p+=1,vt=Xe=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}q.H=r_,v=o(a,d)}while(so);return v}function e_(){var i=q.H,o=i.useState()[0];return o=typeof o.then=="function"?Nr(o):o,i=i.useState()[0],(Xe!==null?Xe.memoizedState:null)!==i&&(Ue.flags|=1024),o}function rc(){var i=Ha!==0;return Ha=0,i}function ac(i,o,a){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~a}function lc(i){if(Fa){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Fa=!1}Ni=0,vt=Xe=Ue=null,so=!1,Ar=Ha=0,oo=null}function Yt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ue.memoizedState=vt=i:vt=vt.next=i,vt}function xt(){if(Xe===null){var i=Ue.alternate;i=i!==null?i.memoizedState:null}else i=Xe.next;var o=vt===null?Ue.memoizedState:vt.next;if(o!==null)vt=o,Xe=i;else{if(i===null)throw Ue.alternate===null?Error(s(467)):Error(s(310));Xe=i,i={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},vt===null?Ue.memoizedState=vt=i:vt=vt.next=i}return vt}function uc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nr(i){var o=Ar;return Ar+=1,oo===null&&(oo=[]),i=Rh(oo,i,o),o=Ue,(vt===null?o.memoizedState:vt.next)===null&&(o=o.alternate,q.H=o===null||o.memoizedState===null?vm:xm),i}function Ja(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Nr(i);if(i.$$typeof===U)return jt(i)}throw Error(s(438,String(i)))}function cc(i){var o=null,a=Ue.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var d=Ue.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(p){return p.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=uc(),Ue.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(i),d=0;d<i;d++)a[d]=oe;return o.index++,a}function ii(i,o){return typeof o=="function"?o(i):o}function Ya(i){var o=xt();return dc(o,Xe,i)}function dc(i,o,a){var d=i.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=a;var p=i.baseQueue,v=d.pending;if(v!==null){if(p!==null){var T=p.next;p.next=v.next,v.next=T}o.baseQueue=p=v,d.pending=null}if(v=i.baseState,p===null)i.memoizedState=v;else{o=p.next;var w=T=null,A=null,P=o,J=!1;do{var X=P.lane&-536870913;if(X!==P.lane?($e&X)===X:(Ni&X)===X){var O=P.revertLane;if(O===0)A!==null&&(A=A.next={lane:0,revertLane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),X===to&&(J=!0);else if((Ni&O)===O){P=P.next,O===to&&(J=!0);continue}else X={lane:0,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},A===null?(w=A=X,T=v):A=A.next=X,Ue.lanes|=O,Li|=O;X=P.action,xs&&a(v,X),v=P.hasEagerState?P.eagerState:a(v,X)}else O={lane:X,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},A===null?(w=A=O,T=v):A=A.next=O,Ue.lanes|=X,Li|=X;P=P.next}while(P!==null&&P!==o);if(A===null?T=v:A.next=w,!sn(v,i.memoizedState)&&(Et=!0,J&&(a=no,a!==null)))throw a;i.memoizedState=v,i.baseState=T,i.baseQueue=A,d.lastRenderedState=v}return p===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function fc(i){var o=xt(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var d=a.dispatch,p=a.pending,v=o.memoizedState;if(p!==null){a.pending=null;var T=p=p.next;do v=i(v,T.action),T=T.next;while(T!==p);sn(v,o.memoizedState)||(Et=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),a.lastRenderedState=v}return[v,d]}function jh(i,o,a){var d=Ue,p=xt(),v=He;if(v){if(a===void 0)throw Error(s(407));a=a()}else a=o();var T=!sn((Xe||p).memoizedState,a);T&&(p.memoizedState=a,Et=!0),p=p.queue;var w=Bh.bind(null,d,p,i);if(Mr(2048,8,w,[i]),p.getSnapshot!==o||T||vt!==null&&vt.memoizedState.tag&1){if(d.flags|=2048,ro(9,Za(),qh.bind(null,d,p,a,o),null),tt===null)throw Error(s(349));v||(Ni&124)!==0||Vh(d,o,a)}return a}function Vh(i,o,a){i.flags|=16384,i={getSnapshot:o,value:a},o=Ue.updateQueue,o===null?(o=uc(),Ue.updateQueue=o,o.stores=[i]):(a=o.stores,a===null?o.stores=[i]:a.push(i))}function qh(i,o,a,d){o.value=a,o.getSnapshot=d,$h(o)&&zh(i)}function Bh(i,o,a){return a(function(){$h(o)&&zh(i)})}function $h(i){var o=i.getSnapshot;i=i.value;try{var a=o();return!sn(i,a)}catch{return!0}}function zh(i){var o=Xs(i,2);o!==null&&cn(o,i,2)}function hc(i){var o=Yt();if(typeof i=="function"){var a=i;if(i=a(),xs){ee(!0);try{a()}finally{ee(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:i},o}function Gh(i,o,a,d){return i.baseState=a,dc(i,Xe,typeof d=="function"?d:ii)}function t_(i,o,a,d,p){if(Xa(i))throw Error(s(485));if(i=o.action,i!==null){var v={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){v.listeners.push(T)}};q.T!==null?a(!0):v.isTransition=!1,d(v),a=o.pending,a===null?(v.next=o.pending=v,Fh(o,v)):(v.next=a.next,o.pending=a.next=v)}}function Fh(i,o){var a=o.action,d=o.payload,p=i.state;if(o.isTransition){var v=q.T,T={};q.T=T;try{var w=a(p,d),A=q.S;A!==null&&A(T,w),Hh(i,o,w)}catch(P){mc(i,o,P)}finally{q.T=v}}else try{v=a(p,d),Hh(i,o,v)}catch(P){mc(i,o,P)}}function Hh(i,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(d){Jh(i,o,d)},function(d){return mc(i,o,d)}):Jh(i,o,a)}function Jh(i,o,a){o.status="fulfilled",o.value=a,Yh(o),i.state=a,o=i.pending,o!==null&&(a=o.next,a===o?i.pending=null:(a=a.next,o.next=a,Fh(i,a)))}function mc(i,o,a){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=a,Yh(o),o=o.next;while(o!==d)}i.action=null}function Yh(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Zh(i,o){return o}function Kh(i,o){if(He){var a=tt.formState;if(a!==null){e:{var d=Ue;if(He){if(dt){t:{for(var p=dt,v=qn;p.nodeType!==8;){if(!v){p=null;break t}if(p=Un(p.nextSibling),p===null){p=null;break t}}v=p.data,p=v==="F!"||v==="F"?p:null}if(p){dt=Un(p.nextSibling),d=p.data==="F!";break e}}ps(d)}d=!1}d&&(o=a[0])}}return a=Yt(),a.memoizedState=a.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zh,lastRenderedState:o},a.queue=d,a=pm.bind(null,Ue,d),d.dispatch=a,d=hc(!1),v=xc.bind(null,Ue,!1,d.queue),d=Yt(),p={state:o,dispatch:null,action:i,pending:null},d.queue=p,a=t_.bind(null,Ue,p,v,a),p.dispatch=a,d.memoizedState=i,[o,a,!1]}function Xh(i){var o=xt();return Wh(o,Xe,i)}function Wh(i,o,a){if(o=dc(i,o,Zh)[0],i=Ya(ii)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Nr(o)}catch(T){throw T===br?$a:T}else d=o;o=xt();var p=o.queue,v=p.dispatch;return a!==o.memoizedState&&(Ue.flags|=2048,ro(9,Za(),n_.bind(null,p,a),null)),[d,v,i]}function n_(i,o){i.action=o}function Qh(i){var o=xt(),a=Xe;if(a!==null)return Wh(o,a,i);xt(),o=o.memoizedState,a=xt();var d=a.queue.dispatch;return a.memoizedState=i,[o,d,!1]}function ro(i,o,a,d){return i={tag:i,create:a,deps:d,inst:o,next:null},o=Ue.updateQueue,o===null&&(o=uc(),Ue.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=i.next=i:(d=a.next,a.next=i,i.next=d,o.lastEffect=i),i}function Za(){return{destroy:void 0,resource:void 0}}function em(){return xt().memoizedState}function Ka(i,o,a,d){var p=Yt();d=d===void 0?null:d,Ue.flags|=i,p.memoizedState=ro(1|o,Za(),a,d)}function Mr(i,o,a,d){var p=xt();d=d===void 0?null:d;var v=p.memoizedState.inst;Xe!==null&&d!==null&&sc(d,Xe.memoizedState.deps)?p.memoizedState=ro(o,v,a,d):(Ue.flags|=i,p.memoizedState=ro(1|o,v,a,d))}function tm(i,o){Ka(8390656,8,i,o)}function nm(i,o){Mr(2048,8,i,o)}function im(i,o){return Mr(4,2,i,o)}function sm(i,o){return Mr(4,4,i,o)}function om(i,o){if(typeof o=="function"){i=i();var a=o(i);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function rm(i,o,a){a=a!=null?a.concat([i]):null,Mr(4,4,om.bind(null,o,i),a)}function pc(){}function am(i,o){var a=xt();o=o===void 0?null:o;var d=a.memoizedState;return o!==null&&sc(o,d[1])?d[0]:(a.memoizedState=[i,o],i)}function lm(i,o){var a=xt();o=o===void 0?null:o;var d=a.memoizedState;if(o!==null&&sc(o,d[1]))return d[0];if(d=i(),xs){ee(!0);try{i()}finally{ee(!1)}}return a.memoizedState=[d,o],d}function gc(i,o,a){return a===void 0||(Ni&1073741824)!==0?i.memoizedState=o:(i.memoizedState=a,i=dp(),Ue.lanes|=i,Li|=i,a)}function um(i,o,a,d){return sn(a,o)?a:io.current!==null?(i=gc(i,a,d),sn(i,o)||(Et=!0),i):(Ni&42)===0?(Et=!0,i.memoizedState=a):(i=dp(),Ue.lanes|=i,Li|=i,o)}function cm(i,o,a,d,p){var v=$.p;$.p=v!==0&&8>v?v:8;var T=q.T,w={};q.T=w,xc(i,!1,o,a);try{var A=p(),P=q.S;if(P!==null&&P(w,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var J=Wx(A,d);Rr(i,o,J,un(i))}else Rr(i,o,d,un(i))}catch(X){Rr(i,o,{then:function(){},status:"rejected",reason:X},un())}finally{$.p=v,q.T=T}}function i_(){}function yc(i,o,a,d){if(i.tag!==5)throw Error(s(476));var p=dm(i).queue;cm(i,p,o,R,a===null?i_:function(){return fm(i),a(d)})}function dm(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:R},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:a},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function fm(i){var o=dm(i).next.queue;Rr(i,o,{},un())}function vc(){return jt(Yr)}function hm(){return xt().memoizedState}function mm(){return xt().memoizedState}function s_(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var a=un();i=Ei(a);var d=Ai(o,i,a);d!==null&&(cn(d,o,a),Sr(d,o,a)),o={cache:Yu()},i.payload=o;return}o=o.return}}function o_(i,o,a){var d=un();a={lane:d,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Xa(i)?gm(o,a):(a=ju(i,o,a,d),a!==null&&(cn(a,i,d),ym(a,o,d)))}function pm(i,o,a){var d=un();Rr(i,o,a,d)}function Rr(i,o,a,d){var p={lane:d,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Xa(i))gm(o,p);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var T=o.lastRenderedState,w=v(T,a);if(p.hasEagerState=!0,p.eagerState=w,sn(w,T))return Ua(i,o,p,0),tt===null&&Ia(),!1}catch{}finally{}if(a=ju(i,o,p,d),a!==null)return cn(a,i,d),ym(a,o,d),!0}return!1}function xc(i,o,a,d){if(d={lane:2,revertLane:Xc(),action:d,hasEagerState:!1,eagerState:null,next:null},Xa(i)){if(o)throw Error(s(479))}else o=ju(i,a,d,2),o!==null&&cn(o,i,2)}function Xa(i){var o=i.alternate;return i===Ue||o!==null&&o===Ue}function gm(i,o){so=Fa=!0;var a=i.pending;a===null?o.next=o:(o.next=a.next,a.next=o),i.pending=o}function ym(i,o,a){if((a&4194048)!==0){var d=o.lanes;d&=i.pendingLanes,a|=d,o.lanes=a,Mn(i,a)}}var Wa={readContext:jt,use:Ja,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt},vm={readContext:jt,use:Ja,useCallback:function(i,o){return Yt().memoizedState=[i,o===void 0?null:o],i},useContext:jt,useEffect:tm,useImperativeHandle:function(i,o,a){a=a!=null?a.concat([i]):null,Ka(4194308,4,om.bind(null,o,i),a)},useLayoutEffect:function(i,o){return Ka(4194308,4,i,o)},useInsertionEffect:function(i,o){Ka(4,2,i,o)},useMemo:function(i,o){var a=Yt();o=o===void 0?null:o;var d=i();if(xs){ee(!0);try{i()}finally{ee(!1)}}return a.memoizedState=[d,o],d},useReducer:function(i,o,a){var d=Yt();if(a!==void 0){var p=a(o);if(xs){ee(!0);try{a(o)}finally{ee(!1)}}}else p=o;return d.memoizedState=d.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},d.queue=i,i=i.dispatch=o_.bind(null,Ue,i),[d.memoizedState,i]},useRef:function(i){var o=Yt();return i={current:i},o.memoizedState=i},useState:function(i){i=hc(i);var o=i.queue,a=pm.bind(null,Ue,o);return o.dispatch=a,[i.memoizedState,a]},useDebugValue:pc,useDeferredValue:function(i,o){var a=Yt();return gc(a,i,o)},useTransition:function(){var i=hc(!1);return i=cm.bind(null,Ue,i.queue,!0,!1),Yt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,a){var d=Ue,p=Yt();if(He){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),tt===null)throw Error(s(349));($e&124)!==0||Vh(d,o,a)}p.memoizedState=a;var v={value:a,getSnapshot:o};return p.queue=v,tm(Bh.bind(null,d,v,i),[i]),d.flags|=2048,ro(9,Za(),qh.bind(null,d,v,a,o),null),a},useId:function(){var i=Yt(),o=tt.identifierPrefix;if(He){var a=ei,d=Qn;a=(d&~(1<<32-ue(d)-1)).toString(32)+a,o="«"+o+"R"+a,a=Ha++,0<a&&(o+="H"+a.toString(32)),o+="»"}else a=Qx++,o="«"+o+"r"+a.toString(32)+"»";return i.memoizedState=o},useHostTransitionStatus:vc,useFormState:Kh,useActionState:Kh,useOptimistic:function(i){var o=Yt();o.memoizedState=o.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=xc.bind(null,Ue,!0,a),a.dispatch=o,[i,o]},useMemoCache:cc,useCacheRefresh:function(){return Yt().memoizedState=s_.bind(null,Ue)}},xm={readContext:jt,use:Ja,useCallback:am,useContext:jt,useEffect:nm,useImperativeHandle:rm,useInsertionEffect:im,useLayoutEffect:sm,useMemo:lm,useReducer:Ya,useRef:em,useState:function(){return Ya(ii)},useDebugValue:pc,useDeferredValue:function(i,o){var a=xt();return um(a,Xe.memoizedState,i,o)},useTransition:function(){var i=Ya(ii)[0],o=xt().memoizedState;return[typeof i=="boolean"?i:Nr(i),o]},useSyncExternalStore:jh,useId:hm,useHostTransitionStatus:vc,useFormState:Xh,useActionState:Xh,useOptimistic:function(i,o){var a=xt();return Gh(a,Xe,i,o)},useMemoCache:cc,useCacheRefresh:mm},r_={readContext:jt,use:Ja,useCallback:am,useContext:jt,useEffect:nm,useImperativeHandle:rm,useInsertionEffect:im,useLayoutEffect:sm,useMemo:lm,useReducer:fc,useRef:em,useState:function(){return fc(ii)},useDebugValue:pc,useDeferredValue:function(i,o){var a=xt();return Xe===null?gc(a,i,o):um(a,Xe.memoizedState,i,o)},useTransition:function(){var i=fc(ii)[0],o=xt().memoizedState;return[typeof i=="boolean"?i:Nr(i),o]},useSyncExternalStore:jh,useId:hm,useHostTransitionStatus:vc,useFormState:Qh,useActionState:Qh,useOptimistic:function(i,o){var a=xt();return Xe!==null?Gh(a,Xe,i,o):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:cc,useCacheRefresh:mm},ao=null,kr=0;function Qa(i){var o=kr;return kr+=1,ao===null&&(ao=[]),Rh(ao,i,o)}function Dr(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function el(i,o){throw o.$$typeof===_?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function _m(i){var o=i._init;return o(i._payload)}function Tm(i){function o(I,k){if(i){var L=I.deletions;L===null?(I.deletions=[k],I.flags|=16):L.push(k)}}function a(I,k){if(!i)return null;for(;k!==null;)o(I,k),k=k.sibling;return null}function d(I){for(var k=new Map;I!==null;)I.key!==null?k.set(I.key,I):k.set(I.index,I),I=I.sibling;return k}function p(I,k){return I=Wn(I,k),I.index=0,I.sibling=null,I}function v(I,k,L){return I.index=L,i?(L=I.alternate,L!==null?(L=L.index,L<k?(I.flags|=67108866,k):L):(I.flags|=67108866,k)):(I.flags|=1048576,k)}function T(I){return i&&I.alternate===null&&(I.flags|=67108866),I}function w(I,k,L,Z){return k===null||k.tag!==6?(k=qu(L,I.mode,Z),k.return=I,k):(k=p(k,L),k.return=I,k)}function A(I,k,L,Z){var fe=L.type;return fe===E?J(I,k,L.props.children,Z,L.key):k!==null&&(k.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===ye&&_m(fe)===k.type)?(k=p(k,L.props),Dr(k,L),k.return=I,k):(k=Pa(L.type,L.key,L.props,null,I.mode,Z),Dr(k,L),k.return=I,k)}function P(I,k,L,Z){return k===null||k.tag!==4||k.stateNode.containerInfo!==L.containerInfo||k.stateNode.implementation!==L.implementation?(k=Bu(L,I.mode,Z),k.return=I,k):(k=p(k,L.children||[]),k.return=I,k)}function J(I,k,L,Z,fe){return k===null||k.tag!==7?(k=ds(L,I.mode,Z,fe),k.return=I,k):(k=p(k,L),k.return=I,k)}function X(I,k,L){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=qu(""+k,I.mode,L),k.return=I,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case b:return L=Pa(k.type,k.key,k.props,null,I.mode,L),Dr(L,k),L.return=I,L;case C:return k=Bu(k,I.mode,L),k.return=I,k;case ye:var Z=k._init;return k=Z(k._payload),X(I,k,L)}if(Ce(k)||Q(k))return k=ds(k,I.mode,L,null),k.return=I,k;if(typeof k.then=="function")return X(I,Qa(k),L);if(k.$$typeof===U)return X(I,qa(I,k),L);el(I,k)}return null}function O(I,k,L,Z){var fe=k!==null?k.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return fe!==null?null:w(I,k,""+L,Z);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case b:return L.key===fe?A(I,k,L,Z):null;case C:return L.key===fe?P(I,k,L,Z):null;case ye:return fe=L._init,L=fe(L._payload),O(I,k,L,Z)}if(Ce(L)||Q(L))return fe!==null?null:J(I,k,L,Z,null);if(typeof L.then=="function")return O(I,k,Qa(L),Z);if(L.$$typeof===U)return O(I,k,qa(I,L),Z);el(I,L)}return null}function j(I,k,L,Z,fe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return I=I.get(L)||null,w(k,I,""+Z,fe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return I=I.get(Z.key===null?L:Z.key)||null,A(k,I,Z,fe);case C:return I=I.get(Z.key===null?L:Z.key)||null,P(k,I,Z,fe);case ye:var Pe=Z._init;return Z=Pe(Z._payload),j(I,k,L,Z,fe)}if(Ce(Z)||Q(Z))return I=I.get(L)||null,J(k,I,Z,fe,null);if(typeof Z.then=="function")return j(I,k,L,Qa(Z),fe);if(Z.$$typeof===U)return j(I,k,L,qa(k,Z),fe);el(k,Z)}return null}function Ee(I,k,L,Z){for(var fe=null,Pe=null,ge=k,be=k=0,Nt=null;ge!==null&&be<L.length;be++){ge.index>be?(Nt=ge,ge=null):Nt=ge.sibling;var ze=O(I,ge,L[be],Z);if(ze===null){ge===null&&(ge=Nt);break}i&&ge&&ze.alternate===null&&o(I,ge),k=v(ze,k,be),Pe===null?fe=ze:Pe.sibling=ze,Pe=ze,ge=Nt}if(be===L.length)return a(I,ge),He&&hs(I,be),fe;if(ge===null){for(;be<L.length;be++)ge=X(I,L[be],Z),ge!==null&&(k=v(ge,k,be),Pe===null?fe=ge:Pe.sibling=ge,Pe=ge);return He&&hs(I,be),fe}for(ge=d(ge);be<L.length;be++)Nt=j(ge,I,be,L[be],Z),Nt!==null&&(i&&Nt.alternate!==null&&ge.delete(Nt.key===null?be:Nt.key),k=v(Nt,k,be),Pe===null?fe=Nt:Pe.sibling=Nt,Pe=Nt);return i&&ge.forEach(function(Gi){return o(I,Gi)}),He&&hs(I,be),fe}function xe(I,k,L,Z){if(L==null)throw Error(s(151));for(var fe=null,Pe=null,ge=k,be=k=0,Nt=null,ze=L.next();ge!==null&&!ze.done;be++,ze=L.next()){ge.index>be?(Nt=ge,ge=null):Nt=ge.sibling;var Gi=O(I,ge,ze.value,Z);if(Gi===null){ge===null&&(ge=Nt);break}i&&ge&&Gi.alternate===null&&o(I,ge),k=v(Gi,k,be),Pe===null?fe=Gi:Pe.sibling=Gi,Pe=Gi,ge=Nt}if(ze.done)return a(I,ge),He&&hs(I,be),fe;if(ge===null){for(;!ze.done;be++,ze=L.next())ze=X(I,ze.value,Z),ze!==null&&(k=v(ze,k,be),Pe===null?fe=ze:Pe.sibling=ze,Pe=ze);return He&&hs(I,be),fe}for(ge=d(ge);!ze.done;be++,ze=L.next())ze=j(ge,I,be,ze.value,Z),ze!==null&&(i&&ze.alternate!==null&&ge.delete(ze.key===null?be:ze.key),k=v(ze,k,be),Pe===null?fe=ze:Pe.sibling=ze,Pe=ze);return i&&ge.forEach(function(aT){return o(I,aT)}),He&&hs(I,be),fe}function Qe(I,k,L,Z){if(typeof L=="object"&&L!==null&&L.type===E&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case b:e:{for(var fe=L.key;k!==null;){if(k.key===fe){if(fe=L.type,fe===E){if(k.tag===7){a(I,k.sibling),Z=p(k,L.props.children),Z.return=I,I=Z;break e}}else if(k.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===ye&&_m(fe)===k.type){a(I,k.sibling),Z=p(k,L.props),Dr(Z,L),Z.return=I,I=Z;break e}a(I,k);break}else o(I,k);k=k.sibling}L.type===E?(Z=ds(L.props.children,I.mode,Z,L.key),Z.return=I,I=Z):(Z=Pa(L.type,L.key,L.props,null,I.mode,Z),Dr(Z,L),Z.return=I,I=Z)}return T(I);case C:e:{for(fe=L.key;k!==null;){if(k.key===fe)if(k.tag===4&&k.stateNode.containerInfo===L.containerInfo&&k.stateNode.implementation===L.implementation){a(I,k.sibling),Z=p(k,L.children||[]),Z.return=I,I=Z;break e}else{a(I,k);break}else o(I,k);k=k.sibling}Z=Bu(L,I.mode,Z),Z.return=I,I=Z}return T(I);case ye:return fe=L._init,L=fe(L._payload),Qe(I,k,L,Z)}if(Ce(L))return Ee(I,k,L,Z);if(Q(L)){if(fe=Q(L),typeof fe!="function")throw Error(s(150));return L=fe.call(L),xe(I,k,L,Z)}if(typeof L.then=="function")return Qe(I,k,Qa(L),Z);if(L.$$typeof===U)return Qe(I,k,qa(I,L),Z);el(I,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,k!==null&&k.tag===6?(a(I,k.sibling),Z=p(k,L),Z.return=I,I=Z):(a(I,k),Z=qu(L,I.mode,Z),Z.return=I,I=Z),T(I)):a(I,k)}return function(I,k,L,Z){try{kr=0;var fe=Qe(I,k,L,Z);return ao=null,fe}catch(ge){if(ge===br||ge===$a)throw ge;var Pe=on(29,ge,null,I.mode);return Pe.lanes=Z,Pe.return=I,Pe}finally{}}}var lo=Tm(!0),bm=Tm(!1),_n=M(null),Bn=null;function Mi(i){var o=i.alternate;K(bt,bt.current&1),K(_n,i),Bn===null&&(o===null||io.current!==null||o.memoizedState!==null)&&(Bn=i)}function wm(i){if(i.tag===22){if(K(bt,bt.current),K(_n,i),Bn===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(Bn=i)}}else Ri()}function Ri(){K(bt,bt.current),K(_n,_n.current)}function si(i){H(_n),Bn===i&&(Bn=null),H(bt)}var bt=M(0);function tl(i){for(var o=i;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||ud(a)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function _c(i,o,a,d){o=i.memoizedState,a=a(d,o),a=a==null?o:x({},o,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Tc={enqueueSetState:function(i,o,a){i=i._reactInternals;var d=un(),p=Ei(d);p.payload=o,a!=null&&(p.callback=a),o=Ai(i,p,d),o!==null&&(cn(o,i,d),Sr(o,i,d))},enqueueReplaceState:function(i,o,a){i=i._reactInternals;var d=un(),p=Ei(d);p.tag=1,p.payload=o,a!=null&&(p.callback=a),o=Ai(i,p,d),o!==null&&(cn(o,i,d),Sr(o,i,d))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var a=un(),d=Ei(a);d.tag=2,o!=null&&(d.callback=o),o=Ai(i,d,a),o!==null&&(cn(o,i,a),Sr(o,i,a))}};function Sm(i,o,a,d,p,v,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,v,T):o.prototype&&o.prototype.isPureReactComponent?!mr(a,d)||!mr(p,v):!0}function Cm(i,o,a,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,d),o.state!==i&&Tc.enqueueReplaceState(o,o.state,null)}function _s(i,o){var a=o;if("ref"in o){a={};for(var d in o)d!=="ref"&&(a[d]=o[d])}if(i=i.defaultProps){a===o&&(a=x({},a));for(var p in i)a[p]===void 0&&(a[p]=i[p])}return a}var nl=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Em(i){nl(i)}function Am(i){console.error(i)}function Nm(i){nl(i)}function il(i,o){try{var a=i.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function Mm(i,o,a){try{var d=i.onCaughtError;d(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function bc(i,o,a){return a=Ei(a),a.tag=3,a.payload={element:null},a.callback=function(){il(i,o)},a}function Rm(i){return i=Ei(i),i.tag=3,i}function km(i,o,a,d){var p=a.type.getDerivedStateFromError;if(typeof p=="function"){var v=d.value;i.payload=function(){return p(v)},i.callback=function(){Mm(o,a,d)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){Mm(o,a,d),typeof p!="function"&&(Pi===null?Pi=new Set([this]):Pi.add(this));var w=d.stack;this.componentDidCatch(d.value,{componentStack:w!==null?w:""})})}function a_(i,o,a,d,p){if(a.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=a.alternate,o!==null&&xr(o,a,p,!0),a=_n.current,a!==null){switch(a.tag){case 13:return Bn===null?Hc():a.alternate===null&&ft===0&&(ft=3),a.flags&=-257,a.flags|=65536,a.lanes=p,d===Xu?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([d]):o.add(d),Yc(i,d,p)),!1;case 22:return a.flags|=65536,d===Xu?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([d]):a.add(d)),Yc(i,d,p)),!1}throw Error(s(435,a.tag))}return Yc(i,d,p),Hc(),!1}if(He)return o=_n.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=p,d!==Gu&&(i=Error(s(422),{cause:d}),vr(gn(i,a)))):(d!==Gu&&(o=Error(s(423),{cause:d}),vr(gn(o,a))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,d=gn(d,a),p=bc(i.stateNode,d,p),ec(i,p),ft!==4&&(ft=2)),!1;var v=Error(s(520),{cause:d});if(v=gn(v,a),Vr===null?Vr=[v]:Vr.push(v),ft!==4&&(ft=2),o===null)return!0;d=gn(d,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,i=p&-p,a.lanes|=i,i=bc(a.stateNode,d,i),ec(a,i),!1;case 1:if(o=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Pi===null||!Pi.has(v))))return a.flags|=65536,p&=-p,a.lanes|=p,p=Rm(p),km(p,i,a,d),ec(a,p),!1}a=a.return}while(a!==null);return!1}var Dm=Error(s(461)),Et=!1;function It(i,o,a,d){o.child=i===null?bm(o,null,a,d):lo(o,i.child,a,d)}function Im(i,o,a,d,p){a=a.render;var v=o.ref;if("ref"in d){var T={};for(var w in d)w!=="ref"&&(T[w]=d[w])}else T=d;return ys(o),d=oc(i,o,a,T,v,p),w=rc(),i!==null&&!Et?(ac(i,o,p),oi(i,o,p)):(He&&w&&$u(o),o.flags|=1,It(i,o,d,p),o.child)}function Um(i,o,a,d,p){if(i===null){var v=a.type;return typeof v=="function"&&!Vu(v)&&v.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=v,Lm(i,o,v,d,p)):(i=Pa(a.type,null,d,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(v=i.child,!Rc(i,p)){var T=v.memoizedProps;if(a=a.compare,a=a!==null?a:mr,a(T,d)&&i.ref===o.ref)return oi(i,o,p)}return o.flags|=1,i=Wn(v,d),i.ref=o.ref,i.return=o,o.child=i}function Lm(i,o,a,d,p){if(i!==null){var v=i.memoizedProps;if(mr(v,d)&&i.ref===o.ref)if(Et=!1,o.pendingProps=d=v,Rc(i,p))(i.flags&131072)!==0&&(Et=!0);else return o.lanes=i.lanes,oi(i,o,p)}return wc(i,o,a,d,p)}function Pm(i,o,a){var d=o.pendingProps,p=d.children,v=i!==null?i.memoizedState:null;if(d.mode==="hidden"){if((o.flags&128)!==0){if(d=v!==null?v.baseLanes|a:a,i!==null){for(p=o.child=i.child,v=0;p!==null;)v=v|p.lanes|p.childLanes,p=p.sibling;o.childLanes=v&~d}else o.childLanes=0,o.child=null;return Om(i,o,d,a)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Ba(o,v!==null?v.cachePool:null),v!==null?Lh(o,v):nc(),wm(o);else return o.lanes=o.childLanes=536870912,Om(i,o,v!==null?v.baseLanes|a:a,a)}else v!==null?(Ba(o,v.cachePool),Lh(o,v),Ri(),o.memoizedState=null):(i!==null&&Ba(o,null),nc(),Ri());return It(i,o,p,a),o.child}function Om(i,o,a,d){var p=Ku();return p=p===null?null:{parent:Tt._currentValue,pool:p},o.memoizedState={baseLanes:a,cachePool:p},i!==null&&Ba(o,null),nc(),wm(o),i!==null&&xr(i,o,d,!0),null}function sl(i,o){var a=o.ref;if(a===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(o.flags|=4194816)}}function wc(i,o,a,d,p){return ys(o),a=oc(i,o,a,d,void 0,p),d=rc(),i!==null&&!Et?(ac(i,o,p),oi(i,o,p)):(He&&d&&$u(o),o.flags|=1,It(i,o,a,p),o.child)}function jm(i,o,a,d,p,v){return ys(o),o.updateQueue=null,a=Oh(o,d,a,p),Ph(i),d=rc(),i!==null&&!Et?(ac(i,o,v),oi(i,o,v)):(He&&d&&$u(o),o.flags|=1,It(i,o,a,v),o.child)}function Vm(i,o,a,d,p){if(ys(o),o.stateNode===null){var v=Ws,T=a.contextType;typeof T=="object"&&T!==null&&(v=jt(T)),v=new a(d,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Tc,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=d,v.state=o.memoizedState,v.refs={},Wu(o),T=a.contextType,v.context=typeof T=="object"&&T!==null?jt(T):Ws,v.state=o.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(_c(o,a,T,d),v.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(T=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),T!==v.state&&Tc.enqueueReplaceState(v,v.state,null),Er(o,d,v,p),Cr(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(i===null){v=o.stateNode;var w=o.memoizedProps,A=_s(a,w);v.props=A;var P=v.context,J=a.contextType;T=Ws,typeof J=="object"&&J!==null&&(T=jt(J));var X=a.getDerivedStateFromProps;J=typeof X=="function"||typeof v.getSnapshotBeforeUpdate=="function",w=o.pendingProps!==w,J||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w||P!==T)&&Cm(o,v,d,T),Ci=!1;var O=o.memoizedState;v.state=O,Er(o,d,v,p),Cr(),P=o.memoizedState,w||O!==P||Ci?(typeof X=="function"&&(_c(o,a,X,d),P=o.memoizedState),(A=Ci||Sm(o,a,A,d,O,P,T))?(J||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=P),v.props=d,v.state=P,v.context=T,d=A):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{v=o.stateNode,Qu(i,o),T=o.memoizedProps,J=_s(a,T),v.props=J,X=o.pendingProps,O=v.context,P=a.contextType,A=Ws,typeof P=="object"&&P!==null&&(A=jt(P)),w=a.getDerivedStateFromProps,(P=typeof w=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==X||O!==A)&&Cm(o,v,d,A),Ci=!1,O=o.memoizedState,v.state=O,Er(o,d,v,p),Cr();var j=o.memoizedState;T!==X||O!==j||Ci||i!==null&&i.dependencies!==null&&Va(i.dependencies)?(typeof w=="function"&&(_c(o,a,w,d),j=o.memoizedState),(J=Ci||Sm(o,a,J,d,O,j,A)||i!==null&&i.dependencies!==null&&Va(i.dependencies))?(P||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,j,A),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,j,A)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||T===i.memoizedProps&&O===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&O===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=j),v.props=d,v.state=j,v.context=A,d=J):(typeof v.componentDidUpdate!="function"||T===i.memoizedProps&&O===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&O===i.memoizedState||(o.flags|=1024),d=!1)}return v=d,sl(i,o),d=(o.flags&128)!==0,v||d?(v=o.stateNode,a=d&&typeof a.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,i!==null&&d?(o.child=lo(o,i.child,null,p),o.child=lo(o,null,a,p)):It(i,o,a,p),o.memoizedState=v.state,i=o.child):i=oi(i,o,p),i}function qm(i,o,a,d){return yr(),o.flags|=256,It(i,o,a,d),o.child}var Sc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cc(i){return{baseLanes:i,cachePool:Ah()}}function Ec(i,o,a){return i=i!==null?i.childLanes&~a:0,o&&(i|=Tn),i}function Bm(i,o,a){var d=o.pendingProps,p=!1,v=(o.flags&128)!==0,T;if((T=v)||(T=i!==null&&i.memoizedState===null?!1:(bt.current&2)!==0),T&&(p=!0,o.flags&=-129),T=(o.flags&32)!==0,o.flags&=-33,i===null){if(He){if(p?Mi(o):Ri(),He){var w=dt,A;if(A=w){e:{for(A=w,w=qn;A.nodeType!==8;){if(!w){w=null;break e}if(A=Un(A.nextSibling),A===null){w=null;break e}}w=A}w!==null?(o.memoizedState={dehydrated:w,treeContext:fs!==null?{id:Qn,overflow:ei}:null,retryLane:536870912,hydrationErrors:null},A=on(18,null,null,0),A.stateNode=w,A.return=o,o.child=A,Gt=o,dt=null,A=!0):A=!1}A||ps(o)}if(w=o.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return ud(w)?o.lanes=32:o.lanes=536870912,null;si(o)}return w=d.children,d=d.fallback,p?(Ri(),p=o.mode,w=ol({mode:"hidden",children:w},p),d=ds(d,p,a,null),w.return=o,d.return=o,w.sibling=d,o.child=w,p=o.child,p.memoizedState=Cc(a),p.childLanes=Ec(i,T,a),o.memoizedState=Sc,d):(Mi(o),Ac(o,w))}if(A=i.memoizedState,A!==null&&(w=A.dehydrated,w!==null)){if(v)o.flags&256?(Mi(o),o.flags&=-257,o=Nc(i,o,a)):o.memoizedState!==null?(Ri(),o.child=i.child,o.flags|=128,o=null):(Ri(),p=d.fallback,w=o.mode,d=ol({mode:"visible",children:d.children},w),p=ds(p,w,a,null),p.flags|=2,d.return=o,p.return=o,d.sibling=p,o.child=d,lo(o,i.child,null,a),d=o.child,d.memoizedState=Cc(a),d.childLanes=Ec(i,T,a),o.memoizedState=Sc,o=p);else if(Mi(o),ud(w)){if(T=w.nextSibling&&w.nextSibling.dataset,T)var P=T.dgst;T=P,d=Error(s(419)),d.stack="",d.digest=T,vr({value:d,source:null,stack:null}),o=Nc(i,o,a)}else if(Et||xr(i,o,a,!1),T=(a&i.childLanes)!==0,Et||T){if(T=tt,T!==null&&(d=a&-a,d=(d&42)!==0?1:os(d),d=(d&(T.suspendedLanes|a))!==0?0:d,d!==0&&d!==A.retryLane))throw A.retryLane=d,Xs(i,d),cn(T,i,d),Dm;w.data==="$?"||Hc(),o=Nc(i,o,a)}else w.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=A.treeContext,dt=Un(w.nextSibling),Gt=o,He=!0,ms=null,qn=!1,i!==null&&(vn[xn++]=Qn,vn[xn++]=ei,vn[xn++]=fs,Qn=i.id,ei=i.overflow,fs=o),o=Ac(o,d.children),o.flags|=4096);return o}return p?(Ri(),p=d.fallback,w=o.mode,A=i.child,P=A.sibling,d=Wn(A,{mode:"hidden",children:d.children}),d.subtreeFlags=A.subtreeFlags&65011712,P!==null?p=Wn(P,p):(p=ds(p,w,a,null),p.flags|=2),p.return=o,d.return=o,d.sibling=p,o.child=d,d=p,p=o.child,w=i.child.memoizedState,w===null?w=Cc(a):(A=w.cachePool,A!==null?(P=Tt._currentValue,A=A.parent!==P?{parent:P,pool:P}:A):A=Ah(),w={baseLanes:w.baseLanes|a,cachePool:A}),p.memoizedState=w,p.childLanes=Ec(i,T,a),o.memoizedState=Sc,d):(Mi(o),a=i.child,i=a.sibling,a=Wn(a,{mode:"visible",children:d.children}),a.return=o,a.sibling=null,i!==null&&(T=o.deletions,T===null?(o.deletions=[i],o.flags|=16):T.push(i)),o.child=a,o.memoizedState=null,a)}function Ac(i,o){return o=ol({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function ol(i,o){return i=on(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Nc(i,o,a){return lo(o,i.child,null,a),i=Ac(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function $m(i,o,a){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),Hu(i.return,o,a)}function Mc(i,o,a,d,p){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:p}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=a,v.tailMode=p)}function zm(i,o,a){var d=o.pendingProps,p=d.revealOrder,v=d.tail;if(It(i,o,d.children,a),d=bt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&$m(i,a,o);else if(i.tag===19)$m(i,a,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}switch(K(bt,d),p){case"forwards":for(a=o.child,p=null;a!==null;)i=a.alternate,i!==null&&tl(i)===null&&(p=a),a=a.sibling;a=p,a===null?(p=o.child,o.child=null):(p=a.sibling,a.sibling=null),Mc(o,!1,p,a,v);break;case"backwards":for(a=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&tl(i)===null){o.child=p;break}i=p.sibling,p.sibling=a,a=p,p=i}Mc(o,!0,a,null,v);break;case"together":Mc(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function oi(i,o,a){if(i!==null&&(o.dependencies=i.dependencies),Li|=o.lanes,(a&o.childLanes)===0)if(i!==null){if(xr(i,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,a=Wn(i,i.pendingProps),o.child=a,a.return=o;i.sibling!==null;)i=i.sibling,a=a.sibling=Wn(i,i.pendingProps),a.return=o;a.sibling=null}return o.child}function Rc(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Va(i)))}function l_(i,o,a){switch(o.tag){case 3:Me(o,o.stateNode.containerInfo),Si(o,Tt,i.memoizedState.cache),yr();break;case 27:case 5:Je(o);break;case 4:Me(o,o.stateNode.containerInfo);break;case 10:Si(o,o.type,o.memoizedProps.value);break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(Mi(o),o.flags|=128,null):(a&o.child.childLanes)!==0?Bm(i,o,a):(Mi(o),i=oi(i,o,a),i!==null?i.sibling:null);Mi(o);break;case 19:var p=(i.flags&128)!==0;if(d=(a&o.childLanes)!==0,d||(xr(i,o,a,!1),d=(a&o.childLanes)!==0),p){if(d)return zm(i,o,a);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),K(bt,bt.current),d)break;return null;case 22:case 23:return o.lanes=0,Pm(i,o,a);case 24:Si(o,Tt,i.memoizedState.cache)}return oi(i,o,a)}function Gm(i,o,a){if(i!==null)if(i.memoizedProps!==o.pendingProps)Et=!0;else{if(!Rc(i,a)&&(o.flags&128)===0)return Et=!1,l_(i,o,a);Et=(i.flags&131072)!==0}else Et=!1,He&&(o.flags&1048576)!==0&&_h(o,ja,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var d=o.elementType,p=d._init;if(d=p(d._payload),o.type=d,typeof d=="function")Vu(d)?(i=_s(d,i),o.tag=1,o=Vm(null,o,d,i,a)):(o.tag=0,o=wc(null,o,d,i,a));else{if(d!=null){if(p=d.$$typeof,p===F){o.tag=11,o=Im(null,o,d,i,a);break e}else if(p===se){o.tag=14,o=Um(null,o,d,i,a);break e}}throw o=Fe(d)||d,Error(s(306,o,""))}}return o;case 0:return wc(i,o,o.type,o.pendingProps,a);case 1:return d=o.type,p=_s(d,o.pendingProps),Vm(i,o,d,p,a);case 3:e:{if(Me(o,o.stateNode.containerInfo),i===null)throw Error(s(387));d=o.pendingProps;var v=o.memoizedState;p=v.element,Qu(i,o),Er(o,d,null,a);var T=o.memoizedState;if(d=T.cache,Si(o,Tt,d),d!==v.cache&&Ju(o,[Tt],a,!0),Cr(),d=T.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:T.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=qm(i,o,d,a);break e}else if(d!==p){p=gn(Error(s(424)),o),vr(p),o=qm(i,o,d,a);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(dt=Un(i.firstChild),Gt=o,He=!0,ms=null,qn=!0,a=bm(o,null,d,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(yr(),d===p){o=oi(i,o,a);break e}It(i,o,d,a)}o=o.child}return o;case 26:return sl(i,o),i===null?(a=Yp(o.type,null,o.pendingProps,null))?o.memoizedState=a:He||(a=o.type,i=o.pendingProps,d=xl(de.current).createElement(a),d[St]=o,d[Pt]=i,Lt(d,a,i),st(d),o.stateNode=d):o.memoizedState=Yp(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Je(o),i===null&&He&&(d=o.stateNode=Fp(o.type,o.pendingProps,de.current),Gt=o,qn=!0,p=dt,Vi(o.type)?(cd=p,dt=Un(d.firstChild)):dt=p),It(i,o,o.pendingProps.children,a),sl(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&He&&((p=d=dt)&&(d=P_(d,o.type,o.pendingProps,qn),d!==null?(o.stateNode=d,Gt=o,dt=Un(d.firstChild),qn=!1,p=!0):p=!1),p||ps(o)),Je(o),p=o.type,v=o.pendingProps,T=i!==null?i.memoizedProps:null,d=v.children,rd(p,v)?d=null:T!==null&&rd(p,T)&&(o.flags|=32),o.memoizedState!==null&&(p=oc(i,o,e_,null,null,a),Yr._currentValue=p),sl(i,o),It(i,o,d,a),o.child;case 6:return i===null&&He&&((i=a=dt)&&(a=O_(a,o.pendingProps,qn),a!==null?(o.stateNode=a,Gt=o,dt=null,i=!0):i=!1),i||ps(o)),null;case 13:return Bm(i,o,a);case 4:return Me(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=lo(o,null,d,a):It(i,o,d,a),o.child;case 11:return Im(i,o,o.type,o.pendingProps,a);case 7:return It(i,o,o.pendingProps,a),o.child;case 8:return It(i,o,o.pendingProps.children,a),o.child;case 12:return It(i,o,o.pendingProps.children,a),o.child;case 10:return d=o.pendingProps,Si(o,o.type,d.value),It(i,o,d.children,a),o.child;case 9:return p=o.type._context,d=o.pendingProps.children,ys(o),p=jt(p),d=d(p),o.flags|=1,It(i,o,d,a),o.child;case 14:return Um(i,o,o.type,o.pendingProps,a);case 15:return Lm(i,o,o.type,o.pendingProps,a);case 19:return zm(i,o,a);case 31:return d=o.pendingProps,a=o.mode,d={mode:d.mode,children:d.children},i===null?(a=ol(d,a),a.ref=o.ref,o.child=a,a.return=o,o=a):(a=Wn(i.child,d),a.ref=o.ref,o.child=a,a.return=o,o=a),o;case 22:return Pm(i,o,a);case 24:return ys(o),d=jt(Tt),i===null?(p=Ku(),p===null&&(p=tt,v=Yu(),p.pooledCache=v,v.refCount++,v!==null&&(p.pooledCacheLanes|=a),p=v),o.memoizedState={parent:d,cache:p},Wu(o),Si(o,Tt,p)):((i.lanes&a)!==0&&(Qu(i,o),Er(o,null,null,a),Cr()),p=i.memoizedState,v=o.memoizedState,p.parent!==d?(p={parent:d,cache:d},o.memoizedState=p,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=p),Si(o,Tt,d)):(d=v.cache,Si(o,Tt,d),d!==p.cache&&Ju(o,[Tt],a,!0))),It(i,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function ri(i){i.flags|=4}function Fm(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Qp(o)){if(o=_n.current,o!==null&&(($e&4194048)===$e?Bn!==null:($e&62914560)!==$e&&($e&536870912)===0||o!==Bn))throw wr=Xu,Nh;i.flags|=8192}}function rl(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?tn():536870912,i.lanes|=o,ho|=o)}function Ir(i,o){if(!He)switch(i.tailMode){case"hidden":o=i.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function lt(i){var o=i.alternate!==null&&i.alternate.child===i.child,a=0,d=0;if(o)for(var p=i.child;p!==null;)a|=p.lanes|p.childLanes,d|=p.subtreeFlags&65011712,d|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)a|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=d,i.childLanes=a,o}function u_(i,o,a){var d=o.pendingProps;switch(zu(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(o),null;case 1:return lt(o),null;case 3:return a=o.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),ni(Tt),rt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(gr(o)?ri(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,wh())),lt(o),null;case 26:return a=o.memoizedState,i===null?(ri(o),a!==null?(lt(o),Fm(o,a)):(lt(o),o.flags&=-16777217)):a?a!==i.memoizedState?(ri(o),lt(o),Fm(o,a)):(lt(o),o.flags&=-16777217):(i.memoizedProps!==d&&ri(o),lt(o),o.flags&=-16777217),null;case 27:Ht(o),a=de.current;var p=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==d&&ri(o);else{if(!d){if(o.stateNode===null)throw Error(s(166));return lt(o),null}i=le.current,gr(o)?Th(o):(i=Fp(p,d,a),o.stateNode=i,ri(o))}return lt(o),null;case 5:if(Ht(o),a=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&ri(o);else{if(!d){if(o.stateNode===null)throw Error(s(166));return lt(o),null}if(i=le.current,gr(o))Th(o);else{switch(p=xl(de.current),i){case 1:i=p.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=p.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=p.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=p.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=p.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof d.is=="string"?p.createElement("select",{is:d.is}):p.createElement("select"),d.multiple?i.multiple=!0:d.size&&(i.size=d.size);break;default:i=typeof d.is=="string"?p.createElement(a,{is:d.is}):p.createElement(a)}}i[St]=o,i[Pt]=d;e:for(p=o.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===o)break e;for(;p.sibling===null;){if(p.return===null||p.return===o)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}o.stateNode=i;e:switch(Lt(i,a,d),a){case"button":case"input":case"select":case"textarea":i=!!d.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&ri(o)}}return lt(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==d&&ri(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(s(166));if(i=de.current,gr(o)){if(i=o.stateNode,a=o.memoizedProps,d=null,p=Gt,p!==null)switch(p.tag){case 27:case 5:d=p.memoizedProps}i[St]=o,i=!!(i.nodeValue===a||d!==null&&d.suppressHydrationWarning===!0||jp(i.nodeValue,a)),i||ps(o)}else i=xl(i).createTextNode(d),i[St]=o,o.stateNode=i}return lt(o),null;case 13:if(d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=gr(o),d!==null&&d.dehydrated!==null){if(i===null){if(!p)throw Error(s(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[St]=o}else yr(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;lt(o),p=!1}else p=wh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return o.flags&256?(si(o),o):(si(o),null)}if(si(o),(o.flags&128)!==0)return o.lanes=a,o;if(a=d!==null,i=i!==null&&i.memoizedState!==null,a){d=o.child,p=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(p=d.alternate.memoizedState.cachePool.pool);var v=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==p&&(d.flags|=2048)}return a!==i&&a&&(o.child.flags|=8192),rl(o,o.updateQueue),lt(o),null;case 4:return rt(),i===null&&td(o.stateNode.containerInfo),lt(o),null;case 10:return ni(o.type),lt(o),null;case 19:if(H(bt),p=o.memoizedState,p===null)return lt(o),null;if(d=(o.flags&128)!==0,v=p.rendering,v===null)if(d)Ir(p,!1);else{if(ft!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(v=tl(i),v!==null){for(o.flags|=128,Ir(p,!1),i=v.updateQueue,o.updateQueue=i,rl(o,i),o.subtreeFlags=0,i=a,a=o.child;a!==null;)xh(a,i),a=a.sibling;return K(bt,bt.current&1|2),o.child}i=i.sibling}p.tail!==null&&kt()>ul&&(o.flags|=128,d=!0,Ir(p,!1),o.lanes=4194304)}else{if(!d)if(i=tl(v),i!==null){if(o.flags|=128,d=!0,i=i.updateQueue,o.updateQueue=i,rl(o,i),Ir(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!He)return lt(o),null}else 2*kt()-p.renderingStartTime>ul&&a!==536870912&&(o.flags|=128,d=!0,Ir(p,!1),o.lanes=4194304);p.isBackwards?(v.sibling=o.child,o.child=v):(i=p.last,i!==null?i.sibling=v:o.child=v,p.last=v)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=kt(),o.sibling=null,i=bt.current,K(bt,d?i&1|2:i&1),o):(lt(o),null);case 22:case 23:return si(o),ic(),d=o.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(a&536870912)!==0&&(o.flags&128)===0&&(lt(o),o.subtreeFlags&6&&(o.flags|=8192)):lt(o),a=o.updateQueue,a!==null&&rl(o,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==a&&(o.flags|=2048),i!==null&&H(vs),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),ni(Tt),lt(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function c_(i,o){switch(zu(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ni(Tt),rt(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Ht(o),null;case 13:if(si(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));yr()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return H(bt),null;case 4:return rt(),null;case 10:return ni(o.type),null;case 22:case 23:return si(o),ic(),i!==null&&H(vs),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return ni(Tt),null;case 25:return null;default:return null}}function Hm(i,o){switch(zu(o),o.tag){case 3:ni(Tt),rt();break;case 26:case 27:case 5:Ht(o);break;case 4:rt();break;case 13:si(o);break;case 19:H(bt);break;case 10:ni(o.type);break;case 22:case 23:si(o),ic(),i!==null&&H(vs);break;case 24:ni(Tt)}}function Ur(i,o){try{var a=o.updateQueue,d=a!==null?a.lastEffect:null;if(d!==null){var p=d.next;a=p;do{if((a.tag&i)===i){d=void 0;var v=a.create,T=a.inst;d=v(),T.destroy=d}a=a.next}while(a!==p)}}catch(w){et(o,o.return,w)}}function ki(i,o,a){try{var d=o.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var v=p.next;d=v;do{if((d.tag&i)===i){var T=d.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,p=o;var A=a,P=w;try{P()}catch(J){et(p,A,J)}}}d=d.next}while(d!==v)}}catch(J){et(o,o.return,J)}}function Jm(i){var o=i.updateQueue;if(o!==null){var a=i.stateNode;try{Uh(o,a)}catch(d){et(i,i.return,d)}}}function Ym(i,o,a){a.props=_s(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(d){et(i,o,d)}}function Lr(i,o){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof a=="function"?i.refCleanup=a(d):a.current=d}}catch(p){et(i,o,p)}}function $n(i,o){var a=i.ref,d=i.refCleanup;if(a!==null)if(typeof d=="function")try{d()}catch(p){et(i,o,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(p){et(i,o,p)}else a.current=null}function Zm(i){var o=i.type,a=i.memoizedProps,d=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&d.focus();break e;case"img":a.src?d.src=a.src:a.srcSet&&(d.srcset=a.srcSet)}}catch(p){et(i,i.return,p)}}function kc(i,o,a){try{var d=i.stateNode;k_(d,i.type,a,o),d[Pt]=o}catch(p){et(i,i.return,p)}}function Km(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Vi(i.type)||i.tag===4}function Dc(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Km(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Vi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ic(i,o,a){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(i),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=vl));else if(d!==4&&(d===27&&Vi(i.type)&&(a=i.stateNode,o=null),i=i.child,i!==null))for(Ic(i,o,a),i=i.sibling;i!==null;)Ic(i,o,a),i=i.sibling}function al(i,o,a){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?a.insertBefore(i,o):a.appendChild(i);else if(d!==4&&(d===27&&Vi(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(al(i,o,a),i=i.sibling;i!==null;)al(i,o,a),i=i.sibling}function Xm(i){var o=i.stateNode,a=i.memoizedProps;try{for(var d=i.type,p=o.attributes;p.length;)o.removeAttributeNode(p[0]);Lt(o,d,a),o[St]=i,o[Pt]=a}catch(v){et(i,i.return,v)}}var ai=!1,gt=!1,Uc=!1,Wm=typeof WeakSet=="function"?WeakSet:Set,At=null;function d_(i,o){if(i=i.containerInfo,sd=Cl,i=uh(i),Du(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var p=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var T=0,w=-1,A=-1,P=0,J=0,X=i,O=null;t:for(;;){for(var j;X!==a||p!==0&&X.nodeType!==3||(w=T+p),X!==v||d!==0&&X.nodeType!==3||(A=T+d),X.nodeType===3&&(T+=X.nodeValue.length),(j=X.firstChild)!==null;)O=X,X=j;for(;;){if(X===i)break t;if(O===a&&++P===p&&(w=T),O===v&&++J===d&&(A=T),(j=X.nextSibling)!==null)break;X=O,O=X.parentNode}X=j}a=w===-1||A===-1?null:{start:w,end:A}}else a=null}a=a||{start:0,end:0}}else a=null;for(od={focusedElem:i,selectionRange:a},Cl=!1,At=o;At!==null;)if(o=At,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,At=i;else for(;At!==null;){switch(o=At,v=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=o,p=v.memoizedProps,v=v.memoizedState,d=a.stateNode;try{var Ee=_s(a.type,p,a.elementType===a.type);i=d.getSnapshotBeforeUpdate(Ee,v),d.__reactInternalSnapshotBeforeUpdate=i}catch(xe){et(a,a.return,xe)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,a=i.nodeType,a===9)ld(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":ld(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,At=i;break}At=o.return}}function Qm(i,o,a){var d=a.flags;switch(a.tag){case 0:case 11:case 15:Di(i,a),d&4&&Ur(5,a);break;case 1:if(Di(i,a),d&4)if(i=a.stateNode,o===null)try{i.componentDidMount()}catch(T){et(a,a.return,T)}else{var p=_s(a.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(p,o,i.__reactInternalSnapshotBeforeUpdate)}catch(T){et(a,a.return,T)}}d&64&&Jm(a),d&512&&Lr(a,a.return);break;case 3:if(Di(i,a),d&64&&(i=a.updateQueue,i!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{Uh(i,o)}catch(T){et(a,a.return,T)}}break;case 27:o===null&&d&4&&Xm(a);case 26:case 5:Di(i,a),o===null&&d&4&&Zm(a),d&512&&Lr(a,a.return);break;case 12:Di(i,a);break;case 13:Di(i,a),d&4&&np(i,a),d&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=__.bind(null,a),j_(i,a))));break;case 22:if(d=a.memoizedState!==null||ai,!d){o=o!==null&&o.memoizedState!==null||gt,p=ai;var v=gt;ai=d,(gt=o)&&!v?Ii(i,a,(a.subtreeFlags&8772)!==0):Di(i,a),ai=p,gt=v}break;case 30:break;default:Di(i,a)}}function ep(i){var o=i.alternate;o!==null&&(i.alternate=null,ep(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&we(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ot=null,Zt=!1;function li(i,o,a){for(a=a.child;a!==null;)tp(i,o,a),a=a.sibling}function tp(i,o,a){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(On,a)}catch{}switch(a.tag){case 26:gt||$n(a,o),li(i,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:gt||$n(a,o);var d=ot,p=Zt;Vi(a.type)&&(ot=a.stateNode,Zt=!1),li(i,o,a),Gr(a.stateNode),ot=d,Zt=p;break;case 5:gt||$n(a,o);case 6:if(d=ot,p=Zt,ot=null,li(i,o,a),ot=d,Zt=p,ot!==null)if(Zt)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(a.stateNode)}catch(v){et(a,o,v)}else try{ot.removeChild(a.stateNode)}catch(v){et(a,o,v)}break;case 18:ot!==null&&(Zt?(i=ot,zp(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Wr(i)):zp(ot,a.stateNode));break;case 4:d=ot,p=Zt,ot=a.stateNode.containerInfo,Zt=!0,li(i,o,a),ot=d,Zt=p;break;case 0:case 11:case 14:case 15:gt||ki(2,a,o),gt||ki(4,a,o),li(i,o,a);break;case 1:gt||($n(a,o),d=a.stateNode,typeof d.componentWillUnmount=="function"&&Ym(a,o,d)),li(i,o,a);break;case 21:li(i,o,a);break;case 22:gt=(d=gt)||a.memoizedState!==null,li(i,o,a),gt=d;break;default:li(i,o,a)}}function np(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Wr(i)}catch(a){et(o,o.return,a)}}function f_(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new Wm),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new Wm),o;default:throw Error(s(435,i.tag))}}function Lc(i,o){var a=f_(i);o.forEach(function(d){var p=T_.bind(null,i,d);a.has(d)||(a.add(d),d.then(p,p))})}function rn(i,o){var a=o.deletions;if(a!==null)for(var d=0;d<a.length;d++){var p=a[d],v=i,T=o,w=T;e:for(;w!==null;){switch(w.tag){case 27:if(Vi(w.type)){ot=w.stateNode,Zt=!1;break e}break;case 5:ot=w.stateNode,Zt=!1;break e;case 3:case 4:ot=w.stateNode.containerInfo,Zt=!0;break e}w=w.return}if(ot===null)throw Error(s(160));tp(v,T,p),ot=null,Zt=!1,v=p.alternate,v!==null&&(v.return=null),p.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)ip(o,i),o=o.sibling}var In=null;function ip(i,o){var a=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:rn(o,i),an(i),d&4&&(ki(3,i,i.return),Ur(3,i),ki(5,i,i.return));break;case 1:rn(o,i),an(i),d&512&&(gt||a===null||$n(a,a.return)),d&64&&ai&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?d:a.concat(d))));break;case 26:var p=In;if(rn(o,i),an(i),d&512&&(gt||a===null||$n(a,a.return)),d&4){var v=a!==null?a.memoizedState:null;if(d=i.memoizedState,a===null)if(d===null)if(i.stateNode===null){e:{d=i.type,a=i.memoizedProps,p=p.ownerDocument||p;t:switch(d){case"title":v=p.getElementsByTagName("title")[0],(!v||v[te]||v[St]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=p.createElement(d),p.head.insertBefore(v,p.querySelector("head > title"))),Lt(v,d,a),v[St]=i,st(v),d=v;break e;case"link":var T=Xp("link","href",p).get(d+(a.href||""));if(T){for(var w=0;w<T.length;w++)if(v=T[w],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(w,1);break t}}v=p.createElement(d),Lt(v,d,a),p.head.appendChild(v);break;case"meta":if(T=Xp("meta","content",p).get(d+(a.content||""))){for(w=0;w<T.length;w++)if(v=T[w],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(w,1);break t}}v=p.createElement(d),Lt(v,d,a),p.head.appendChild(v);break;default:throw Error(s(468,d))}v[St]=i,st(v),d=v}i.stateNode=d}else Wp(p,i.type,i.stateNode);else i.stateNode=Kp(p,d,i.memoizedProps);else v!==d?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,d===null?Wp(p,i.type,i.stateNode):Kp(p,d,i.memoizedProps)):d===null&&i.stateNode!==null&&kc(i,i.memoizedProps,a.memoizedProps)}break;case 27:rn(o,i),an(i),d&512&&(gt||a===null||$n(a,a.return)),a!==null&&d&4&&kc(i,i.memoizedProps,a.memoizedProps);break;case 5:if(rn(o,i),an(i),d&512&&(gt||a===null||$n(a,a.return)),i.flags&32){p=i.stateNode;try{Gs(p,"")}catch(j){et(i,i.return,j)}}d&4&&i.stateNode!=null&&(p=i.memoizedProps,kc(i,p,a!==null?a.memoizedProps:p)),d&1024&&(Uc=!0);break;case 6:if(rn(o,i),an(i),d&4){if(i.stateNode===null)throw Error(s(162));d=i.memoizedProps,a=i.stateNode;try{a.nodeValue=d}catch(j){et(i,i.return,j)}}break;case 3:if(bl=null,p=In,In=_l(o.containerInfo),rn(o,i),In=p,an(i),d&4&&a!==null&&a.memoizedState.isDehydrated)try{Wr(o.containerInfo)}catch(j){et(i,i.return,j)}Uc&&(Uc=!1,sp(i));break;case 4:d=In,In=_l(i.stateNode.containerInfo),rn(o,i),an(i),In=d;break;case 12:rn(o,i),an(i);break;case 13:rn(o,i),an(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Bc=kt()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Lc(i,d)));break;case 22:p=i.memoizedState!==null;var A=a!==null&&a.memoizedState!==null,P=ai,J=gt;if(ai=P||p,gt=J||A,rn(o,i),gt=J,ai=P,an(i),d&8192)e:for(o=i.stateNode,o._visibility=p?o._visibility&-2:o._visibility|1,p&&(a===null||A||ai||gt||Ts(i)),a=null,o=i;;){if(o.tag===5||o.tag===26){if(a===null){A=a=o;try{if(v=A.stateNode,p)T=v.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{w=A.stateNode;var X=A.memoizedProps.style,O=X!=null&&X.hasOwnProperty("display")?X.display:null;w.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(j){et(A,A.return,j)}}}else if(o.tag===6){if(a===null){A=o;try{A.stateNode.nodeValue=p?"":A.memoizedProps}catch(j){et(A,A.return,j)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=i.updateQueue,d!==null&&(a=d.retryQueue,a!==null&&(d.retryQueue=null,Lc(i,a))));break;case 19:rn(o,i),an(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Lc(i,d)));break;case 30:break;case 21:break;default:rn(o,i),an(i)}}function an(i){var o=i.flags;if(o&2){try{for(var a,d=i.return;d!==null;){if(Km(d)){a=d;break}d=d.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var p=a.stateNode,v=Dc(i);al(i,v,p);break;case 5:var T=a.stateNode;a.flags&32&&(Gs(T,""),a.flags&=-33);var w=Dc(i);al(i,w,T);break;case 3:case 4:var A=a.stateNode.containerInfo,P=Dc(i);Ic(i,P,A);break;default:throw Error(s(161))}}catch(J){et(i,i.return,J)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function sp(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;sp(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Di(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Qm(i,o.alternate,o),o=o.sibling}function Ts(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:ki(4,o,o.return),Ts(o);break;case 1:$n(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&Ym(o,o.return,a),Ts(o);break;case 27:Gr(o.stateNode);case 26:case 5:$n(o,o.return),Ts(o);break;case 22:o.memoizedState===null&&Ts(o);break;case 30:Ts(o);break;default:Ts(o)}i=i.sibling}}function Ii(i,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,p=i,v=o,T=v.flags;switch(v.tag){case 0:case 11:case 15:Ii(p,v,a),Ur(4,v);break;case 1:if(Ii(p,v,a),d=v,p=d.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(P){et(d,d.return,P)}if(d=v,p=d.updateQueue,p!==null){var w=d.stateNode;try{var A=p.shared.hiddenCallbacks;if(A!==null)for(p.shared.hiddenCallbacks=null,p=0;p<A.length;p++)Ih(A[p],w)}catch(P){et(d,d.return,P)}}a&&T&64&&Jm(v),Lr(v,v.return);break;case 27:Xm(v);case 26:case 5:Ii(p,v,a),a&&d===null&&T&4&&Zm(v),Lr(v,v.return);break;case 12:Ii(p,v,a);break;case 13:Ii(p,v,a),a&&T&4&&np(p,v);break;case 22:v.memoizedState===null&&Ii(p,v,a),Lr(v,v.return);break;case 30:break;default:Ii(p,v,a)}o=o.sibling}}function Pc(i,o){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&_r(a))}function Oc(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&_r(i))}function zn(i,o,a,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)op(i,o,a,d),o=o.sibling}function op(i,o,a,d){var p=o.flags;switch(o.tag){case 0:case 11:case 15:zn(i,o,a,d),p&2048&&Ur(9,o);break;case 1:zn(i,o,a,d);break;case 3:zn(i,o,a,d),p&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&_r(i)));break;case 12:if(p&2048){zn(i,o,a,d),i=o.stateNode;try{var v=o.memoizedProps,T=v.id,w=v.onPostCommit;typeof w=="function"&&w(T,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(A){et(o,o.return,A)}}else zn(i,o,a,d);break;case 13:zn(i,o,a,d);break;case 23:break;case 22:v=o.stateNode,T=o.alternate,o.memoizedState!==null?v._visibility&2?zn(i,o,a,d):Pr(i,o):v._visibility&2?zn(i,o,a,d):(v._visibility|=2,uo(i,o,a,d,(o.subtreeFlags&10256)!==0)),p&2048&&Pc(T,o);break;case 24:zn(i,o,a,d),p&2048&&Oc(o.alternate,o);break;default:zn(i,o,a,d)}}function uo(i,o,a,d,p){for(p=p&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var v=i,T=o,w=a,A=d,P=T.flags;switch(T.tag){case 0:case 11:case 15:uo(v,T,w,A,p),Ur(8,T);break;case 23:break;case 22:var J=T.stateNode;T.memoizedState!==null?J._visibility&2?uo(v,T,w,A,p):Pr(v,T):(J._visibility|=2,uo(v,T,w,A,p)),p&&P&2048&&Pc(T.alternate,T);break;case 24:uo(v,T,w,A,p),p&&P&2048&&Oc(T.alternate,T);break;default:uo(v,T,w,A,p)}o=o.sibling}}function Pr(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=i,d=o,p=d.flags;switch(d.tag){case 22:Pr(a,d),p&2048&&Pc(d.alternate,d);break;case 24:Pr(a,d),p&2048&&Oc(d.alternate,d);break;default:Pr(a,d)}o=o.sibling}}var Or=8192;function co(i){if(i.subtreeFlags&Or)for(i=i.child;i!==null;)rp(i),i=i.sibling}function rp(i){switch(i.tag){case 26:co(i),i.flags&Or&&i.memoizedState!==null&&X_(In,i.memoizedState,i.memoizedProps);break;case 5:co(i);break;case 3:case 4:var o=In;In=_l(i.stateNode.containerInfo),co(i),In=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=Or,Or=16777216,co(i),Or=o):co(i));break;default:co(i)}}function ap(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function jr(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var d=o[a];At=d,up(d,i)}ap(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)lp(i),i=i.sibling}function lp(i){switch(i.tag){case 0:case 11:case 15:jr(i),i.flags&2048&&ki(9,i,i.return);break;case 3:jr(i);break;case 12:jr(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,ll(i)):jr(i);break;default:jr(i)}}function ll(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var d=o[a];At=d,up(d,i)}ap(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:ki(8,o,o.return),ll(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,ll(o));break;default:ll(o)}i=i.sibling}}function up(i,o){for(;At!==null;){var a=At;switch(a.tag){case 0:case 11:case 15:ki(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var d=a.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:_r(a.memoizedState.cache)}if(d=a.child,d!==null)d.return=a,At=d;else e:for(a=i;At!==null;){d=At;var p=d.sibling,v=d.return;if(ep(d),d===a){At=null;break e}if(p!==null){p.return=v,At=p;break e}At=v}}}var h_={getCacheForType:function(i){var o=jt(Tt),a=o.data.get(i);return a===void 0&&(a=i(),o.data.set(i,a)),a}},m_=typeof WeakMap=="function"?WeakMap:Map,Ye=0,tt=null,Oe=null,$e=0,Ze=0,ln=null,Ui=!1,fo=!1,jc=!1,ui=0,ft=0,Li=0,bs=0,Vc=0,Tn=0,ho=0,Vr=null,Kt=null,qc=!1,Bc=0,ul=1/0,cl=null,Pi=null,Ut=0,Oi=null,mo=null,po=0,$c=0,zc=null,cp=null,qr=0,Gc=null;function un(){if((Ye&2)!==0&&$e!==0)return $e&-$e;if(q.T!==null){var i=to;return i!==0?i:Xc()}return ba()}function dp(){Tn===0&&(Tn=($e&536870912)===0||He?xi():536870912);var i=_n.current;return i!==null&&(i.flags|=32),Tn}function cn(i,o,a){(i===tt&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)&&(go(i,0),ji(i,$e,Tn,!1)),Be(i,a),((Ye&2)===0||i!==tt)&&(i===tt&&((Ye&2)===0&&(bs|=a),ft===4&&ji(i,$e,Tn,!1)),Gn(i))}function fp(i,o,a){if((Ye&6)!==0)throw Error(s(327));var d=!a&&(o&124)===0&&(o&i.expiredLanes)===0||jn(i,o),p=d?y_(i,o):Jc(i,o,!0),v=d;do{if(p===0){fo&&!d&&ji(i,o,0,!1);break}else{if(a=i.current.alternate,v&&!p_(a)){p=Jc(i,o,!1),v=!1;continue}if(p===2){if(v=o,i.errorRecoveryDisabledLanes&v)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){o=T;e:{var w=i;p=Vr;var A=w.current.memoizedState.isDehydrated;if(A&&(go(w,T).flags|=256),T=Jc(w,T,!1),T!==2){if(jc&&!A){w.errorRecoveryDisabledLanes|=v,bs|=v,p=4;break e}v=Kt,Kt=p,v!==null&&(Kt===null?Kt=v:Kt.push.apply(Kt,v))}p=T}if(v=!1,p!==2)continue}}if(p===1){go(i,0),ji(i,o,0,!0);break}e:{switch(d=i,v=p,v){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:ji(d,o,Tn,!Ui);break e;case 2:Kt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(p=Bc+300-kt(),10<p)){if(ji(d,o,Tn,!Ui),Nn(d,0,!0)!==0)break e;d.timeoutHandle=Bp(hp.bind(null,d,a,Kt,cl,qc,o,Tn,bs,ho,Ui,v,2,-0,0),p);break e}hp(d,a,Kt,cl,qc,o,Tn,bs,ho,Ui,v,0,-0,0)}}break}while(!0);Gn(i)}function hp(i,o,a,d,p,v,T,w,A,P,J,X,O,j){if(i.timeoutHandle=-1,X=o.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(Jr={stylesheets:null,count:0,unsuspend:K_},rp(o),X=W_(),X!==null)){i.cancelPendingCommit=X(_p.bind(null,i,o,v,a,d,p,T,w,A,J,1,O,j)),ji(i,v,T,!P);return}_p(i,o,v,a,d,p,T,w,A)}function p_(i){for(var o=i;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var d=0;d<a.length;d++){var p=a[d],v=p.getSnapshot;p=p.value;try{if(!sn(v(),p))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ji(i,o,a,d){o&=~Vc,o&=~bs,i.suspendedLanes|=o,i.pingedLanes&=~o,d&&(i.warmLanes|=o),d=i.expirationTimes;for(var p=o;0<p;){var v=31-ue(p),T=1<<v;d[v]=-1,p&=~T}a!==0&&nn(i,a,o)}function dl(){return(Ye&6)===0?(Br(0),!1):!0}function Fc(){if(Oe!==null){if(Ze===0)var i=Oe.return;else i=Oe,ti=gs=null,lc(i),ao=null,kr=0,i=Oe;for(;i!==null;)Hm(i.alternate,i),i=i.return;Oe=null}}function go(i,o){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,I_(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Fc(),tt=i,Oe=a=Wn(i.current,null),$e=o,Ze=0,ln=null,Ui=!1,fo=jn(i,o),jc=!1,ho=Tn=Vc=bs=Li=ft=0,Kt=Vr=null,qc=!1,(o&8)!==0&&(o|=o&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=o;0<d;){var p=31-ue(d),v=1<<p;o|=i[p],d&=~v}return ui=o,Ia(),a}function mp(i,o){Ue=null,q.H=Wa,o===br||o===$a?(o=kh(),Ze=3):o===Nh?(o=kh(),Ze=4):Ze=o===Dm?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ln=o,Oe===null&&(ft=1,il(i,gn(o,i.current)))}function pp(){var i=q.H;return q.H=Wa,i===null?Wa:i}function gp(){var i=q.A;return q.A=h_,i}function Hc(){ft=4,Ui||($e&4194048)!==$e&&_n.current!==null||(fo=!0),(Li&134217727)===0&&(bs&134217727)===0||tt===null||ji(tt,$e,Tn,!1)}function Jc(i,o,a){var d=Ye;Ye|=2;var p=pp(),v=gp();(tt!==i||$e!==o)&&(cl=null,go(i,o)),o=!1;var T=ft;e:do try{if(Ze!==0&&Oe!==null){var w=Oe,A=ln;switch(Ze){case 8:Fc(),T=6;break e;case 3:case 2:case 9:case 6:_n.current===null&&(o=!0);var P=Ze;if(Ze=0,ln=null,yo(i,w,A,P),a&&fo){T=0;break e}break;default:P=Ze,Ze=0,ln=null,yo(i,w,A,P)}}g_(),T=ft;break}catch(J){mp(i,J)}while(!0);return o&&i.shellSuspendCounter++,ti=gs=null,Ye=d,q.H=p,q.A=v,Oe===null&&(tt=null,$e=0,Ia()),T}function g_(){for(;Oe!==null;)yp(Oe)}function y_(i,o){var a=Ye;Ye|=2;var d=pp(),p=gp();tt!==i||$e!==o?(cl=null,ul=kt()+500,go(i,o)):fo=jn(i,o);e:do try{if(Ze!==0&&Oe!==null){o=Oe;var v=ln;t:switch(Ze){case 1:Ze=0,ln=null,yo(i,o,v,1);break;case 2:case 9:if(Mh(v)){Ze=0,ln=null,vp(o);break}o=function(){Ze!==2&&Ze!==9||tt!==i||(Ze=7),Gn(i)},v.then(o,o);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Mh(v)?(Ze=0,ln=null,vp(o)):(Ze=0,ln=null,yo(i,o,v,7));break;case 5:var T=null;switch(Oe.tag){case 26:T=Oe.memoizedState;case 5:case 27:var w=Oe;if(!T||Qp(T)){Ze=0,ln=null;var A=w.sibling;if(A!==null)Oe=A;else{var P=w.return;P!==null?(Oe=P,fl(P)):Oe=null}break t}}Ze=0,ln=null,yo(i,o,v,5);break;case 6:Ze=0,ln=null,yo(i,o,v,6);break;case 8:Fc(),ft=6;break e;default:throw Error(s(462))}}v_();break}catch(J){mp(i,J)}while(!0);return ti=gs=null,q.H=d,q.A=p,Ye=a,Oe!==null?0:(tt=null,$e=0,Ia(),ft)}function v_(){for(;Oe!==null&&!Os();)yp(Oe)}function yp(i){var o=Gm(i.alternate,i,ui);i.memoizedProps=i.pendingProps,o===null?fl(i):Oe=o}function vp(i){var o=i,a=o.alternate;switch(o.tag){case 15:case 0:o=jm(a,o,o.pendingProps,o.type,void 0,$e);break;case 11:o=jm(a,o,o.pendingProps,o.type.render,o.ref,$e);break;case 5:lc(o);default:Hm(a,o),o=Oe=xh(o,ui),o=Gm(a,o,ui)}i.memoizedProps=i.pendingProps,o===null?fl(i):Oe=o}function yo(i,o,a,d){ti=gs=null,lc(o),ao=null,kr=0;var p=o.return;try{if(a_(i,p,o,a,$e)){ft=1,il(i,gn(a,i.current)),Oe=null;return}}catch(v){if(p!==null)throw Oe=p,v;ft=1,il(i,gn(a,i.current)),Oe=null;return}o.flags&32768?(He||d===1?i=!0:fo||($e&536870912)!==0?i=!1:(Ui=i=!0,(d===2||d===9||d===3||d===6)&&(d=_n.current,d!==null&&d.tag===13&&(d.flags|=16384))),xp(o,i)):fl(o)}function fl(i){var o=i;do{if((o.flags&32768)!==0){xp(o,Ui);return}i=o.return;var a=u_(o.alternate,o,ui);if(a!==null){Oe=a;return}if(o=o.sibling,o!==null){Oe=o;return}Oe=o=i}while(o!==null);ft===0&&(ft=5)}function xp(i,o){do{var a=c_(i.alternate,i);if(a!==null){a.flags&=32767,Oe=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(i=i.sibling,i!==null)){Oe=i;return}Oe=i=a}while(i!==null);ft=6,Oe=null}function _p(i,o,a,d,p,v,T,w,A){i.cancelPendingCommit=null;do hl();while(Ut!==0);if((Ye&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(v=o.lanes|o.childLanes,v|=Ou,zt(i,a,v,T,w,A),i===tt&&(Oe=tt=null,$e=0),mo=o,Oi=i,po=a,$c=v,zc=p,cp=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,b_(An,function(){return Cp(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=q.T,q.T=null,p=$.p,$.p=2,T=Ye,Ye|=4;try{d_(i,o,a)}finally{Ye=T,$.p=p,q.T=d}}Ut=1,Tp(),bp(),wp()}}function Tp(){if(Ut===1){Ut=0;var i=Oi,o=mo,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=q.T,q.T=null;var d=$.p;$.p=2;var p=Ye;Ye|=4;try{ip(o,i);var v=od,T=uh(i.containerInfo),w=v.focusedElem,A=v.selectionRange;if(T!==w&&w&&w.ownerDocument&&lh(w.ownerDocument.documentElement,w)){if(A!==null&&Du(w)){var P=A.start,J=A.end;if(J===void 0&&(J=P),"selectionStart"in w)w.selectionStart=P,w.selectionEnd=Math.min(J,w.value.length);else{var X=w.ownerDocument||document,O=X&&X.defaultView||window;if(O.getSelection){var j=O.getSelection(),Ee=w.textContent.length,xe=Math.min(A.start,Ee),Qe=A.end===void 0?xe:Math.min(A.end,Ee);!j.extend&&xe>Qe&&(T=Qe,Qe=xe,xe=T);var I=ah(w,xe),k=ah(w,Qe);if(I&&k&&(j.rangeCount!==1||j.anchorNode!==I.node||j.anchorOffset!==I.offset||j.focusNode!==k.node||j.focusOffset!==k.offset)){var L=X.createRange();L.setStart(I.node,I.offset),j.removeAllRanges(),xe>Qe?(j.addRange(L),j.extend(k.node,k.offset)):(L.setEnd(k.node,k.offset),j.addRange(L))}}}}for(X=[],j=w;j=j.parentNode;)j.nodeType===1&&X.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<X.length;w++){var Z=X[w];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Cl=!!sd,od=sd=null}finally{Ye=p,$.p=d,q.T=a}}i.current=o,Ut=2}}function bp(){if(Ut===2){Ut=0;var i=Oi,o=mo,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=q.T,q.T=null;var d=$.p;$.p=2;var p=Ye;Ye|=4;try{Qm(i,o.alternate,o)}finally{Ye=p,$.p=d,q.T=a}}Ut=3}}function wp(){if(Ut===4||Ut===3){Ut=0,er();var i=Oi,o=mo,a=po,d=cp;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ut=5:(Ut=0,mo=Oi=null,Sp(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(Pi=null),rs(a),o=o.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(On,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=q.T,p=$.p,$.p=2,q.T=null;try{for(var v=i.onRecoverableError,T=0;T<d.length;T++){var w=d[T];v(w.value,{componentStack:w.stack})}}finally{q.T=o,$.p=p}}(po&3)!==0&&hl(),Gn(i),p=i.pendingLanes,(a&4194090)!==0&&(p&42)!==0?i===Gc?qr++:(qr=0,Gc=i):qr=0,Br(0)}}function Sp(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,_r(o)))}function hl(i){return Tp(),bp(),wp(),Cp()}function Cp(){if(Ut!==5)return!1;var i=Oi,o=$c;$c=0;var a=rs(po),d=q.T,p=$.p;try{$.p=32>a?32:a,q.T=null,a=zc,zc=null;var v=Oi,T=po;if(Ut=0,mo=Oi=null,po=0,(Ye&6)!==0)throw Error(s(331));var w=Ye;if(Ye|=4,lp(v.current),op(v,v.current,T,a),Ye=w,Br(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(On,v)}catch{}return!0}finally{$.p=p,q.T=d,Sp(i,o)}}function Ep(i,o,a){o=gn(a,o),o=bc(i.stateNode,o,2),i=Ai(i,o,2),i!==null&&(Be(i,2),Gn(i))}function et(i,o,a){if(i.tag===3)Ep(i,i,a);else for(;o!==null;){if(o.tag===3){Ep(o,i,a);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Pi===null||!Pi.has(d))){i=gn(a,i),a=Rm(2),d=Ai(o,a,2),d!==null&&(km(a,d,o,i),Be(d,2),Gn(d));break}}o=o.return}}function Yc(i,o,a){var d=i.pingCache;if(d===null){d=i.pingCache=new m_;var p=new Set;d.set(o,p)}else p=d.get(o),p===void 0&&(p=new Set,d.set(o,p));p.has(a)||(jc=!0,p.add(a),i=x_.bind(null,i,o,a),o.then(i,i))}function x_(i,o,a){var d=i.pingCache;d!==null&&d.delete(o),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,tt===i&&($e&a)===a&&(ft===4||ft===3&&($e&62914560)===$e&&300>kt()-Bc?(Ye&2)===0&&go(i,0):Vc|=a,ho===$e&&(ho=0)),Gn(i)}function Ap(i,o){o===0&&(o=tn()),i=Xs(i,o),i!==null&&(Be(i,o),Gn(i))}function __(i){var o=i.memoizedState,a=0;o!==null&&(a=o.retryLane),Ap(i,a)}function T_(i,o){var a=0;switch(i.tag){case 13:var d=i.stateNode,p=i.memoizedState;p!==null&&(a=p.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(o),Ap(i,a)}function b_(i,o){return En(i,o)}var ml=null,vo=null,Zc=!1,pl=!1,Kc=!1,ws=0;function Gn(i){i!==vo&&i.next===null&&(vo===null?ml=vo=i:vo=vo.next=i),pl=!0,Zc||(Zc=!0,S_())}function Br(i,o){if(!Kc&&pl){Kc=!0;do for(var a=!1,d=ml;d!==null;){if(i!==0){var p=d.pendingLanes;if(p===0)var v=0;else{var T=d.suspendedLanes,w=d.pingedLanes;v=(1<<31-ue(42|i)+1)-1,v&=p&~(T&~w),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,kp(d,v))}else v=$e,v=Nn(d,d===tt?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||jn(d,v)||(a=!0,kp(d,v));d=d.next}while(a);Kc=!1}}function w_(){Np()}function Np(){pl=Zc=!1;var i=0;ws!==0&&(D_()&&(i=ws),ws=0);for(var o=kt(),a=null,d=ml;d!==null;){var p=d.next,v=Mp(d,o);v===0?(d.next=null,a===null?ml=p:a.next=p,p===null&&(vo=a)):(a=d,(i!==0||(v&3)!==0)&&(pl=!0)),d=p}Br(i)}function Mp(i,o){for(var a=i.suspendedLanes,d=i.pingedLanes,p=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var T=31-ue(v),w=1<<T,A=p[T];A===-1?((w&a)===0||(w&d)!==0)&&(p[T]=Dt(w,o)):A<=o&&(i.expiredLanes|=w),v&=~w}if(o=tt,a=$e,a=Nn(i,i===o?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,a===0||i===o&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&$t(d),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||jn(i,a)){if(o=a&-a,o===i.callbackPriority)return o;switch(d!==null&&$t(d),rs(a)){case 2:case 8:a=ns;break;case 32:a=An;break;case 268435456:a=is;break;default:a=An}return d=Rp.bind(null,i),a=En(a,d),i.callbackPriority=o,i.callbackNode=a,o}return d!==null&&d!==null&&$t(d),i.callbackPriority=2,i.callbackNode=null,2}function Rp(i,o){if(Ut!==0&&Ut!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(hl()&&i.callbackNode!==a)return null;var d=$e;return d=Nn(i,i===tt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(fp(i,d,o),Mp(i,kt()),i.callbackNode!=null&&i.callbackNode===a?Rp.bind(null,i):null)}function kp(i,o){if(hl())return null;fp(i,o,!0)}function S_(){U_(function(){(Ye&6)!==0?En(Kn,w_):Np()})}function Xc(){return ws===0&&(ws=xi()),ws}function Dp(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ea(""+i)}function Ip(i,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,i.id&&a.setAttribute("form",i.id),o.parentNode.insertBefore(a,o),i=new FormData(i),a.parentNode.removeChild(a),i}function C_(i,o,a,d,p){if(o==="submit"&&a&&a.stateNode===p){var v=Dp((p[Pt]||null).action),T=d.submitter;T&&(o=(o=T[Pt]||null)?Dp(o.formAction):T.getAttribute("formAction"),o!==null&&(v=o,T=null));var w=new Ra("action","action",null,d,p);i.push({event:w,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ws!==0){var A=T?Ip(p,T):new FormData(p);yc(a,{pending:!0,data:A,method:p.method,action:v},null,A)}}else typeof v=="function"&&(w.preventDefault(),A=T?Ip(p,T):new FormData(p),yc(a,{pending:!0,data:A,method:p.method,action:v},v,A))},currentTarget:p}]})}}for(var Wc=0;Wc<Pu.length;Wc++){var Qc=Pu[Wc],E_=Qc.toLowerCase(),A_=Qc[0].toUpperCase()+Qc.slice(1);Dn(E_,"on"+A_)}Dn(fh,"onAnimationEnd"),Dn(hh,"onAnimationIteration"),Dn(mh,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(Gx,"onTransitionRun"),Dn(Fx,"onTransitionStart"),Dn(Hx,"onTransitionCancel"),Dn(ph,"onTransitionEnd"),Rn("onMouseEnter",["mouseout","mouseover"]),Rn("onMouseLeave",["mouseout","mouseover"]),Rn("onPointerEnter",["pointerout","pointerover"]),Rn("onPointerLeave",["pointerout","pointerover"]),hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($r));function Up(i,o){o=(o&4)!==0;for(var a=0;a<i.length;a++){var d=i[a],p=d.event;d=d.listeners;e:{var v=void 0;if(o)for(var T=d.length-1;0<=T;T--){var w=d[T],A=w.instance,P=w.currentTarget;if(w=w.listener,A!==v&&p.isPropagationStopped())break e;v=w,p.currentTarget=P;try{v(p)}catch(J){nl(J)}p.currentTarget=null,v=A}else for(T=0;T<d.length;T++){if(w=d[T],A=w.instance,P=w.currentTarget,w=w.listener,A!==v&&p.isPropagationStopped())break e;v=w,p.currentTarget=P;try{v(p)}catch(J){nl(J)}p.currentTarget=null,v=A}}}}function je(i,o){var a=o[ir];a===void 0&&(a=o[ir]=new Set);var d=i+"__bubble";a.has(d)||(Lp(o,i,2,!1),a.add(d))}function ed(i,o,a){var d=0;o&&(d|=4),Lp(a,i,d,o)}var gl="_reactListening"+Math.random().toString(36).slice(2);function td(i){if(!i[gl]){i[gl]=!0,js.forEach(function(a){a!=="selectionchange"&&(N_.has(a)||ed(a,!1,i),ed(a,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[gl]||(o[gl]=!0,ed("selectionchange",!1,o))}}function Lp(i,o,a,d){switch(og(o)){case 2:var p=tT;break;case 8:p=nT;break;default:p=pd}a=p.bind(null,o,a,i),p=void 0,!wu||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),d?p!==void 0?i.addEventListener(o,a,{capture:!0,passive:p}):i.addEventListener(o,a,!0):p!==void 0?i.addEventListener(o,a,{passive:p}):i.addEventListener(o,a,!1)}function nd(i,o,a,d,p){var v=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var w=d.stateNode.containerInfo;if(w===p)break;if(T===4)for(T=d.return;T!==null;){var A=T.tag;if((A===3||A===4)&&T.stateNode.containerInfo===p)return;T=T.return}for(;w!==null;){if(T=Ie(w),T===null)return;if(A=T.tag,A===5||A===6||A===26||A===27){d=v=T;continue e}w=w.parentNode}}d=d.return}$f(function(){var P=v,J=Tu(a),X=[];e:{var O=gh.get(i);if(O!==void 0){var j=Ra,Ee=i;switch(i){case"keypress":if(Na(a)===0)break e;case"keydown":case"keyup":j=bx;break;case"focusin":Ee="focus",j=Au;break;case"focusout":Ee="blur",j=Au;break;case"beforeblur":case"afterblur":j=Au;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Ff;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=cx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Cx;break;case fh:case hh:case mh:j=hx;break;case ph:j=Ax;break;case"scroll":case"scrollend":j=lx;break;case"wheel":j=Mx;break;case"copy":case"cut":case"paste":j=px;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Jf;break;case"toggle":case"beforetoggle":j=kx}var xe=(o&4)!==0,Qe=!xe&&(i==="scroll"||i==="scrollend"),I=xe?O!==null?O+"Capture":null:O;xe=[];for(var k=P,L;k!==null;){var Z=k;if(L=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||L===null||I===null||(Z=ar(k,I),Z!=null&&xe.push(zr(k,Z,L))),Qe)break;k=k.return}0<xe.length&&(O=new j(O,Ee,null,a,J),X.push({event:O,listeners:xe}))}}if((o&7)===0){e:{if(O=i==="mouseover"||i==="pointerover",j=i==="mouseout"||i==="pointerout",O&&a!==_u&&(Ee=a.relatedTarget||a.fromElement)&&(Ie(Ee)||Ee[Ti]))break e;if((j||O)&&(O=J.window===J?J:(O=J.ownerDocument)?O.defaultView||O.parentWindow:window,j?(Ee=a.relatedTarget||a.toElement,j=P,Ee=Ee?Ie(Ee):null,Ee!==null&&(Qe=l(Ee),xe=Ee.tag,Ee!==Qe||xe!==5&&xe!==27&&xe!==6)&&(Ee=null)):(j=null,Ee=P),j!==Ee)){if(xe=Ff,Z="onMouseLeave",I="onMouseEnter",k="mouse",(i==="pointerout"||i==="pointerover")&&(xe=Jf,Z="onPointerLeave",I="onPointerEnter",k="pointer"),Qe=j==null?O:Ot(j),L=Ee==null?O:Ot(Ee),O=new xe(Z,k+"leave",j,a,J),O.target=Qe,O.relatedTarget=L,Z=null,Ie(J)===P&&(xe=new xe(I,k+"enter",Ee,a,J),xe.target=L,xe.relatedTarget=Qe,Z=xe),Qe=Z,j&&Ee)t:{for(xe=j,I=Ee,k=0,L=xe;L;L=xo(L))k++;for(L=0,Z=I;Z;Z=xo(Z))L++;for(;0<k-L;)xe=xo(xe),k--;for(;0<L-k;)I=xo(I),L--;for(;k--;){if(xe===I||I!==null&&xe===I.alternate)break t;xe=xo(xe),I=xo(I)}xe=null}else xe=null;j!==null&&Pp(X,O,j,xe,!1),Ee!==null&&Qe!==null&&Pp(X,Qe,Ee,xe,!0)}}e:{if(O=P?Ot(P):window,j=O.nodeName&&O.nodeName.toLowerCase(),j==="select"||j==="input"&&O.type==="file")var fe=th;else if(Qf(O))if(nh)fe=Bx;else{fe=Vx;var Pe=jx}else j=O.nodeName,!j||j.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?P&&xu(P.elementType)&&(fe=th):fe=qx;if(fe&&(fe=fe(i,P))){eh(X,fe,a,J);break e}Pe&&Pe(i,O,P),i==="focusout"&&P&&O.type==="number"&&P.memoizedProps.value!=null&&vu(O,"number",O.value)}switch(Pe=P?Ot(P):window,i){case"focusin":(Qf(Pe)||Pe.contentEditable==="true")&&(Ys=Pe,Iu=P,pr=null);break;case"focusout":pr=Iu=Ys=null;break;case"mousedown":Uu=!0;break;case"contextmenu":case"mouseup":case"dragend":Uu=!1,ch(X,a,J);break;case"selectionchange":if(zx)break;case"keydown":case"keyup":ch(X,a,J)}var ge;if(Mu)e:{switch(i){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Js?Xf(i,a)&&(be="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(Yf&&a.locale!=="ko"&&(Js||be!=="onCompositionStart"?be==="onCompositionEnd"&&Js&&(ge=zf()):(wi=J,Su="value"in wi?wi.value:wi.textContent,Js=!0)),Pe=yl(P,be),0<Pe.length&&(be=new Hf(be,i,null,a,J),X.push({event:be,listeners:Pe}),ge?be.data=ge:(ge=Wf(a),ge!==null&&(be.data=ge)))),(ge=Ix?Ux(i,a):Lx(i,a))&&(be=yl(P,"onBeforeInput"),0<be.length&&(Pe=new Hf("onBeforeInput","beforeinput",null,a,J),X.push({event:Pe,listeners:be}),Pe.data=ge)),C_(X,i,P,a,J)}Up(X,o)})}function zr(i,o,a){return{instance:i,listener:o,currentTarget:a}}function yl(i,o){for(var a=o+"Capture",d=[];i!==null;){var p=i,v=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||v===null||(p=ar(i,a),p!=null&&d.unshift(zr(i,p,v)),p=ar(i,o),p!=null&&d.push(zr(i,p,v))),i.tag===3)return d;i=i.return}return[]}function xo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Pp(i,o,a,d,p){for(var v=o._reactName,T=[];a!==null&&a!==d;){var w=a,A=w.alternate,P=w.stateNode;if(w=w.tag,A!==null&&A===d)break;w!==5&&w!==26&&w!==27||P===null||(A=P,p?(P=ar(a,v),P!=null&&T.unshift(zr(a,P,A))):p||(P=ar(a,v),P!=null&&T.push(zr(a,P,A)))),a=a.return}T.length!==0&&i.push({event:o,listeners:T})}var M_=/\r\n?/g,R_=/\u0000|\uFFFD/g;function Op(i){return(typeof i=="string"?i:""+i).replace(M_,`
`).replace(R_,"")}function jp(i,o){return o=Op(o),Op(i)===o}function vl(){}function We(i,o,a,d,p,v){switch(a){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||Gs(i,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&Gs(i,""+d);break;case"className":Bs(i,"class",d);break;case"tabIndex":Bs(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Bs(i,a,d);break;case"style":qf(i,d,v);break;case"data":if(o!=="object"){Bs(i,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||a!=="href")){i.removeAttribute(a);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(a);break}d=Ea(""+d),i.setAttribute(a,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(o!=="input"&&We(i,o,"name",p.name,p,null),We(i,o,"formEncType",p.formEncType,p,null),We(i,o,"formMethod",p.formMethod,p,null),We(i,o,"formTarget",p.formTarget,p,null)):(We(i,o,"encType",p.encType,p,null),We(i,o,"method",p.method,p,null),We(i,o,"target",p.target,p,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(a);break}d=Ea(""+d),i.setAttribute(a,d);break;case"onClick":d!=null&&(i.onclick=vl);break;case"onScroll":d!=null&&je("scroll",i);break;case"onScrollEnd":d!=null&&je("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(a=d.__html,a!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}a=Ea(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(a,""+d):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":d===!0?i.setAttribute(a,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(a,d):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(a,d):i.removeAttribute(a);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(a):i.setAttribute(a,d);break;case"popover":je("beforetoggle",i),je("toggle",i),qs(i,"popover",d);break;case"xlinkActuate":kn(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":kn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":kn(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":kn(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":kn(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":kn(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":kn(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":kn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":kn(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":qs(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=rx.get(a)||a,qs(i,a,d))}}function id(i,o,a,d,p,v){switch(a){case"style":qf(i,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(a=d.__html,a!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof d=="string"?Gs(i,d):(typeof d=="number"||typeof d=="bigint")&&Gs(i,""+d);break;case"onScroll":d!=null&&je("scroll",i);break;case"onScrollEnd":d!=null&&je("scrollend",i);break;case"onClick":d!=null&&(i.onclick=vl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!as.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(p=a.endsWith("Capture"),o=a.slice(2,p?a.length-7:void 0),v=i[Pt]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(o,v,p),typeof d=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(o,d,p);break e}a in i?i[a]=d:d===!0?i.setAttribute(a,""):qs(i,a,d)}}}function Lt(i,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",i),je("load",i);var d=!1,p=!1,v;for(v in a)if(a.hasOwnProperty(v)){var T=a[v];if(T!=null)switch(v){case"src":d=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:We(i,o,v,T,a,null)}}p&&We(i,o,"srcSet",a.srcSet,a,null),d&&We(i,o,"src",a.src,a,null);return;case"input":je("invalid",i);var w=v=T=p=null,A=null,P=null;for(d in a)if(a.hasOwnProperty(d)){var J=a[d];if(J!=null)switch(d){case"name":p=J;break;case"type":T=J;break;case"checked":A=J;break;case"defaultChecked":P=J;break;case"value":v=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,o));break;default:We(i,o,d,J,a,null)}}Pf(i,v,w,A,P,T,p,!1),Sa(i);return;case"select":je("invalid",i),d=T=v=null;for(p in a)if(a.hasOwnProperty(p)&&(w=a[p],w!=null))switch(p){case"value":v=w;break;case"defaultValue":T=w;break;case"multiple":d=w;default:We(i,o,p,w,a,null)}o=v,a=T,i.multiple=!!d,o!=null?zs(i,!!d,o,!1):a!=null&&zs(i,!!d,a,!0);return;case"textarea":je("invalid",i),v=p=d=null;for(T in a)if(a.hasOwnProperty(T)&&(w=a[T],w!=null))switch(T){case"value":d=w;break;case"defaultValue":p=w;break;case"children":v=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:We(i,o,T,w,a,null)}jf(i,d,p,v),Sa(i);return;case"option":for(A in a)if(a.hasOwnProperty(A)&&(d=a[A],d!=null))switch(A){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:We(i,o,A,d,a,null)}return;case"dialog":je("beforetoggle",i),je("toggle",i),je("cancel",i),je("close",i);break;case"iframe":case"object":je("load",i);break;case"video":case"audio":for(d=0;d<$r.length;d++)je($r[d],i);break;case"image":je("error",i),je("load",i);break;case"details":je("toggle",i);break;case"embed":case"source":case"link":je("error",i),je("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in a)if(a.hasOwnProperty(P)&&(d=a[P],d!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:We(i,o,P,d,a,null)}return;default:if(xu(o)){for(J in a)a.hasOwnProperty(J)&&(d=a[J],d!==void 0&&id(i,o,J,d,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(d=a[w],d!=null&&We(i,o,w,d,a,null))}function k_(i,o,a,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,v=null,T=null,w=null,A=null,P=null,J=null;for(j in a){var X=a[j];if(a.hasOwnProperty(j)&&X!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":A=X;default:d.hasOwnProperty(j)||We(i,o,j,null,d,X)}}for(var O in d){var j=d[O];if(X=a[O],d.hasOwnProperty(O)&&(j!=null||X!=null))switch(O){case"type":v=j;break;case"name":p=j;break;case"checked":P=j;break;case"defaultChecked":J=j;break;case"value":T=j;break;case"defaultValue":w=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,o));break;default:j!==X&&We(i,o,O,j,d,X)}}yu(i,T,w,A,P,J,v,p);return;case"select":j=T=w=O=null;for(v in a)if(A=a[v],a.hasOwnProperty(v)&&A!=null)switch(v){case"value":break;case"multiple":j=A;default:d.hasOwnProperty(v)||We(i,o,v,null,d,A)}for(p in d)if(v=d[p],A=a[p],d.hasOwnProperty(p)&&(v!=null||A!=null))switch(p){case"value":O=v;break;case"defaultValue":w=v;break;case"multiple":T=v;default:v!==A&&We(i,o,p,v,d,A)}o=w,a=T,d=j,O!=null?zs(i,!!a,O,!1):!!d!=!!a&&(o!=null?zs(i,!!a,o,!0):zs(i,!!a,a?[]:"",!1));return;case"textarea":j=O=null;for(w in a)if(p=a[w],a.hasOwnProperty(w)&&p!=null&&!d.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:We(i,o,w,null,d,p)}for(T in d)if(p=d[T],v=a[T],d.hasOwnProperty(T)&&(p!=null||v!=null))switch(T){case"value":O=p;break;case"defaultValue":j=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==v&&We(i,o,T,p,d,v)}Of(i,O,j);return;case"option":for(var Ee in a)if(O=a[Ee],a.hasOwnProperty(Ee)&&O!=null&&!d.hasOwnProperty(Ee))switch(Ee){case"selected":i.selected=!1;break;default:We(i,o,Ee,null,d,O)}for(A in d)if(O=d[A],j=a[A],d.hasOwnProperty(A)&&O!==j&&(O!=null||j!=null))switch(A){case"selected":i.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:We(i,o,A,O,d,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in a)O=a[xe],a.hasOwnProperty(xe)&&O!=null&&!d.hasOwnProperty(xe)&&We(i,o,xe,null,d,O);for(P in d)if(O=d[P],j=a[P],d.hasOwnProperty(P)&&O!==j&&(O!=null||j!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(s(137,o));break;default:We(i,o,P,O,d,j)}return;default:if(xu(o)){for(var Qe in a)O=a[Qe],a.hasOwnProperty(Qe)&&O!==void 0&&!d.hasOwnProperty(Qe)&&id(i,o,Qe,void 0,d,O);for(J in d)O=d[J],j=a[J],!d.hasOwnProperty(J)||O===j||O===void 0&&j===void 0||id(i,o,J,O,d,j);return}}for(var I in a)O=a[I],a.hasOwnProperty(I)&&O!=null&&!d.hasOwnProperty(I)&&We(i,o,I,null,d,O);for(X in d)O=d[X],j=a[X],!d.hasOwnProperty(X)||O===j||O==null&&j==null||We(i,o,X,O,d,j)}var sd=null,od=null;function xl(i){return i.nodeType===9?i:i.ownerDocument}function Vp(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qp(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function rd(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ad=null;function D_(){var i=window.event;return i&&i.type==="popstate"?i===ad?!1:(ad=i,!0):(ad=null,!1)}var Bp=typeof setTimeout=="function"?setTimeout:void 0,I_=typeof clearTimeout=="function"?clearTimeout:void 0,$p=typeof Promise=="function"?Promise:void 0,U_=typeof queueMicrotask=="function"?queueMicrotask:typeof $p<"u"?function(i){return $p.resolve(null).then(i).catch(L_)}:Bp;function L_(i){setTimeout(function(){throw i})}function Vi(i){return i==="head"}function zp(i,o){var a=o,d=0,p=0;do{var v=a.nextSibling;if(i.removeChild(a),v&&v.nodeType===8)if(a=v.data,a==="/$"){if(0<d&&8>d){a=d;var T=i.ownerDocument;if(a&1&&Gr(T.documentElement),a&2&&Gr(T.body),a&4)for(a=T.head,Gr(a),T=a.firstChild;T;){var w=T.nextSibling,A=T.nodeName;T[te]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=w}}if(p===0){i.removeChild(v),Wr(o);return}p--}else a==="$"||a==="$?"||a==="$!"?p++:d=a.charCodeAt(0)-48;else d=0;a=v}while(a);Wr(o)}function ld(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ld(a),we(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function P_(i,o,a,d){for(;i.nodeType===1;){var p=a;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[te])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var v=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Un(i.nextSibling),i===null)break}return null}function O_(i,o,a){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Un(i.nextSibling),i===null))return null;return i}function ud(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function j_(i,o){var a=i.ownerDocument;if(i.data!=="$?"||a.readyState==="complete")o();else{var d=function(){o(),a.removeEventListener("DOMContentLoaded",d)};a.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function Un(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var cd=null;function Gp(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(o===0)return i;o--}else a==="/$"&&o++}i=i.previousSibling}return null}function Fp(i,o,a){switch(o=xl(a),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Gr(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);we(i)}var bn=new Map,Hp=new Set;function _l(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ci=$.d;$.d={f:V_,r:q_,D:B_,C:$_,L:z_,m:G_,X:H_,S:F_,M:J_};function V_(){var i=ci.f(),o=dl();return i||o}function q_(i){var o=ct(i);o!==null&&o.tag===5&&o.type==="form"?fm(o):ci.r(i)}var _o=typeof document>"u"?null:document;function Jp(i,o,a){var d=_o;if(d&&typeof o=="string"&&o){var p=pn(o);p='link[rel="'+i+'"][href="'+p+'"]',typeof a=="string"&&(p+='[crossorigin="'+a+'"]'),Hp.has(p)||(Hp.add(p),i={rel:i,crossOrigin:a,href:o},d.querySelector(p)===null&&(o=d.createElement("link"),Lt(o,"link",i),st(o),d.head.appendChild(o)))}}function B_(i){ci.D(i),Jp("dns-prefetch",i,null)}function $_(i,o){ci.C(i,o),Jp("preconnect",i,o)}function z_(i,o,a){ci.L(i,o,a);var d=_o;if(d&&i&&o){var p='link[rel="preload"][as="'+pn(o)+'"]';o==="image"&&a&&a.imageSrcSet?(p+='[imagesrcset="'+pn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(p+='[imagesizes="'+pn(a.imageSizes)+'"]')):p+='[href="'+pn(i)+'"]';var v=p;switch(o){case"style":v=To(i);break;case"script":v=bo(i)}bn.has(v)||(i=x({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:i,as:o},a),bn.set(v,i),d.querySelector(p)!==null||o==="style"&&d.querySelector(Fr(v))||o==="script"&&d.querySelector(Hr(v))||(o=d.createElement("link"),Lt(o,"link",i),st(o),d.head.appendChild(o)))}}function G_(i,o){ci.m(i,o);var a=_o;if(a&&i){var d=o&&typeof o.as=="string"?o.as:"script",p='link[rel="modulepreload"][as="'+pn(d)+'"][href="'+pn(i)+'"]',v=p;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=bo(i)}if(!bn.has(v)&&(i=x({rel:"modulepreload",href:i},o),bn.set(v,i),a.querySelector(p)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Hr(v)))return}d=a.createElement("link"),Lt(d,"link",i),st(d),a.head.appendChild(d)}}}function F_(i,o,a){ci.S(i,o,a);var d=_o;if(d&&i){var p=Ct(d).hoistableStyles,v=To(i);o=o||"default";var T=p.get(v);if(!T){var w={loading:0,preload:null};if(T=d.querySelector(Fr(v)))w.loading=5;else{i=x({rel:"stylesheet",href:i,"data-precedence":o},a),(a=bn.get(v))&&dd(i,a);var A=T=d.createElement("link");st(A),Lt(A,"link",i),A._p=new Promise(function(P,J){A.onload=P,A.onerror=J}),A.addEventListener("load",function(){w.loading|=1}),A.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Tl(T,o,d)}T={type:"stylesheet",instance:T,count:1,state:w},p.set(v,T)}}}function H_(i,o){ci.X(i,o);var a=_o;if(a&&i){var d=Ct(a).hoistableScripts,p=bo(i),v=d.get(p);v||(v=a.querySelector(Hr(p)),v||(i=x({src:i,async:!0},o),(o=bn.get(p))&&fd(i,o),v=a.createElement("script"),st(v),Lt(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(p,v))}}function J_(i,o){ci.M(i,o);var a=_o;if(a&&i){var d=Ct(a).hoistableScripts,p=bo(i),v=d.get(p);v||(v=a.querySelector(Hr(p)),v||(i=x({src:i,async:!0,type:"module"},o),(o=bn.get(p))&&fd(i,o),v=a.createElement("script"),st(v),Lt(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(p,v))}}function Yp(i,o,a,d){var p=(p=de.current)?_l(p):null;if(!p)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=To(a.href),a=Ct(p).hoistableStyles,d=a.get(o),d||(d={type:"style",instance:null,count:0,state:null},a.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=To(a.href);var v=Ct(p).hoistableStyles,T=v.get(i);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,T),(v=p.querySelector(Fr(i)))&&!v._p&&(T.instance=v,T.state.loading=5),bn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},bn.set(i,a),v||Y_(p,i,a,T.state))),o&&d===null)throw Error(s(528,""));return T}if(o&&d!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=bo(a),a=Ct(p).hoistableScripts,d=a.get(o),d||(d={type:"script",instance:null,count:0,state:null},a.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function To(i){return'href="'+pn(i)+'"'}function Fr(i){return'link[rel="stylesheet"]['+i+"]"}function Zp(i){return x({},i,{"data-precedence":i.precedence,precedence:null})}function Y_(i,o,a,d){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=i.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),Lt(o,"link",a),st(o),i.head.appendChild(o))}function bo(i){return'[src="'+pn(i)+'"]'}function Hr(i){return"script[async]"+i}function Kp(i,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var d=i.querySelector('style[data-href~="'+pn(a.href)+'"]');if(d)return o.instance=d,st(d),d;var p=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),st(d),Lt(d,"style",p),Tl(d,a.precedence,i),o.instance=d;case"stylesheet":p=To(a.href);var v=i.querySelector(Fr(p));if(v)return o.state.loading|=4,o.instance=v,st(v),v;d=Zp(a),(p=bn.get(p))&&dd(d,p),v=(i.ownerDocument||i).createElement("link"),st(v);var T=v;return T._p=new Promise(function(w,A){T.onload=w,T.onerror=A}),Lt(v,"link",d),o.state.loading|=4,Tl(v,a.precedence,i),o.instance=v;case"script":return v=bo(a.src),(p=i.querySelector(Hr(v)))?(o.instance=p,st(p),p):(d=a,(p=bn.get(v))&&(d=x({},a),fd(d,p)),i=i.ownerDocument||i,p=i.createElement("script"),st(p),Lt(p,"link",d),i.head.appendChild(p),o.instance=p);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,Tl(d,a.precedence,i));return o.instance}function Tl(i,o,a){for(var d=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=d.length?d[d.length-1]:null,v=p,T=0;T<d.length;T++){var w=d[T];if(w.dataset.precedence===o)v=w;else if(v!==p)break}v?v.parentNode.insertBefore(i,v.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(i,o.firstChild))}function dd(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function fd(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var bl=null;function Xp(i,o,a){if(bl===null){var d=new Map,p=bl=new Map;p.set(a,d)}else p=bl,d=p.get(a),d||(d=new Map,p.set(a,d));if(d.has(i))return d;for(d.set(i,null),a=a.getElementsByTagName(i),p=0;p<a.length;p++){var v=a[p];if(!(v[te]||v[St]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var T=v.getAttribute(o)||"";T=i+T;var w=d.get(T);w?w.push(v):d.set(T,[v])}}return d}function Wp(i,o,a){i=i.ownerDocument||i,i.head.insertBefore(a,o==="title"?i.querySelector("head > title"):null)}function Z_(i,o,a){if(a===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Qp(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Jr=null;function K_(){}function X_(i,o,a){if(Jr===null)throw Error(s(475));var d=Jr;if(o.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=To(a.href),v=i.querySelector(Fr(p));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(d.count++,d=wl.bind(d),i.then(d,d)),o.state.loading|=4,o.instance=v,st(v);return}v=i.ownerDocument||i,a=Zp(a),(p=bn.get(p))&&dd(a,p),v=v.createElement("link"),st(v);var T=v;T._p=new Promise(function(w,A){T.onload=w,T.onerror=A}),Lt(v,"link",a),o.instance=v}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(d.count++,o=wl.bind(d),i.addEventListener("load",o),i.addEventListener("error",o))}}function W_(){if(Jr===null)throw Error(s(475));var i=Jr;return i.stylesheets&&i.count===0&&hd(i,i.stylesheets),0<i.count?function(o){var a=setTimeout(function(){if(i.stylesheets&&hd(i,i.stylesheets),i.unsuspend){var d=i.unsuspend;i.unsuspend=null,d()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(a)}}:null}function wl(){if(this.count--,this.count===0){if(this.stylesheets)hd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Sl=null;function hd(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Sl=new Map,o.forEach(Q_,i),Sl=null,wl.call(i))}function Q_(i,o){if(!(o.state.loading&4)){var a=Sl.get(i);if(a)var d=a.get(null);else{a=new Map,Sl.set(i,a);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<p.length;v++){var T=p[v];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),d=T)}d&&a.set(null,d)}p=o.instance,T=p.getAttribute("data-precedence"),v=a.get(T)||d,v===d&&a.set(null,p),a.set(T,p),this.count++,d=wl.bind(this),p.addEventListener("load",d),p.addEventListener("error",d),v?v.parentNode.insertBefore(p,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),o.state.loading|=4}}var Yr={$$typeof:U,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function eT(i,o,a,d,p,v,T,w){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.hiddenUpdates=_i(null),this.identifierPrefix=d,this.onUncaughtError=p,this.onCaughtError=v,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function eg(i,o,a,d,p,v,T,w,A,P,J,X){return i=new eT(i,o,a,T,w,A,P,X),o=1,v===!0&&(o|=24),v=on(3,null,null,o),i.current=v,v.stateNode=i,o=Yu(),o.refCount++,i.pooledCache=o,o.refCount++,v.memoizedState={element:d,isDehydrated:a,cache:o},Wu(v),i}function tg(i){return i?(i=Ws,i):Ws}function ng(i,o,a,d,p,v){p=tg(p),d.context===null?d.context=p:d.pendingContext=p,d=Ei(o),d.payload={element:a},v=v===void 0?null:v,v!==null&&(d.callback=v),a=Ai(i,d,o),a!==null&&(cn(a,i,o),Sr(a,i,o))}function ig(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<o?a:o}}function md(i,o){ig(i,o),(i=i.alternate)&&ig(i,o)}function sg(i){if(i.tag===13){var o=Xs(i,67108864);o!==null&&cn(o,i,67108864),md(i,67108864)}}var Cl=!0;function tT(i,o,a,d){var p=q.T;q.T=null;var v=$.p;try{$.p=2,pd(i,o,a,d)}finally{$.p=v,q.T=p}}function nT(i,o,a,d){var p=q.T;q.T=null;var v=$.p;try{$.p=8,pd(i,o,a,d)}finally{$.p=v,q.T=p}}function pd(i,o,a,d){if(Cl){var p=gd(d);if(p===null)nd(i,o,d,El,a),rg(i,d);else if(sT(p,i,o,a,d))d.stopPropagation();else if(rg(i,d),o&4&&-1<iT.indexOf(i)){for(;p!==null;){var v=ct(p);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var T=fn(v.pendingLanes);if(T!==0){var w=v;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var A=1<<31-ue(T);w.entanglements[1]|=A,T&=~A}Gn(v),(Ye&6)===0&&(ul=kt()+500,Br(0))}}break;case 13:w=Xs(v,2),w!==null&&cn(w,v,2),dl(),md(v,2)}if(v=gd(d),v===null&&nd(i,o,d,El,a),v===p)break;p=v}p!==null&&d.stopPropagation()}else nd(i,o,d,null,a)}}function gd(i){return i=Tu(i),yd(i)}var El=null;function yd(i){if(El=null,i=Ie(i),i!==null){var o=l(i);if(o===null)i=null;else{var a=o.tag;if(a===13){if(i=f(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return El=i,null}function og(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ts()){case Kn:return 2;case ns:return 8;case An:case tr:return 32;case is:return 268435456;default:return 32}default:return 32}}var vd=!1,qi=null,Bi=null,$i=null,Zr=new Map,Kr=new Map,zi=[],iT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rg(i,o){switch(i){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":Zr.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kr.delete(o.pointerId)}}function Xr(i,o,a,d,p,v){return i===null||i.nativeEvent!==v?(i={blockedOn:o,domEventName:a,eventSystemFlags:d,nativeEvent:v,targetContainers:[p]},o!==null&&(o=ct(o),o!==null&&sg(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function sT(i,o,a,d,p){switch(o){case"focusin":return qi=Xr(qi,i,o,a,d,p),!0;case"dragenter":return Bi=Xr(Bi,i,o,a,d,p),!0;case"mouseover":return $i=Xr($i,i,o,a,d,p),!0;case"pointerover":var v=p.pointerId;return Zr.set(v,Xr(Zr.get(v)||null,i,o,a,d,p)),!0;case"gotpointercapture":return v=p.pointerId,Kr.set(v,Xr(Kr.get(v)||null,i,o,a,d,p)),!0}return!1}function ag(i){var o=Ie(i.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=f(a),o!==null){i.blockedOn=o,du(i.priority,function(){if(a.tag===13){var d=un();d=os(d);var p=Xs(a,d);p!==null&&cn(p,a,d),md(a,d)}});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Al(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var a=gd(i.nativeEvent);if(a===null){a=i.nativeEvent;var d=new a.constructor(a.type,a);_u=d,a.target.dispatchEvent(d),_u=null}else return o=ct(a),o!==null&&sg(o),i.blockedOn=a,!1;o.shift()}return!0}function lg(i,o,a){Al(i)&&a.delete(o)}function oT(){vd=!1,qi!==null&&Al(qi)&&(qi=null),Bi!==null&&Al(Bi)&&(Bi=null),$i!==null&&Al($i)&&($i=null),Zr.forEach(lg),Kr.forEach(lg)}function Nl(i,o){i.blockedOn===o&&(i.blockedOn=null,vd||(vd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,oT)))}var Ml=null;function ug(i){Ml!==i&&(Ml=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ml===i&&(Ml=null);for(var o=0;o<i.length;o+=3){var a=i[o],d=i[o+1],p=i[o+2];if(typeof d!="function"){if(yd(d||a)===null)continue;break}var v=ct(a);v!==null&&(i.splice(o,3),o-=3,yc(v,{pending:!0,data:p,method:a.method,action:d},d,p))}}))}function Wr(i){function o(A){return Nl(A,i)}qi!==null&&Nl(qi,i),Bi!==null&&Nl(Bi,i),$i!==null&&Nl($i,i),Zr.forEach(o),Kr.forEach(o);for(var a=0;a<zi.length;a++){var d=zi[a];d.blockedOn===i&&(d.blockedOn=null)}for(;0<zi.length&&(a=zi[0],a.blockedOn===null);)ag(a),a.blockedOn===null&&zi.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(d=0;d<a.length;d+=3){var p=a[d],v=a[d+1],T=p[Pt]||null;if(typeof v=="function")T||ug(a);else if(T){var w=null;if(v&&v.hasAttribute("formAction")){if(p=v,T=v[Pt]||null)w=T.formAction;else if(yd(p)!==null)continue}else w=T.action;typeof w=="function"?a[d+1]=w:(a.splice(d,3),d-=3),ug(a)}}}function xd(i){this._internalRoot=i}Rl.prototype.render=xd.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,d=un();ng(a,d,i,o,null,null)},Rl.prototype.unmount=xd.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;ng(i.current,2,null,i,null,null),dl(),o[Ti]=null}};function Rl(i){this._internalRoot=i}Rl.prototype.unstable_scheduleHydration=function(i){if(i){var o=ba();i={blockedOn:null,target:i,priority:o};for(var a=0;a<zi.length&&o!==0&&o<zi[a].priority;a++);zi.splice(a,0,i),a===0&&ag(i)}};var cg=e.version;if(cg!=="19.1.0")throw Error(s(527,cg,"19.1.0"));$.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=g(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var rT={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kl.isDisabled&&kl.supportsFiber)try{On=kl.inject(rT),wt=kl}catch{}}return ea.createRoot=function(i,o){if(!r(i))throw Error(s(299));var a=!1,d="",p=Em,v=Am,T=Nm,w=null;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(w=o.unstable_transitionCallbacks)),o=eg(i,1,!1,null,null,a,d,p,v,T,w,null),i[Ti]=o.current,td(i),new xd(o)},ea.hydrateRoot=function(i,o,a){if(!r(i))throw Error(s(299));var d=!1,p="",v=Em,T=Am,w=Nm,A=null,P=null;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(A=a.unstable_transitionCallbacks),a.formState!==void 0&&(P=a.formState)),o=eg(i,1,!0,o,a??null,d,p,v,T,w,A,P),o.context=tg(null),a=o.current,d=un(),d=os(d),p=Ei(d),p.callback=null,Ai(a,p,d),a=d,o.current.lanes=a,Be(o,a),Gn(o),i[Ti]=o.current,td(i),new Rl(o)},ea.version="19.1.0",ea}var _g;function yT(){if(_g)return bd.exports;_g=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),bd.exports=gT(),bd.exports}var vT=yT();const xT=hf(vT);var Gl=(t=>(t.NOT_STARTED="Not Started",t.IN_PROGRESS="In Progress",t.COMPLETED="Completed",t))(Gl||{}),Ld=(t=>(t.PENDING="pending",t.ACHIEVED="achieved",t.MISSED="missed",t))(Ld||{}),Le=(t=>(t.NOT_STARTED="Not Started",t.IN_PROGRESS="In Progress",t.COMPLETED="Completed",t.BLOCKED="Blocked",t))(Le||{}),Wt=(t=>(t.INPUT_FORM="input",t.PROJECT_FLOW="flow",t.TASK_DETAIL="task-detail",t))(Wt||{}),Ge;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const l={};for(const f of r)l[f]=f;return l},t.getValidEnumValues=r=>{const l=t.objectKeys(r).filter(h=>typeof r[r[h]]!="number"),f={};for(const h of l)f[h]=r[h];return t.objectValues(f)},t.objectValues=r=>t.objectKeys(r).map(function(l){return r[l]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const l=[];for(const f in r)Object.prototype.hasOwnProperty.call(r,f)&&l.push(f);return l},t.find=(r,l)=>{for(const f of r)if(l(f))return f},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function s(r,l=" | "){return r.map(f=>typeof f=="string"?`'${f}'`:f).join(l)}t.joinValues=s,t.jsonStringifyReplacer=(r,l)=>typeof l=="bigint"?l.toString():l})(Ge||(Ge={}));var Tg;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Tg||(Tg={}));const he=Ge.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Hi=t=>{switch(typeof t){case"undefined":return he.undefined;case"string":return he.string;case"number":return Number.isNaN(t)?he.nan:he.number;case"boolean":return he.boolean;case"function":return he.function;case"bigint":return he.bigint;case"symbol":return he.symbol;case"object":return Array.isArray(t)?he.array:t===null?he.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?he.promise:typeof Map<"u"&&t instanceof Map?he.map:typeof Set<"u"&&t instanceof Set?he.set:typeof Date<"u"&&t instanceof Date?he.date:he.object;default:return he.unknown}},ie=Ge.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class mi extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(l){return l.message},s={_errors:[]},r=l=>{for(const f of l.issues)if(f.code==="invalid_union")f.unionErrors.map(r);else if(f.code==="invalid_return_type")r(f.returnTypeError);else if(f.code==="invalid_arguments")r(f.argumentsError);else if(f.path.length===0)s._errors.push(n(f));else{let h=s,g=0;for(;g<f.path.length;){const m=f.path[g];g===f.path.length-1?(h[m]=h[m]||{_errors:[]},h[m]._errors.push(n(f))):h[m]=h[m]||{_errors:[]},h=h[m],g++}}};return r(this),s}static assert(e){if(!(e instanceof mi))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ge.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},s=[];for(const r of this.issues)if(r.path.length>0){const l=r.path[0];n[l]=n[l]||[],n[l].push(e(r))}else s.push(e(r));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}mi.create=t=>new mi(t);const Pd=(t,e)=>{let n;switch(t.code){case ie.invalid_type:t.received===he.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ie.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ge.jsonStringifyReplacer)}`;break;case ie.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ge.joinValues(t.keys,", ")}`;break;case ie.invalid_union:n="Invalid input";break;case ie.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ge.joinValues(t.options)}`;break;case ie.invalid_enum_value:n=`Invalid enum value. Expected ${Ge.joinValues(t.options)}, received '${t.received}'`;break;case ie.invalid_arguments:n="Invalid function arguments";break;case ie.invalid_return_type:n="Invalid function return type";break;case ie.invalid_date:n="Invalid date";break;case ie.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ge.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ie.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ie.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ie.custom:n="Invalid input";break;case ie.invalid_intersection_types:n="Intersection results could not be merged";break;case ie.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ie.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ge.assertNever(t)}return{message:n}};let _T=Pd;function TT(){return _T}const bT=t=>{const{data:e,path:n,errorMaps:s,issueData:r}=t,l=[...n,...r.path||[]],f={...r,path:l};if(r.message!==void 0)return{...r,path:l,message:r.message};let h="";const g=s.filter(m=>!!m).slice().reverse();for(const m of g)h=m(f,{data:e,defaultError:h}).message;return{...r,path:l,message:h}};function ce(t,e){const n=TT(),s=bT({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Pd?void 0:Pd].filter(r=>!!r)});t.common.issues.push(s)}class Ft{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const s=[];for(const r of n){if(r.status==="aborted")return Ne;r.status==="dirty"&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,n){const s=[];for(const r of n){const l=await r.key,f=await r.value;s.push({key:l,value:f})}return Ft.mergeObjectSync(e,s)}static mergeObjectSync(e,n){const s={};for(const r of n){const{key:l,value:f}=r;if(l.status==="aborted"||f.status==="aborted")return Ne;l.status==="dirty"&&e.dirty(),f.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof f.value<"u"||r.alwaysSet)&&(s[l.value]=f.value)}return{status:e.value,value:s}}}const Ne=Object.freeze({status:"aborted"}),sa=t=>({status:"dirty",value:t}),Sn=t=>({status:"valid",value:t}),bg=t=>t.status==="aborted",wg=t=>t.status==="dirty",Bo=t=>t.status==="valid",Fl=t=>typeof Promise<"u"&&t instanceof Promise;var me;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(me||(me={}));class Yn{constructor(e,n,s,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=s,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Sg=(t,e)=>{if(Bo(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new mi(t.common.issues);return this._error=n,this._error}}};function De(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:s,description:r}=t;if(e&&(n||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(f,h)=>{const{message:g}=t;return f.code==="invalid_enum_value"?{message:g??h.defaultError}:typeof h.data>"u"?{message:g??s??h.defaultError}:f.code!=="invalid_type"?{message:h.defaultError}:{message:g??n??h.defaultError}},description:r}}class qe{get description(){return this._def.description}_getType(e){return Hi(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Hi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ft,ctx:{common:e.parent.common,data:e.data,parsedType:Hi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Fl(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const s=this.safeParse(e,n);if(s.success)return s.data;throw s.error}safeParse(e,n){const s={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Hi(e)},r=this._parseSync({data:e,path:s.path,parent:s});return Sg(s,r)}"~validate"(e){var s,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Hi(e)};if(!this["~standard"].async)try{const l=this._parseSync({data:e,path:[],parent:n});return Bo(l)?{value:l.value}:{issues:n.common.issues}}catch(l){(r=(s=l==null?void 0:l.message)==null?void 0:s.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(l=>Bo(l)?{value:l.value}:{issues:n.common.issues})}async parseAsync(e,n){const s=await this.safeParseAsync(e,n);if(s.success)return s.data;throw s.error}async safeParseAsync(e,n){const s={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Hi(e)},r=this._parse({data:e,path:s.path,parent:s}),l=await(Fl(r)?r:Promise.resolve(r));return Sg(s,l)}refine(e,n){const s=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,l)=>{const f=e(r),h=()=>l.addIssue({code:ie.custom,...s(r)});return typeof Promise<"u"&&f instanceof Promise?f.then(g=>g?!0:(h(),!1)):f?!0:(h(),!1)})}refinement(e,n){return this._refinement((s,r)=>e(s)?!0:(r.addIssue(typeof n=="function"?n(s,r):n),!1))}_refinement(e){return new Go({schema:this,typeName:Ae.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ki.create(this,this._def)}nullable(){return Fo.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Jn.create(this)}promise(){return Kl.create(this,this._def)}or(e){return Jl.create([this,e],this._def)}and(e){return Yl.create(this,e,this._def)}transform(e){return new Go({...De(this._def),schema:this,typeName:Ae.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new qd({...De(this._def),innerType:this,defaultValue:n,typeName:Ae.ZodDefault})}brand(){return new FT({typeName:Ae.ZodBranded,type:this,...De(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Bd({...De(this._def),innerType:this,catchValue:n,typeName:Ae.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return pf.create(this,e)}readonly(){return $d.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const wT=/^c[^\s-]{8,}$/i,ST=/^[0-9a-z]+$/,CT=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ET=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,AT=/^[a-z0-9_-]{21}$/i,NT=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,MT=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,RT=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,kT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ed;const DT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,IT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,UT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,LT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,PT=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,OT=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,qy="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",jT=new RegExp(`^${qy}$`);function By(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function VT(t){return new RegExp(`^${By(t)}$`)}function qT(t){let e=`${qy}T${By(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function BT(t,e){return!!((e==="v4"||!e)&&DT.test(t)||(e==="v6"||!e)&&UT.test(t))}function $T(t,e){if(!NT.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const s=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(s));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function zT(t,e){return!!((e==="v4"||!e)&&IT.test(t)||(e==="v6"||!e)&&LT.test(t))}class Fn extends qe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==he.string){const l=this._getOrReturnCtx(e);return ce(l,{code:ie.invalid_type,expected:he.string,received:l.parsedType}),Ne}const s=new Ft;let r;for(const l of this._def.checks)if(l.kind==="min")e.data.length<l.value&&(r=this._getOrReturnCtx(e,r),ce(r,{code:ie.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),s.dirty());else if(l.kind==="max")e.data.length>l.value&&(r=this._getOrReturnCtx(e,r),ce(r,{code:ie.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),s.dirty());else if(l.kind==="length"){const f=e.data.length>l.value,h=e.data.length<l.value;(f||h)&&(r=this._getOrReturnCtx(e,r),f?ce(r,{code:ie.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):h&&ce(r,{code:ie.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),s.dirty())}else if(l.kind==="email")RT.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"email",code:ie.invalid_string,message:l.message}),s.dirty());else if(l.kind==="emoji")Ed||(Ed=new RegExp(kT,"u")),Ed.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"emoji",code:ie.invalid_string,message:l.message}),s.dirty());else if(l.kind==="uuid")ET.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"uuid",code:ie.invalid_string,message:l.message}),s.dirty());else if(l.kind==="nanoid")AT.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"nanoid",code:ie.invalid_string,message:l.message}),s.dirty());else if(l.kind==="cuid")wT.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"cuid",code:ie.invalid_string,message:l.message}),s.dirty());else if(l.kind==="cuid2")ST.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"cuid2",code:ie.invalid_string,message:l.message}),s.dirty());else if(l.kind==="ulid")CT.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"ulid",code:ie.invalid_string,message:l.message}),s.dirty());else if(l.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),ce(r,{validation:"url",code:ie.invalid_string,message:l.message}),s.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"regex",code:ie.invalid_string,message:l.message}),s.dirty())):l.kind==="trim"?e.data=e.data.trim():l.kind==="includes"?e.data.includes(l.value,l.position)||(r=this._getOrReturnCtx(e,r),ce(r,{code:ie.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),s.dirty()):l.kind==="toLowerCase"?e.data=e.data.toLowerCase():l.kind==="toUpperCase"?e.data=e.data.toUpperCase():l.kind==="startsWith"?e.data.startsWith(l.value)||(r=this._getOrReturnCtx(e,r),ce(r,{code:ie.invalid_string,validation:{startsWith:l.value},message:l.message}),s.dirty()):l.kind==="endsWith"?e.data.endsWith(l.value)||(r=this._getOrReturnCtx(e,r),ce(r,{code:ie.invalid_string,validation:{endsWith:l.value},message:l.message}),s.dirty()):l.kind==="datetime"?qT(l).test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{code:ie.invalid_string,validation:"datetime",message:l.message}),s.dirty()):l.kind==="date"?jT.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{code:ie.invalid_string,validation:"date",message:l.message}),s.dirty()):l.kind==="time"?VT(l).test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{code:ie.invalid_string,validation:"time",message:l.message}),s.dirty()):l.kind==="duration"?MT.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"duration",code:ie.invalid_string,message:l.message}),s.dirty()):l.kind==="ip"?BT(e.data,l.version)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"ip",code:ie.invalid_string,message:l.message}),s.dirty()):l.kind==="jwt"?$T(e.data,l.alg)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"jwt",code:ie.invalid_string,message:l.message}),s.dirty()):l.kind==="cidr"?zT(e.data,l.version)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"cidr",code:ie.invalid_string,message:l.message}),s.dirty()):l.kind==="base64"?PT.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"base64",code:ie.invalid_string,message:l.message}),s.dirty()):l.kind==="base64url"?OT.test(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{validation:"base64url",code:ie.invalid_string,message:l.message}),s.dirty()):Ge.assertNever(l);return{status:s.value,value:e.data}}_regex(e,n,s){return this.refinement(r=>e.test(r),{validation:n,code:ie.invalid_string,...me.errToObj(s)})}_addCheck(e){return new Fn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...me.errToObj(e)})}url(e){return this._addCheck({kind:"url",...me.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...me.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...me.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...me.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...me.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...me.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...me.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...me.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...me.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...me.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...me.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...me.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...me.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...me.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...me.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...me.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...me.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...me.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...me.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...me.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...me.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...me.errToObj(n)})}nonempty(e){return this.min(1,me.errToObj(e))}trim(){return new Fn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Fn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Fn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Fn.create=t=>new Fn({checks:[],typeName:Ae.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...De(t)});function GT(t,e){const n=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=n>s?n:s,l=Number.parseInt(t.toFixed(r).replace(".","")),f=Number.parseInt(e.toFixed(r).replace(".",""));return l%f/10**r}class ks extends qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==he.number){const l=this._getOrReturnCtx(e);return ce(l,{code:ie.invalid_type,expected:he.number,received:l.parsedType}),Ne}let s;const r=new Ft;for(const l of this._def.checks)l.kind==="int"?Ge.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{code:ie.invalid_type,expected:"integer",received:"float",message:l.message}),r.dirty()):l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(s=this._getOrReturnCtx(e,s),ce(s,{code:ie.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),r.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(s=this._getOrReturnCtx(e,s),ce(s,{code:ie.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),r.dirty()):l.kind==="multipleOf"?GT(e.data,l.value)!==0&&(s=this._getOrReturnCtx(e,s),ce(s,{code:ie.not_multiple_of,multipleOf:l.value,message:l.message}),r.dirty()):l.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{code:ie.not_finite,message:l.message}),r.dirty()):Ge.assertNever(l);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,me.toString(n))}gt(e,n){return this.setLimit("min",e,!1,me.toString(n))}lte(e,n){return this.setLimit("max",e,!0,me.toString(n))}lt(e,n){return this.setLimit("max",e,!1,me.toString(n))}setLimit(e,n,s,r){return new ks({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:me.toString(r)}]})}_addCheck(e){return new ks({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:me.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:me.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:me.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:me.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:me.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:me.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ge.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ks.create=t=>new ks({checks:[],typeName:Ae.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...De(t)});class Ds extends qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==he.bigint)return this._getInvalidInput(e);let s;const r=new Ft;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(s=this._getOrReturnCtx(e,s),ce(s,{code:ie.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),r.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(s=this._getOrReturnCtx(e,s),ce(s,{code:ie.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),r.dirty()):l.kind==="multipleOf"?e.data%l.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),ce(s,{code:ie.not_multiple_of,multipleOf:l.value,message:l.message}),r.dirty()):Ge.assertNever(l);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ce(n,{code:ie.invalid_type,expected:he.bigint,received:n.parsedType}),Ne}gte(e,n){return this.setLimit("min",e,!0,me.toString(n))}gt(e,n){return this.setLimit("min",e,!1,me.toString(n))}lte(e,n){return this.setLimit("max",e,!0,me.toString(n))}lt(e,n){return this.setLimit("max",e,!1,me.toString(n))}setLimit(e,n,s,r){return new Ds({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:me.toString(r)}]})}_addCheck(e){return new Ds({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:me.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:me.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ds.create=t=>new Ds({checks:[],typeName:Ae.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...De(t)});class Hl extends qe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==he.boolean){const s=this._getOrReturnCtx(e);return ce(s,{code:ie.invalid_type,expected:he.boolean,received:s.parsedType}),Ne}return Sn(e.data)}}Hl.create=t=>new Hl({typeName:Ae.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...De(t)});class $o extends qe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==he.date){const l=this._getOrReturnCtx(e);return ce(l,{code:ie.invalid_type,expected:he.date,received:l.parsedType}),Ne}if(Number.isNaN(e.data.getTime())){const l=this._getOrReturnCtx(e);return ce(l,{code:ie.invalid_date}),Ne}const s=new Ft;let r;for(const l of this._def.checks)l.kind==="min"?e.data.getTime()<l.value&&(r=this._getOrReturnCtx(e,r),ce(r,{code:ie.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),s.dirty()):l.kind==="max"?e.data.getTime()>l.value&&(r=this._getOrReturnCtx(e,r),ce(r,{code:ie.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),s.dirty()):Ge.assertNever(l);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new $o({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:me.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:me.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}$o.create=t=>new $o({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ae.ZodDate,...De(t)});class Cg extends qe{_parse(e){if(this._getType(e)!==he.symbol){const s=this._getOrReturnCtx(e);return ce(s,{code:ie.invalid_type,expected:he.symbol,received:s.parsedType}),Ne}return Sn(e.data)}}Cg.create=t=>new Cg({typeName:Ae.ZodSymbol,...De(t)});class Eg extends qe{_parse(e){if(this._getType(e)!==he.undefined){const s=this._getOrReturnCtx(e);return ce(s,{code:ie.invalid_type,expected:he.undefined,received:s.parsedType}),Ne}return Sn(e.data)}}Eg.create=t=>new Eg({typeName:Ae.ZodUndefined,...De(t)});class Ag extends qe{_parse(e){if(this._getType(e)!==he.null){const s=this._getOrReturnCtx(e);return ce(s,{code:ie.invalid_type,expected:he.null,received:s.parsedType}),Ne}return Sn(e.data)}}Ag.create=t=>new Ag({typeName:Ae.ZodNull,...De(t)});class Ng extends qe{constructor(){super(...arguments),this._any=!0}_parse(e){return Sn(e.data)}}Ng.create=t=>new Ng({typeName:Ae.ZodAny,...De(t)});class Od extends qe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Sn(e.data)}}Od.create=t=>new Od({typeName:Ae.ZodUnknown,...De(t)});class Wi extends qe{_parse(e){const n=this._getOrReturnCtx(e);return ce(n,{code:ie.invalid_type,expected:he.never,received:n.parsedType}),Ne}}Wi.create=t=>new Wi({typeName:Ae.ZodNever,...De(t)});class Mg extends qe{_parse(e){if(this._getType(e)!==he.undefined){const s=this._getOrReturnCtx(e);return ce(s,{code:ie.invalid_type,expected:he.void,received:s.parsedType}),Ne}return Sn(e.data)}}Mg.create=t=>new Mg({typeName:Ae.ZodVoid,...De(t)});class Jn extends qe{_parse(e){const{ctx:n,status:s}=this._processInputParams(e),r=this._def;if(n.parsedType!==he.array)return ce(n,{code:ie.invalid_type,expected:he.array,received:n.parsedType}),Ne;if(r.exactLength!==null){const f=n.data.length>r.exactLength.value,h=n.data.length<r.exactLength.value;(f||h)&&(ce(n,{code:f?ie.too_big:ie.too_small,minimum:h?r.exactLength.value:void 0,maximum:f?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(ce(n,{code:ie.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(ce(n,{code:ie.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((f,h)=>r.type._parseAsync(new Yn(n,f,n.path,h)))).then(f=>Ft.mergeArray(s,f));const l=[...n.data].map((f,h)=>r.type._parseSync(new Yn(n,f,n.path,h)));return Ft.mergeArray(s,l)}get element(){return this._def.type}min(e,n){return new Jn({...this._def,minLength:{value:e,message:me.toString(n)}})}max(e,n){return new Jn({...this._def,maxLength:{value:e,message:me.toString(n)}})}length(e,n){return new Jn({...this._def,exactLength:{value:e,message:me.toString(n)}})}nonempty(e){return this.min(1,e)}}Jn.create=(t,e)=>new Jn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ae.ZodArray,...De(e)});function Lo(t){if(t instanceof _t){const e={};for(const n in t.shape){const s=t.shape[n];e[n]=Ki.create(Lo(s))}return new _t({...t._def,shape:()=>e})}else return t instanceof Jn?new Jn({...t._def,type:Lo(t.element)}):t instanceof Ki?Ki.create(Lo(t.unwrap())):t instanceof Fo?Fo.create(Lo(t.unwrap())):t instanceof Is?Is.create(t.items.map(e=>Lo(e))):t}class _t extends qe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ge.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==he.object){const m=this._getOrReturnCtx(e);return ce(m,{code:ie.invalid_type,expected:he.object,received:m.parsedType}),Ne}const{status:s,ctx:r}=this._processInputParams(e),{shape:l,keys:f}=this._getCached(),h=[];if(!(this._def.catchall instanceof Wi&&this._def.unknownKeys==="strip"))for(const m in r.data)f.includes(m)||h.push(m);const g=[];for(const m of f){const x=l[m],_=r.data[m];g.push({key:{status:"valid",value:m},value:x._parse(new Yn(r,_,r.path,m)),alwaysSet:m in r.data})}if(this._def.catchall instanceof Wi){const m=this._def.unknownKeys;if(m==="passthrough")for(const x of h)g.push({key:{status:"valid",value:x},value:{status:"valid",value:r.data[x]}});else if(m==="strict")h.length>0&&(ce(r,{code:ie.unrecognized_keys,keys:h}),s.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const x of h){const _=r.data[x];g.push({key:{status:"valid",value:x},value:m._parse(new Yn(r,_,r.path,x)),alwaysSet:x in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const m=[];for(const x of g){const _=await x.key,b=await x.value;m.push({key:_,value:b,alwaysSet:x.alwaysSet})}return m}).then(m=>Ft.mergeObjectSync(s,m)):Ft.mergeObjectSync(s,g)}get shape(){return this._def.shape()}strict(e){return me.errToObj,new _t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,s)=>{var l,f;const r=((f=(l=this._def).errorMap)==null?void 0:f.call(l,n,s).message)??s.defaultError;return n.code==="unrecognized_keys"?{message:me.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new _t({...this._def,unknownKeys:"strip"})}passthrough(){return new _t({...this._def,unknownKeys:"passthrough"})}extend(e){return new _t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new _t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ae.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new _t({...this._def,catchall:e})}pick(e){const n={};for(const s of Ge.objectKeys(e))e[s]&&this.shape[s]&&(n[s]=this.shape[s]);return new _t({...this._def,shape:()=>n})}omit(e){const n={};for(const s of Ge.objectKeys(this.shape))e[s]||(n[s]=this.shape[s]);return new _t({...this._def,shape:()=>n})}deepPartial(){return Lo(this)}partial(e){const n={};for(const s of Ge.objectKeys(this.shape)){const r=this.shape[s];e&&!e[s]?n[s]=r:n[s]=r.optional()}return new _t({...this._def,shape:()=>n})}required(e){const n={};for(const s of Ge.objectKeys(this.shape))if(e&&!e[s])n[s]=this.shape[s];else{let l=this.shape[s];for(;l instanceof Ki;)l=l._def.innerType;n[s]=l}return new _t({...this._def,shape:()=>n})}keyof(){return $y(Ge.objectKeys(this.shape))}}_t.create=(t,e)=>new _t({shape:()=>t,unknownKeys:"strip",catchall:Wi.create(),typeName:Ae.ZodObject,...De(e)});_t.strictCreate=(t,e)=>new _t({shape:()=>t,unknownKeys:"strict",catchall:Wi.create(),typeName:Ae.ZodObject,...De(e)});_t.lazycreate=(t,e)=>new _t({shape:t,unknownKeys:"strip",catchall:Wi.create(),typeName:Ae.ZodObject,...De(e)});class Jl extends qe{_parse(e){const{ctx:n}=this._processInputParams(e),s=this._def.options;function r(l){for(const h of l)if(h.result.status==="valid")return h.result;for(const h of l)if(h.result.status==="dirty")return n.common.issues.push(...h.ctx.common.issues),h.result;const f=l.map(h=>new mi(h.ctx.common.issues));return ce(n,{code:ie.invalid_union,unionErrors:f}),Ne}if(n.common.async)return Promise.all(s.map(async l=>{const f={...n,common:{...n.common,issues:[]},parent:null};return{result:await l._parseAsync({data:n.data,path:n.path,parent:f}),ctx:f}})).then(r);{let l;const f=[];for(const g of s){const m={...n,common:{...n.common,issues:[]},parent:null},x=g._parseSync({data:n.data,path:n.path,parent:m});if(x.status==="valid")return x;x.status==="dirty"&&!l&&(l={result:x,ctx:m}),m.common.issues.length&&f.push(m.common.issues)}if(l)return n.common.issues.push(...l.ctx.common.issues),l.result;const h=f.map(g=>new mi(g));return ce(n,{code:ie.invalid_union,unionErrors:h}),Ne}}get options(){return this._def.options}}Jl.create=(t,e)=>new Jl({options:t,typeName:Ae.ZodUnion,...De(e)});function jd(t,e){const n=Hi(t),s=Hi(e);if(t===e)return{valid:!0,data:t};if(n===he.object&&s===he.object){const r=Ge.objectKeys(e),l=Ge.objectKeys(t).filter(h=>r.indexOf(h)!==-1),f={...t,...e};for(const h of l){const g=jd(t[h],e[h]);if(!g.valid)return{valid:!1};f[h]=g.data}return{valid:!0,data:f}}else if(n===he.array&&s===he.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let l=0;l<t.length;l++){const f=t[l],h=e[l],g=jd(f,h);if(!g.valid)return{valid:!1};r.push(g.data)}return{valid:!0,data:r}}else return n===he.date&&s===he.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Yl extends qe{_parse(e){const{status:n,ctx:s}=this._processInputParams(e),r=(l,f)=>{if(bg(l)||bg(f))return Ne;const h=jd(l.value,f.value);return h.valid?((wg(l)||wg(f))&&n.dirty(),{status:n.value,value:h.data}):(ce(s,{code:ie.invalid_intersection_types}),Ne)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([l,f])=>r(l,f)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}Yl.create=(t,e,n)=>new Yl({left:t,right:e,typeName:Ae.ZodIntersection,...De(n)});class Is extends qe{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==he.array)return ce(s,{code:ie.invalid_type,expected:he.array,received:s.parsedType}),Ne;if(s.data.length<this._def.items.length)return ce(s,{code:ie.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ne;!this._def.rest&&s.data.length>this._def.items.length&&(ce(s,{code:ie.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const l=[...s.data].map((f,h)=>{const g=this._def.items[h]||this._def.rest;return g?g._parse(new Yn(s,f,s.path,h)):null}).filter(f=>!!f);return s.common.async?Promise.all(l).then(f=>Ft.mergeArray(n,f)):Ft.mergeArray(n,l)}get items(){return this._def.items}rest(e){return new Is({...this._def,rest:e})}}Is.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Is({items:t,typeName:Ae.ZodTuple,rest:null,...De(e)})};class Zl extends qe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==he.object)return ce(s,{code:ie.invalid_type,expected:he.object,received:s.parsedType}),Ne;const r=[],l=this._def.keyType,f=this._def.valueType;for(const h in s.data)r.push({key:l._parse(new Yn(s,h,s.path,h)),value:f._parse(new Yn(s,s.data[h],s.path,h)),alwaysSet:h in s.data});return s.common.async?Ft.mergeObjectAsync(n,r):Ft.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,s){return n instanceof qe?new Zl({keyType:e,valueType:n,typeName:Ae.ZodRecord,...De(s)}):new Zl({keyType:Fn.create(),valueType:e,typeName:Ae.ZodRecord,...De(n)})}}class Rg extends qe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==he.map)return ce(s,{code:ie.invalid_type,expected:he.map,received:s.parsedType}),Ne;const r=this._def.keyType,l=this._def.valueType,f=[...s.data.entries()].map(([h,g],m)=>({key:r._parse(new Yn(s,h,s.path,[m,"key"])),value:l._parse(new Yn(s,g,s.path,[m,"value"]))}));if(s.common.async){const h=new Map;return Promise.resolve().then(async()=>{for(const g of f){const m=await g.key,x=await g.value;if(m.status==="aborted"||x.status==="aborted")return Ne;(m.status==="dirty"||x.status==="dirty")&&n.dirty(),h.set(m.value,x.value)}return{status:n.value,value:h}})}else{const h=new Map;for(const g of f){const m=g.key,x=g.value;if(m.status==="aborted"||x.status==="aborted")return Ne;(m.status==="dirty"||x.status==="dirty")&&n.dirty(),h.set(m.value,x.value)}return{status:n.value,value:h}}}}Rg.create=(t,e,n)=>new Rg({valueType:e,keyType:t,typeName:Ae.ZodMap,...De(n)});class ma extends qe{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==he.set)return ce(s,{code:ie.invalid_type,expected:he.set,received:s.parsedType}),Ne;const r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(ce(s,{code:ie.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(ce(s,{code:ie.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const l=this._def.valueType;function f(g){const m=new Set;for(const x of g){if(x.status==="aborted")return Ne;x.status==="dirty"&&n.dirty(),m.add(x.value)}return{status:n.value,value:m}}const h=[...s.data.values()].map((g,m)=>l._parse(new Yn(s,g,s.path,m)));return s.common.async?Promise.all(h).then(g=>f(g)):f(h)}min(e,n){return new ma({...this._def,minSize:{value:e,message:me.toString(n)}})}max(e,n){return new ma({...this._def,maxSize:{value:e,message:me.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ma.create=(t,e)=>new ma({valueType:t,minSize:null,maxSize:null,typeName:Ae.ZodSet,...De(e)});class Vd extends qe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Vd.create=(t,e)=>new Vd({getter:t,typeName:Ae.ZodLazy,...De(e)});class kg extends qe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ce(n,{received:n.data,code:ie.invalid_literal,expected:this._def.value}),Ne}return{status:"valid",value:e.data}}get value(){return this._def.value}}kg.create=(t,e)=>new kg({value:t,typeName:Ae.ZodLiteral,...De(e)});function $y(t,e){return new zo({values:t,typeName:Ae.ZodEnum,...De(e)})}class zo extends qe{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),s=this._def.values;return ce(n,{expected:Ge.joinValues(s),received:n.parsedType,code:ie.invalid_type}),Ne}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),s=this._def.values;return ce(n,{received:n.data,code:ie.invalid_enum_value,options:s}),Ne}return Sn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return zo.create(e,{...this._def,...n})}exclude(e,n=this._def){return zo.create(this.options.filter(s=>!e.includes(s)),{...this._def,...n})}}zo.create=$y;class Dg extends qe{_parse(e){const n=Ge.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==he.string&&s.parsedType!==he.number){const r=Ge.objectValues(n);return ce(s,{expected:Ge.joinValues(r),received:s.parsedType,code:ie.invalid_type}),Ne}if(this._cache||(this._cache=new Set(Ge.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=Ge.objectValues(n);return ce(s,{received:s.data,code:ie.invalid_enum_value,options:r}),Ne}return Sn(e.data)}get enum(){return this._def.values}}Dg.create=(t,e)=>new Dg({values:t,typeName:Ae.ZodNativeEnum,...De(e)});class Kl extends qe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==he.promise&&n.common.async===!1)return ce(n,{code:ie.invalid_type,expected:he.promise,received:n.parsedType}),Ne;const s=n.parsedType===he.promise?n.data:Promise.resolve(n.data);return Sn(s.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Kl.create=(t,e)=>new Kl({type:t,typeName:Ae.ZodPromise,...De(e)});class Go extends qe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ae.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:s}=this._processInputParams(e),r=this._def.effect||null,l={addIssue:f=>{ce(s,f),f.fatal?n.abort():n.dirty()},get path(){return s.path}};if(l.addIssue=l.addIssue.bind(l),r.type==="preprocess"){const f=r.transform(s.data,l);if(s.common.async)return Promise.resolve(f).then(async h=>{if(n.value==="aborted")return Ne;const g=await this._def.schema._parseAsync({data:h,path:s.path,parent:s});return g.status==="aborted"?Ne:g.status==="dirty"||n.value==="dirty"?sa(g.value):g});{if(n.value==="aborted")return Ne;const h=this._def.schema._parseSync({data:f,path:s.path,parent:s});return h.status==="aborted"?Ne:h.status==="dirty"||n.value==="dirty"?sa(h.value):h}}if(r.type==="refinement"){const f=h=>{const g=r.refinement(h,l);if(s.common.async)return Promise.resolve(g);if(g instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return h};if(s.common.async===!1){const h=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return h.status==="aborted"?Ne:(h.status==="dirty"&&n.dirty(),f(h.value),{status:n.value,value:h.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(h=>h.status==="aborted"?Ne:(h.status==="dirty"&&n.dirty(),f(h.value).then(()=>({status:n.value,value:h.value}))))}if(r.type==="transform")if(s.common.async===!1){const f=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Bo(f))return Ne;const h=r.transform(f.value,l);if(h instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:h}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(f=>Bo(f)?Promise.resolve(r.transform(f.value,l)).then(h=>({status:n.value,value:h})):Ne);Ge.assertNever(r)}}Go.create=(t,e,n)=>new Go({schema:t,typeName:Ae.ZodEffects,effect:e,...De(n)});Go.createWithPreprocess=(t,e,n)=>new Go({schema:e,effect:{type:"preprocess",transform:t},typeName:Ae.ZodEffects,...De(n)});class Ki extends qe{_parse(e){return this._getType(e)===he.undefined?Sn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ki.create=(t,e)=>new Ki({innerType:t,typeName:Ae.ZodOptional,...De(e)});class Fo extends qe{_parse(e){return this._getType(e)===he.null?Sn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Fo.create=(t,e)=>new Fo({innerType:t,typeName:Ae.ZodNullable,...De(e)});class qd extends qe{_parse(e){const{ctx:n}=this._processInputParams(e);let s=n.data;return n.parsedType===he.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}qd.create=(t,e)=>new qd({innerType:t,typeName:Ae.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...De(e)});class Bd extends qe{_parse(e){const{ctx:n}=this._processInputParams(e),s={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Fl(r)?r.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new mi(s.common.issues)},input:s.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new mi(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Bd.create=(t,e)=>new Bd({innerType:t,typeName:Ae.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...De(e)});class Ig extends qe{_parse(e){if(this._getType(e)!==he.nan){const s=this._getOrReturnCtx(e);return ce(s,{code:ie.invalid_type,expected:he.nan,received:s.parsedType}),Ne}return{status:"valid",value:e.data}}}Ig.create=t=>new Ig({typeName:Ae.ZodNaN,...De(t)});class FT extends qe{_parse(e){const{ctx:n}=this._processInputParams(e),s=n.data;return this._def.type._parse({data:s,path:n.path,parent:n})}unwrap(){return this._def.type}}class pf extends qe{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const l=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?Ne:l.status==="dirty"?(n.dirty(),sa(l.value)):this._def.out._parseAsync({data:l.value,path:s.path,parent:s})})();{const r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?Ne:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(e,n){return new pf({in:e,out:n,typeName:Ae.ZodPipeline})}}class $d extends qe{_parse(e){const n=this._def.innerType._parse(e),s=r=>(Bo(r)&&(r.value=Object.freeze(r.value)),r);return Fl(n)?n.then(r=>s(r)):s(n)}unwrap(){return this._def.innerType}}$d.create=(t,e)=>new $d({innerType:t,typeName:Ae.ZodReadonly,...De(e)});var Ae;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ae||(Ae={}));const Ss=Fn.create,Ug=ks.create;Ds.create;const HT=Hl.create;$o.create;const Lg=Od.create;Wi.create;const oa=Jn.create,JT=_t.create,YT=Jl.create;Yl.create;Is.create;const ZT=Zl.create,KT=Vd.create,XT=zo.create;Kl.create;Ki.create;Fo.create;const wo={string:t=>Fn.create({...t,coerce:!0}),number:t=>ks.create({...t,coerce:!0}),boolean:t=>Hl.create({...t,coerce:!0}),bigint:t=>Ds.create({...t,coerce:!0}),date:t=>$o.create({...t,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let WT,QT;function eb(){return{geminiUrl:WT,vertexUrl:QT}}function tb(t,e,n){var s,r,l;if(!(!((s=t.httpOptions)===null||s===void 0)&&s.baseUrl)){const f=eb();return t.vertexai?(r=f.vertexUrl)!==null&&r!==void 0?r:e:(l=f.geminiUrl)!==null&&l!==void 0?l:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ls{}function pe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function c(t,e,n){for(let l=0;l<e.length-1;l++){const f=e[l];if(f.endsWith("[]")){const h=f.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${f}`);if(Array.isArray(t[h])){const g=t[h];if(Array.isArray(n))for(let m=0;m<g.length;m++){const x=g[m];c(x,e.slice(l+1),n[m])}else for(const m of g)c(m,e.slice(l+1),n)}return}else if(f.endsWith("[0]")){const h=f.slice(0,-3);h in t||(t[h]=[{}]);const g=t[h];c(g[0],e.slice(l+1),n);return}(!t[f]||typeof t[f]!="object")&&(t[f]={}),t=t[f]}const s=e[e.length-1],r=t[s];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else t[s]=n}function u(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const s=e[n];if(s.endsWith("[]")){const r=s.slice(0,-2);if(r in t){const l=t[r];return Array.isArray(l)?l.map(f=>u(f,e.slice(n+1))):void 0}else return}else t=t[s]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Pg;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Pg||(Pg={}));var Og;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Og||(Og={}));var Hn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Hn||(Hn={}));var jg;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(jg||(jg={}));var Vg;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Vg||(Vg={}));var qg;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(qg||(qg={}));var Bg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Bg||(Bg={}));var $g;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})($g||($g={}));var zg;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(zg||(zg={}));var Gg;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Gg||(Gg={}));var Fg;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(Fg||(Fg={}));var Hg;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Hg||(Hg={}));var Jg;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Jg||(Jg={}));var Yg;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Yg||(Yg={}));var Zg;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(Zg||(Zg={}));var Kg;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Kg||(Kg={}));var Xl;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Xl||(Xl={}));var Xg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Xg||(Xg={}));var zd;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zd||(zd={}));var Wg;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Wg||(Wg={}));var Qg;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Qg||(Qg={}));var e0;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(e0||(e0={}));var t0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(t0||(t0={}));var n0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(n0||(n0={}));var i0;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(i0||(i0={}));var s0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(s0||(s0={}));var o0;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(o0||(o0={}));var r0;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(r0||(r0={}));var a0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(a0||(a0={}));var l0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(l0||(l0={}));var u0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(u0||(u0={}));var c0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(c0||(c0={}));var d0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(d0||(d0={}));var f0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(f0||(f0={}));var h0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(h0||(h0={}));var m0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(m0||(m0={}));var p0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(p0||(p0={}));var g0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(g0||(g0={}));var y0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(y0||(y0={}));var v0;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(v0||(v0={}));var x0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(x0||(x0={}));var Oo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Oo||(Oo={}));class Gd{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ta{get text(){var e,n,s,r,l,f,h,g;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",x=!1;const _=[];for(const b of(g=(h=(f=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||f===void 0?void 0:f.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[C,E]of Object.entries(b))C!=="text"&&C!=="thought"&&(E!==null||E!==void 0)&&_.push(C);if(typeof b.text=="string"){if(typeof b.thought=="boolean"&&b.thought)continue;x=!0,m+=b.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?m:void 0}get data(){var e,n,s,r,l,f,h,g;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const x=[];for(const _ of(g=(h=(f=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||f===void 0?void 0:f.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[b,C]of Object.entries(_))b!=="inlineData"&&(C!==null||C!==void 0)&&x.push(b);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,n,s,r,l,f,h,g;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(h=(f=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||f===void 0?void 0:f.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,n,s,r,l,f,h,g,m;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(g=(h=(f=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||f===void 0?void 0:f.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((x==null?void 0:x.length)!==0)return(m=x==null?void 0:x[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,n,s,r,l,f,h,g,m;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(g=(h=(f=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||f===void 0?void 0:f.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((x==null?void 0:x.length)!==0)return(m=x==null?void 0:x[0])===null||m===void 0?void 0:m.output}}class _0{}class T0{}class nb{}class ib{}class b0{}class w0{}class S0{}class sb{}class C0{}class E0{}class A0{}class ob{}class rb{}class ab{}class N0{}class lb{get text(){var e,n,s;let r="",l=!1;const f=[];for(const h of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&m!==null&&f.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,r+=h.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,n,s;let r="";const l=[];for(const f of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[h,g]of Object.entries(f))h!=="inlineData"&&g!==null&&l.push(h);f.inlineData&&typeof f.inlineData.data=="string"&&(r+=atob(f.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class ub{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ke(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function zy(t,e){const n=Ke(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Gy(t){return Array.isArray(t)?t.map(e=>Wl(e)):[Wl(t)]}function Wl(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Fy(t){const e=Wl(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Hy(t){const e=Wl(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function M0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Jy(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>M0(e)):[M0(t)]}function Fd(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function R0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function k0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Bt(t){if(t==null)throw new Error("ContentUnion is required");return Fd(t)?t:{role:"user",parts:Jy(t)}}function Yy(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=Bt(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=Bt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Bt(n)):[Bt(e)]}function wn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(R0(t)||k0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Bt(t)]}const e=[],n=[],s=Fd(t[0]);for(const r of t){const l=Fd(r);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(R0(r)||k0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return s||e.push({role:"user",parts:Jy(n)}),e}const cb=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),D0=XT(["string","number","integer","object","array","boolean","null"]),db=YT([D0,oa(D0)]);function fb(t=!0){const e=KT(()=>{const n=JT({type:db.optional(),format:Ss().optional(),title:Ss().optional(),description:Ss().optional(),default:Lg().optional(),items:e.optional(),minItems:wo.string().optional(),maxItems:wo.string().optional(),enum:oa(Lg()).optional(),properties:ZT(Ss(),e).optional(),required:oa(Ss()).optional(),minProperties:wo.string().optional(),maxProperties:wo.string().optional(),propertyOrdering:oa(Ss()).optional(),minimum:Ug().optional(),maximum:Ug().optional(),minLength:wo.string().optional(),maxLength:wo.string().optional(),pattern:Ss().optional(),anyOf:oa(e).optional(),additionalProperties:HT().optional()});return t?n.strict():n});return e}function hb(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(Hn).includes(n[0].toUpperCase())?n[0].toUpperCase():Hn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(Hn).includes(s.toUpperCase())?s.toUpperCase():Hn.TYPE_UNSPECIFIED})}}function jo(t){const e={},n=["items"],s=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&hb(t.type,e);for(const[f,h]of Object.entries(t))if(h!=null)if(f=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Hn).includes(h.toUpperCase())?h.toUpperCase():Hn.TYPE_UNSPECIFIED}else if(n.includes(f))e[f]=jo(h);else if(s.includes(f)){const g=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}g.push(jo(m))}e[f]=g}else if(r.includes(f)){const g={};for(const[m,x]of Object.entries(h))g[m]=jo(x);e[f]=g}else{if(f==="additionalProperties")continue;e[f]=h}return e}function pa(t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=fb().parse(t);return jo(e)}else return jo(t)}function gf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function yf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Yo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=pa(e.parameters)),e.response&&(e.response=pa(e.response));return t}function Zo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function mb(t,e,n,s=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function pi(t,e){if(typeof e!="string")throw new Error("name must be a string");return mb(t,e,"cachedContents")}function Zy(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function gi(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function pb(t){return t!=null&&typeof t=="object"&&"name"in t}function gb(t){return t!=null&&typeof t=="object"&&"video"in t}function yb(t){return t!=null&&typeof t=="object"&&"uri"in t}function Ky(t){var e;let n;if(pb(t)&&(n=t.name),!(yb(t)&&(n=t.uri,n===void 0))&&!(gb(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Xy(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Wy(t){for(const e of["models","tunedModels","publisherModels"])if(vb(t,e))return t[e];return[]}function vb(t,e){return t!==null&&typeof t=="object"&&e in t}function xb(t,e={}){const n=t,s={name:n.name,description:n.description,parameters:jo(iu(n.inputSchema))};return e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function _b(t,e={}){const n=[],s=new Set;for(const r of t){const l=r.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const f=xb(r,e);f.functionDeclarations&&n.push(...f.functionDeclarations)}return{functionDeclarations:n}}function Tb(t){const e=[];for(const n of t)e.push(iu(n));return e}function bb(t){const e={};for(const[n,s]of Object.entries(t)){const r=s;e[n]=iu(r)}return e}function iu(t){const e=new Set(["items"]),n=new Set(["anyOf"]),s=new Set(["properties"]),r={};for(const[l,f]of Object.entries(t))if(e.has(l))r[l]=iu(f);else if(n.has(l))r[l]=Tb(f);else if(s.has(l))r[l]=bb(f);else if(l==="type"){const h=f.toUpperCase();r[l]=Object.values(Hn).includes(h)?h:Hn.TYPE_UNSPECIFIED}else cb.has(l)&&(r[l]=f);return r}function Qy(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function wb(t){const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Ko(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function ev(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sb(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function Cb(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function Eb(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function Ab(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],Sb(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],Cb(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],Eb(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function tv(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Ab(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function Nb(t){const e={},n=u(t,["anyOf"]);n!=null&&c(e,["anyOf"],n);const s=u(t,["default"]);s!=null&&c(e,["default"],s);const r=u(t,["description"]);r!=null&&c(e,["description"],r);const l=u(t,["enum"]);l!=null&&c(e,["enum"],l);const f=u(t,["example"]);f!=null&&c(e,["example"],f);const h=u(t,["format"]);h!=null&&c(e,["format"],h);const g=u(t,["items"]);g!=null&&c(e,["items"],g);const m=u(t,["maxItems"]);m!=null&&c(e,["maxItems"],m);const x=u(t,["maxLength"]);x!=null&&c(e,["maxLength"],x);const _=u(t,["maxProperties"]);_!=null&&c(e,["maxProperties"],_);const b=u(t,["maximum"]);b!=null&&c(e,["maximum"],b);const C=u(t,["minItems"]);C!=null&&c(e,["minItems"],C);const E=u(t,["minLength"]);E!=null&&c(e,["minLength"],E);const N=u(t,["minProperties"]);N!=null&&c(e,["minProperties"],N);const D=u(t,["minimum"]);D!=null&&c(e,["minimum"],D);const B=u(t,["nullable"]);B!=null&&c(e,["nullable"],B);const z=u(t,["pattern"]);z!=null&&c(e,["pattern"],z);const U=u(t,["properties"]);U!=null&&c(e,["properties"],U);const F=u(t,["propertyOrdering"]);F!=null&&c(e,["propertyOrdering"],F);const V=u(t,["required"]);V!=null&&c(e,["required"],V);const W=u(t,["title"]);W!=null&&c(e,["title"],W);const se=u(t,["type"]);return se!=null&&c(e,["type"],se),e}function Mb(t){const e={};if(u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=u(t,["category"]);n!=null&&c(e,["category"],n);const s=u(t,["threshold"]);return s!=null&&c(e,["threshold"],s),e}function Rb(t){const e={},n=u(t,["behavior"]);n!=null&&c(e,["behavior"],n);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const r=u(t,["name"]);r!=null&&c(e,["name"],r);const l=u(t,["parameters"]);l!=null&&c(e,["parameters"],l);const f=u(t,["parametersJsonSchema"]);f!=null&&c(e,["parametersJsonSchema"],f);const h=u(t,["response"]);h!=null&&c(e,["response"],h);const g=u(t,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function kb(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function Db(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],kb(n)),e}function Ib(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function Ub(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],Ib(n)),e}function Lb(){return{}}function Pb(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(m=>Rb(m))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],Db(s));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],Ub(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],Lb());const f=u(t,["codeExecution"]);f!=null&&c(e,["codeExecution"],f);const h=u(t,["computerUse"]);return h!=null&&c(e,["computerUse"],h),e}function Ob(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function jb(t){const e={},n=u(t,["latitude"]);n!=null&&c(e,["latitude"],n);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function Vb(t){const e={},n=u(t,["latLng"]);n!=null&&c(e,["latLng"],jb(n));const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function qb(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],Ob(n));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],Vb(s)),e}function Bb(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function nv(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],Bb(n)),e}function $b(t){const e={},n=u(t,["speaker"]);n!=null&&c(e,["speaker"],n);const s=u(t,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],nv(s)),e}function zb(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>$b(r))),c(e,["speakerVoiceConfigs"],s)}return e}function Gb(t){const e={},n=u(t,["voiceConfig"]);n!=null&&c(e,["voiceConfig"],nv(n));const s=u(t,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],zb(s));const r=u(t,["languageCode"]);return r!=null&&c(e,["languageCode"],r),e}function Fb(t){const e={},n=u(t,["includeThoughts"]);n!=null&&c(e,["includeThoughts"],n);const s=u(t,["thinkingBudget"]);return s!=null&&c(e,["thinkingBudget"],s),e}function Hb(t,e,n){const s={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&c(n,["systemInstruction"],tv(Bt(r)));const l=u(e,["temperature"]);l!=null&&c(s,["temperature"],l);const f=u(e,["topP"]);f!=null&&c(s,["topP"],f);const h=u(e,["topK"]);h!=null&&c(s,["topK"],h);const g=u(e,["candidateCount"]);g!=null&&c(s,["candidateCount"],g);const m=u(e,["maxOutputTokens"]);m!=null&&c(s,["maxOutputTokens"],m);const x=u(e,["stopSequences"]);x!=null&&c(s,["stopSequences"],x);const _=u(e,["responseLogprobs"]);_!=null&&c(s,["responseLogprobs"],_);const b=u(e,["logprobs"]);b!=null&&c(s,["logprobs"],b);const C=u(e,["presencePenalty"]);C!=null&&c(s,["presencePenalty"],C);const E=u(e,["frequencyPenalty"]);E!=null&&c(s,["frequencyPenalty"],E);const N=u(e,["seed"]);N!=null&&c(s,["seed"],N);const D=u(e,["responseMimeType"]);D!=null&&c(s,["responseMimeType"],D);const B=u(e,["responseSchema"]);B!=null&&c(s,["responseSchema"],Nb(pa(B)));const z=u(e,["responseJsonSchema"]);if(z!=null&&c(s,["responseJsonSchema"],z),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=u(e,["safetySettings"]);if(n!==void 0&&U!=null){let re=U;Array.isArray(re)&&(re=re.map(Q=>Mb(Q))),c(n,["safetySettings"],re)}const F=u(e,["tools"]);if(n!==void 0&&F!=null){let re=Zo(F);Array.isArray(re)&&(re=re.map(Q=>Pb(Yo(Q)))),c(n,["tools"],re)}const V=u(e,["toolConfig"]);if(n!==void 0&&V!=null&&c(n,["toolConfig"],qb(V)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=u(e,["cachedContent"]);n!==void 0&&W!=null&&c(n,["cachedContent"],pi(t,W));const se=u(e,["responseModalities"]);se!=null&&c(s,["responseModalities"],se);const ye=u(e,["mediaResolution"]);ye!=null&&c(s,["mediaResolution"],ye);const ne=u(e,["speechConfig"]);if(ne!=null&&c(s,["speechConfig"],Gb(gf(ne))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const oe=u(e,["thinkingConfig"]);return oe!=null&&c(s,["thinkingConfig"],Fb(oe)),s}function Jb(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["request","model"],Ke(t,s));const r=u(e,["contents"]);if(r!=null){let f=wn(r);Array.isArray(f)&&(f=f.map(h=>tv(h))),c(n,["request","contents"],f)}const l=u(e,["config"]);return l!=null&&c(n,["request","generationConfig"],Hb(t,l,n)),n}function Yb(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=u(e,["fileName"]);s!=null&&c(n,["fileName"],s);const r=u(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(f=>Jb(t,f))),c(n,["requests","requests"],l)}return n}function Zb(t,e){const n={},s=u(t,["displayName"]);if(e!==void 0&&s!=null&&c(e,["batch","displayName"],s),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Kb(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Ke(t,s));const r=u(e,["src"]);r!=null&&c(n,["batch","inputConfig"],Yb(t,Qy(t,r)));const l=u(e,["config"]);return l!=null&&c(n,["config"],Zb(l,n)),n}function Xb(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Ko(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function Wb(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Ko(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function Qb(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);if(e!==void 0&&r!=null&&c(e,["_query","pageToken"],r),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function ew(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],Qb(n,e)),e}function tw(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Ko(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function nw(t){const e={},n=u(t,["format"]);n!=null&&c(e,["instancesFormat"],n);const s=u(t,["gcsUri"]);s!=null&&c(e,["gcsSource","uris"],s);const r=u(t,["bigqueryUri"]);if(r!=null&&c(e,["bigquerySource","inputUri"],r),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function iw(t){const e={},n=u(t,["format"]);n!=null&&c(e,["predictionsFormat"],n);const s=u(t,["gcsUri"]);s!=null&&c(e,["gcsDestination","outputUriPrefix"],s);const r=u(t,["bigqueryUri"]);if(r!=null&&c(e,["bigqueryDestination","outputUri"],r),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function sw(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const r=u(t,["dest"]);return e!==void 0&&r!=null&&c(e,["outputConfig"],iw(wb(r))),n}function ow(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["model"],Ke(t,s));const r=u(e,["src"]);r!=null&&c(n,["inputConfig"],nw(Qy(t,r)));const l=u(e,["config"]);return l!=null&&c(n,["config"],sw(l,n)),n}function rw(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Ko(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function aw(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Ko(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function lw(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&c(e,["_query","pageToken"],r);const l=u(t,["filter"]);return e!==void 0&&l!=null&&c(e,["_query","filter"],l),n}function uw(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],lw(n,e)),e}function cw(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Ko(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function iv(){return{}}function dw(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function fw(t){const e={},n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function hw(t){const e={},n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function mw(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],dw(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],fw(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],hw(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function pw(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>mw(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function gw(t){const e={},n=u(t,["citationSources"]);return n!=null&&c(e,["citations"],n),e}function yw(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&c(e,["retrievedUrl"],n);const s=u(t,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function vw(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>yw(r))),c(e,["urlMetadata"],s)}return e}function xw(t){const e={},n=u(t,["content"]);n!=null&&c(e,["content"],pw(n));const s=u(t,["citationMetadata"]);s!=null&&c(e,["citationMetadata"],gw(s));const r=u(t,["tokenCount"]);r!=null&&c(e,["tokenCount"],r);const l=u(t,["finishReason"]);l!=null&&c(e,["finishReason"],l);const f=u(t,["urlContextMetadata"]);f!=null&&c(e,["urlContextMetadata"],vw(f));const h=u(t,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const g=u(t,["groundingMetadata"]);g!=null&&c(e,["groundingMetadata"],g);const m=u(t,["index"]);m!=null&&c(e,["index"],m);const x=u(t,["logprobsResult"]);x!=null&&c(e,["logprobsResult"],x);const _=u(t,["safetyRatings"]);return _!=null&&c(e,["safetyRatings"],_),e}function _w(t){const e={},n=u(t,["candidates"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>xw(h))),c(e,["candidates"],f)}const s=u(t,["modelVersion"]);s!=null&&c(e,["modelVersion"],s);const r=u(t,["promptFeedback"]);r!=null&&c(e,["promptFeedback"],r);const l=u(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function Tw(t){const e={},n=u(t,["response"]);return n!=null&&c(e,["response"],_w(n)),u(t,["error"])!=null&&c(e,["error"],iv()),e}function bw(t){const e={},n=u(t,["responsesFile"]);n!=null&&c(e,["fileName"],n);const s=u(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Tw(l))),c(e,["inlinedResponses"],r)}return e}function Hd(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["metadata","displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["metadata","state"]);r!=null&&c(e,["state"],ev(r));const l=u(t,["metadata","createTime"]);l!=null&&c(e,["createTime"],l);const f=u(t,["metadata","endTime"]);f!=null&&c(e,["endTime"],f);const h=u(t,["metadata","updateTime"]);h!=null&&c(e,["updateTime"],h);const g=u(t,["metadata","model"]);g!=null&&c(e,["model"],g);const m=u(t,["metadata","output"]);return m!=null&&c(e,["dest"],bw(m)),e}function ww(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["operations"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Hd(l))),c(e,["batchJobs"],r)}return e}function Sw(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["done"]);return s!=null&&c(e,["done"],s),u(t,["error"])!=null&&c(e,["error"],iv()),e}function sv(t){const e={},n=u(t,["details"]);n!=null&&c(e,["details"],n);const s=u(t,["code"]);s!=null&&c(e,["code"],s);const r=u(t,["message"]);return r!=null&&c(e,["message"],r),e}function Cw(t){const e={},n=u(t,["instancesFormat"]);n!=null&&c(e,["format"],n);const s=u(t,["gcsSource","uris"]);s!=null&&c(e,["gcsUri"],s);const r=u(t,["bigquerySource","inputUri"]);return r!=null&&c(e,["bigqueryUri"],r),e}function Ew(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&c(e,["format"],n);const s=u(t,["gcsDestination","outputUriPrefix"]);s!=null&&c(e,["gcsUri"],s);const r=u(t,["bigqueryDestination","outputUri"]);return r!=null&&c(e,["bigqueryUri"],r),e}function Jd(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["state"]);r!=null&&c(e,["state"],ev(r));const l=u(t,["error"]);l!=null&&c(e,["error"],sv(l));const f=u(t,["createTime"]);f!=null&&c(e,["createTime"],f);const h=u(t,["startTime"]);h!=null&&c(e,["startTime"],h);const g=u(t,["endTime"]);g!=null&&c(e,["endTime"],g);const m=u(t,["updateTime"]);m!=null&&c(e,["updateTime"],m);const x=u(t,["model"]);x!=null&&c(e,["model"],x);const _=u(t,["inputConfig"]);_!=null&&c(e,["src"],Cw(_));const b=u(t,["outputConfig"]);return b!=null&&c(e,["dest"],Ew(b)),e}function Aw(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["batchPredictionJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Jd(l))),c(e,["batchJobs"],r)}return e}function Nw(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["done"]);s!=null&&c(e,["done"],s);const r=u(t,["error"]);return r!=null&&c(e,["error"],sv(r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Us;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Us||(Us={}));class xa{constructor(e,n,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,r)}init(e,n,s){var r,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let f={config:{}};s?typeof s=="object"?f=Object.assign({},s):f=s:f={config:{}},f.config&&(f.config.pageToken=n.nextPageToken),this.paramsInternal=f,this.pageInternalSize=(l=(r=f.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mw extends Ls{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const r=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${r}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new xa(Us.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(n),n)}async createInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=ow(this.apiClient,e);return h=pe("batchPredictionJobs",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>Jd(x))}else{const m=Kb(this.apiClient,e);return h=pe("{model}:batchGenerateContent",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>Hd(x))}}async get(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=rw(this.apiClient,e);return h=pe("batchPredictionJobs/{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>Jd(x))}else{const m=Xb(this.apiClient,e);return h=pe("batches/{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>Hd(x))}}async cancel(e){var n,s,r,l;let f="",h={};if(this.apiClient.isVertexAI()){const g=aw(this.apiClient,e);f=pe("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=Wb(this.apiClient,e);f=pe("batches/{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=uw(e);return h=pe("batchPredictionJobs",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>{const _=Aw(x),b=new N0;return Object.assign(b,_),b})}else{const m=ew(e);return h=pe("batches",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>{const _=ww(x),b=new N0;return Object.assign(b,_),b})}}async delete(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=cw(this.apiClient,e);return h=pe("batchPredictionJobs/{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>Nw(x))}else{const m=tw(this.apiClient,e);return h=pe("batches/{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>Sw(x))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rw(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function kw(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function Dw(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function Iw(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],Rw(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],kw(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],Dw(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function I0(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Iw(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function Uw(t){const e={},n=u(t,["behavior"]);n!=null&&c(e,["behavior"],n);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const r=u(t,["name"]);r!=null&&c(e,["name"],r);const l=u(t,["parameters"]);l!=null&&c(e,["parameters"],l);const f=u(t,["parametersJsonSchema"]);f!=null&&c(e,["parametersJsonSchema"],f);const h=u(t,["response"]);h!=null&&c(e,["response"],h);const g=u(t,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function Lw(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function Pw(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],Lw(n)),e}function Ow(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function jw(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],Ow(n)),e}function Vw(){return{}}function qw(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(m=>Uw(m))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],Pw(s));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],jw(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],Vw());const f=u(t,["codeExecution"]);f!=null&&c(e,["codeExecution"],f);const h=u(t,["computerUse"]);return h!=null&&c(e,["computerUse"],h),e}function Bw(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function $w(t){const e={},n=u(t,["latitude"]);n!=null&&c(e,["latitude"],n);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function zw(t){const e={},n=u(t,["latLng"]);n!=null&&c(e,["latLng"],$w(n));const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function Gw(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],Bw(n));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],zw(s)),e}function Fw(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const r=u(t,["expireTime"]);e!==void 0&&r!=null&&c(e,["expireTime"],r);const l=u(t,["displayName"]);e!==void 0&&l!=null&&c(e,["displayName"],l);const f=u(t,["contents"]);if(e!==void 0&&f!=null){let x=wn(f);Array.isArray(x)&&(x=x.map(_=>I0(_))),c(e,["contents"],x)}const h=u(t,["systemInstruction"]);e!==void 0&&h!=null&&c(e,["systemInstruction"],I0(Bt(h)));const g=u(t,["tools"]);if(e!==void 0&&g!=null){let x=g;Array.isArray(x)&&(x=x.map(_=>qw(_))),c(e,["tools"],x)}const m=u(t,["toolConfig"]);if(e!==void 0&&m!=null&&c(e,["toolConfig"],Gw(m)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Hw(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["model"],zy(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],Fw(r,n)),n}function Jw(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],pi(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function Yw(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],pi(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function Zw(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const r=u(t,["expireTime"]);return e!==void 0&&r!=null&&c(e,["expireTime"],r),n}function Kw(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],pi(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],Zw(r,n)),n}function Xw(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&c(e,["_query","pageToken"],r),n}function Ww(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],Xw(n,e)),e}function Qw(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function eS(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function tS(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function nS(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],Qw(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],eS(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],tS(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function U0(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>nS(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function iS(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&c(e,["description"],n);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const r=u(t,["parameters"]);r!=null&&c(e,["parameters"],r);const l=u(t,["parametersJsonSchema"]);l!=null&&c(e,["parametersJsonSchema"],l);const f=u(t,["response"]);f!=null&&c(e,["response"],f);const h=u(t,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function sS(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function oS(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],sS(n)),e}function rS(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function aS(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],rS(n)),e}function lS(){return{}}function uS(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&c(e,["apiKeyString"],n),e}function cS(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&c(e,["apiKeyConfig"],uS(n));const s=u(t,["authType"]);s!=null&&c(e,["authType"],s);const r=u(t,["googleServiceAccountConfig"]);r!=null&&c(e,["googleServiceAccountConfig"],r);const l=u(t,["httpBasicAuthConfig"]);l!=null&&c(e,["httpBasicAuthConfig"],l);const f=u(t,["oauthConfig"]);f!=null&&c(e,["oauthConfig"],f);const h=u(t,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function dS(t){const e={},n=u(t,["authConfig"]);return n!=null&&c(e,["authConfig"],cS(n)),e}function fS(){return{}}function hS(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(b=>iS(b))),c(e,["functionDeclarations"],_)}const s=u(t,["retrieval"]);s!=null&&c(e,["retrieval"],s);const r=u(t,["googleSearch"]);r!=null&&c(e,["googleSearch"],oS(r));const l=u(t,["googleSearchRetrieval"]);l!=null&&c(e,["googleSearchRetrieval"],aS(l)),u(t,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],lS());const h=u(t,["googleMaps"]);h!=null&&c(e,["googleMaps"],dS(h)),u(t,["urlContext"])!=null&&c(e,["urlContext"],fS());const m=u(t,["codeExecution"]);m!=null&&c(e,["codeExecution"],m);const x=u(t,["computerUse"]);return x!=null&&c(e,["computerUse"],x),e}function mS(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function pS(t){const e={},n=u(t,["latitude"]);n!=null&&c(e,["latitude"],n);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function gS(t){const e={},n=u(t,["latLng"]);n!=null&&c(e,["latLng"],pS(n));const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function yS(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],mS(n));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],gS(s)),e}function vS(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const r=u(t,["expireTime"]);e!==void 0&&r!=null&&c(e,["expireTime"],r);const l=u(t,["displayName"]);e!==void 0&&l!=null&&c(e,["displayName"],l);const f=u(t,["contents"]);if(e!==void 0&&f!=null){let _=wn(f);Array.isArray(_)&&(_=_.map(b=>U0(b))),c(e,["contents"],_)}const h=u(t,["systemInstruction"]);e!==void 0&&h!=null&&c(e,["systemInstruction"],U0(Bt(h)));const g=u(t,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(b=>hS(b))),c(e,["tools"],_)}const m=u(t,["toolConfig"]);e!==void 0&&m!=null&&c(e,["toolConfig"],yS(m));const x=u(t,["kmsKeyName"]);return e!==void 0&&x!=null&&c(e,["encryption_spec","kmsKeyName"],x),n}function xS(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["model"],zy(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],vS(r,n)),n}function _S(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],pi(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function TS(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],pi(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function bS(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const r=u(t,["expireTime"]);return e!==void 0&&r!=null&&c(e,["expireTime"],r),n}function wS(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],pi(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],bS(r,n)),n}function SS(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&c(e,["_query","pageToken"],r),n}function CS(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],SS(n,e)),e}function Bl(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["model"]);r!=null&&c(e,["model"],r);const l=u(t,["createTime"]);l!=null&&c(e,["createTime"],l);const f=u(t,["updateTime"]);f!=null&&c(e,["updateTime"],f);const h=u(t,["expireTime"]);h!=null&&c(e,["expireTime"],h);const g=u(t,["usageMetadata"]);return g!=null&&c(e,["usageMetadata"],g),e}function ES(){return{}}function AS(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Bl(l))),c(e,["cachedContents"],r)}return e}function $l(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["model"]);r!=null&&c(e,["model"],r);const l=u(t,["createTime"]);l!=null&&c(e,["createTime"],l);const f=u(t,["updateTime"]);f!=null&&c(e,["updateTime"],f);const h=u(t,["expireTime"]);h!=null&&c(e,["expireTime"],h);const g=u(t,["usageMetadata"]);return g!=null&&c(e,["usageMetadata"],g),e}function NS(){return{}}function MS(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>$l(l))),c(e,["cachedContents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RS extends Ls{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xa(Us.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=xS(this.apiClient,e);return h=pe("cachedContents",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>$l(x))}else{const m=Hw(this.apiClient,e);return h=pe("cachedContents",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>Bl(x))}}async get(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=_S(this.apiClient,e);return h=pe("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>$l(x))}else{const m=Jw(this.apiClient,e);return h=pe("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>Bl(x))}}async delete(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=TS(this.apiClient,e);return h=pe("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(()=>{const x=NS(),_=new E0;return Object.assign(_,x),_})}else{const m=Yw(this.apiClient,e);return h=pe("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(()=>{const x=ES(),_=new E0;return Object.assign(_,x),_})}}async update(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=wS(this.apiClient,e);return h=pe("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>$l(x))}else{const m=Kw(this.apiClient,e);return h=pe("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>Bl(x))}}async listInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=CS(e);return h=pe("cachedContents",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>{const _=MS(x),b=new A0;return Object.assign(b,_),b})}else{const m=Ww(e);return h=pe("cachedContents",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>{const _=AS(x),b=new A0;return Object.assign(b,_),b})}}}function L0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function it(t){return this instanceof it?(this.v=t,this):new it(t)}function Vo(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",f),r[Symbol.asyncIterator]=function(){return this},r;function f(C){return function(E){return Promise.resolve(E).then(C,_)}}function h(C,E){s[C]&&(r[C]=function(N){return new Promise(function(D,B){l.push([C,N,D,B])>1||g(C,N)})},E&&(r[C]=E(r[C])))}function g(C,E){try{m(s[C](E))}catch(N){b(l[0][3],N)}}function m(C){C.value instanceof it?Promise.resolve(C.value.v).then(x,_):b(l[0][2],C)}function x(C){g("next",C)}function _(C){g("throw",C)}function b(C,E){C(E),l.shift(),l.length&&g(l[0][0],l[0][1])}}function la(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof L0=="function"?L0(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=t[l]&&function(f){return new Promise(function(h,g){f=t[l](f),r(h,g,f.done,f.value)})}}function r(l,f,h,g){Promise.resolve(g).then(function(m){l({value:m,done:h})},f)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kS(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:ov(n)}function ov(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function DS(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function P0(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const r=[];let l=!0;for(;s<n&&t[s].role==="model";)r.push(t[s]),l&&!ov(t[s])&&(l=!1),s++;l?e.push(...r):e.pop()}return e}class IS{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new US(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class US{constructor(e,n,s,r={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),DS(l)}async sendMessage(e){var n;await this.sendPromise;const s=Bt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,f,h;const g=await r,m=(f=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||f===void 0?void 0:f.content,x=g.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let b=[];x!=null&&(b=(h=x.slice(_))!==null&&h!==void 0?h:[]);const C=m?[m]:[];this.recordHistory(s,C,b)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const s=Bt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,s)}getHistory(e=!1){const n=e?P0(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var s,r;return Vo(this,arguments,function*(){var f,h,g,m;const x=[];try{for(var _=!0,b=la(e),C;C=yield it(b.next()),f=C.done,!f;_=!0){m=C.value,_=!1;const E=m;if(kS(E)){const N=(r=(s=E.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content;N!==void 0&&x.push(N)}yield yield it(E)}}catch(E){h={error:E}}finally{try{!_&&!f&&(g=b.return)&&(yield it(g.call(b)))}finally{if(h)throw h.error}}this.recordHistory(n,x)})}recordHistory(e,n,s){let r=[];n.length>0&&n.every(l=>l.role!==void 0)?r=n:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...P0(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class su extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,su.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LS(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&c(e,["_query","pageToken"],r),n}function PS(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],LS(n,e)),e}function OS(t){const e={},n=u(t,["details"]);n!=null&&c(e,["details"],n);const s=u(t,["message"]);s!=null&&c(e,["message"],s);const r=u(t,["code"]);return r!=null&&c(e,["code"],r),e}function jS(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["mimeType"]);r!=null&&c(e,["mimeType"],r);const l=u(t,["sizeBytes"]);l!=null&&c(e,["sizeBytes"],l);const f=u(t,["createTime"]);f!=null&&c(e,["createTime"],f);const h=u(t,["expirationTime"]);h!=null&&c(e,["expirationTime"],h);const g=u(t,["updateTime"]);g!=null&&c(e,["updateTime"],g);const m=u(t,["sha256Hash"]);m!=null&&c(e,["sha256Hash"],m);const x=u(t,["uri"]);x!=null&&c(e,["uri"],x);const _=u(t,["downloadUri"]);_!=null&&c(e,["downloadUri"],_);const b=u(t,["state"]);b!=null&&c(e,["state"],b);const C=u(t,["source"]);C!=null&&c(e,["source"],C);const E=u(t,["videoMetadata"]);E!=null&&c(e,["videoMetadata"],E);const N=u(t,["error"]);return N!=null&&c(e,["error"],OS(N)),e}function VS(t){const e={},n=u(t,["file"]);n!=null&&c(e,["file"],jS(n));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function qS(t){const e={},n=u(t,["name"]);n!=null&&c(e,["_url","file"],Ky(n));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function BS(t){const e={},n=u(t,["name"]);n!=null&&c(e,["_url","file"],Ky(n));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function $S(t){const e={},n=u(t,["details"]);n!=null&&c(e,["details"],n);const s=u(t,["message"]);s!=null&&c(e,["message"],s);const r=u(t,["code"]);return r!=null&&c(e,["code"],r),e}function Yd(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["mimeType"]);r!=null&&c(e,["mimeType"],r);const l=u(t,["sizeBytes"]);l!=null&&c(e,["sizeBytes"],l);const f=u(t,["createTime"]);f!=null&&c(e,["createTime"],f);const h=u(t,["expirationTime"]);h!=null&&c(e,["expirationTime"],h);const g=u(t,["updateTime"]);g!=null&&c(e,["updateTime"],g);const m=u(t,["sha256Hash"]);m!=null&&c(e,["sha256Hash"],m);const x=u(t,["uri"]);x!=null&&c(e,["uri"],x);const _=u(t,["downloadUri"]);_!=null&&c(e,["downloadUri"],_);const b=u(t,["state"]);b!=null&&c(e,["state"],b);const C=u(t,["source"]);C!=null&&c(e,["source"],C);const E=u(t,["videoMetadata"]);E!=null&&c(e,["videoMetadata"],E);const N=u(t,["error"]);return N!=null&&c(e,["error"],$S(N)),e}function zS(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Yd(l))),c(e,["files"],r)}return e}function GS(){return{}}function FS(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HS extends Ls{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xa(Us.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>Yd(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=PS(e);return l=pe("files",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=zS(g),x=new ob;return Object.assign(x,m),x})}}async createInternal(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=VS(e);return l=pe("upload/v1beta/files",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(()=>{const g=GS(),m=new rb;return Object.assign(m,g),m})}}async get(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=qS(e);return l=pe("files/{file}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>Yd(g))}}async delete(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=BS(e);return l=pe("files/{file}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(()=>{const g=FS(),m=new ab;return Object.assign(m,g),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JS(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function YS(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function rv(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],JS(n)),e}function ZS(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],YS(n)),e}function KS(t){const e={},n=u(t,["speaker"]);n!=null&&c(e,["speaker"],n);const s=u(t,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],rv(s)),e}function XS(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>KS(r))),c(e,["speakerVoiceConfigs"],s)}return e}function WS(t){const e={},n=u(t,["voiceConfig"]);n!=null&&c(e,["voiceConfig"],rv(n));const s=u(t,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],XS(s));const r=u(t,["languageCode"]);return r!=null&&c(e,["languageCode"],r),e}function QS(t){const e={},n=u(t,["voiceConfig"]);if(n!=null&&c(e,["voiceConfig"],ZS(n)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function eC(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function tC(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function nC(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function iC(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function sC(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function oC(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function rC(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],eC(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],nC(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],sC(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function aC(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],tC(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],iC(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],oC(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function lC(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>rC(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function uC(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>aC(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function cC(t){const e={},n=u(t,["behavior"]);n!=null&&c(e,["behavior"],n);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const r=u(t,["name"]);r!=null&&c(e,["name"],r);const l=u(t,["parameters"]);l!=null&&c(e,["parameters"],l);const f=u(t,["parametersJsonSchema"]);f!=null&&c(e,["parametersJsonSchema"],f);const h=u(t,["response"]);h!=null&&c(e,["response"],h);const g=u(t,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function dC(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&c(e,["description"],n);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const r=u(t,["parameters"]);r!=null&&c(e,["parameters"],r);const l=u(t,["parametersJsonSchema"]);l!=null&&c(e,["parametersJsonSchema"],l);const f=u(t,["response"]);f!=null&&c(e,["response"],f);const h=u(t,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function fC(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function hC(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function mC(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],fC(n)),e}function pC(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],hC(n)),e}function gC(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function yC(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function vC(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],gC(n)),e}function xC(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],yC(n)),e}function _C(){return{}}function TC(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&c(e,["apiKeyString"],n),e}function bC(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&c(e,["apiKeyConfig"],TC(n));const s=u(t,["authType"]);s!=null&&c(e,["authType"],s);const r=u(t,["googleServiceAccountConfig"]);r!=null&&c(e,["googleServiceAccountConfig"],r);const l=u(t,["httpBasicAuthConfig"]);l!=null&&c(e,["httpBasicAuthConfig"],l);const f=u(t,["oauthConfig"]);f!=null&&c(e,["oauthConfig"],f);const h=u(t,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function wC(t){const e={},n=u(t,["authConfig"]);return n!=null&&c(e,["authConfig"],bC(n)),e}function SC(){return{}}function CC(){return{}}function EC(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(m=>cC(m))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],mC(s));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],vC(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],SC());const f=u(t,["codeExecution"]);f!=null&&c(e,["codeExecution"],f);const h=u(t,["computerUse"]);return h!=null&&c(e,["computerUse"],h),e}function AC(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(b=>dC(b))),c(e,["functionDeclarations"],_)}const s=u(t,["retrieval"]);s!=null&&c(e,["retrieval"],s);const r=u(t,["googleSearch"]);r!=null&&c(e,["googleSearch"],pC(r));const l=u(t,["googleSearchRetrieval"]);l!=null&&c(e,["googleSearchRetrieval"],xC(l)),u(t,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],_C());const h=u(t,["googleMaps"]);h!=null&&c(e,["googleMaps"],wC(h)),u(t,["urlContext"])!=null&&c(e,["urlContext"],CC());const m=u(t,["codeExecution"]);m!=null&&c(e,["codeExecution"],m);const x=u(t,["computerUse"]);return x!=null&&c(e,["computerUse"],x),e}function NC(t){const e={},n=u(t,["handle"]);if(n!=null&&c(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function MC(t){const e={},n=u(t,["handle"]);n!=null&&c(e,["handle"],n);const s=u(t,["transparent"]);return s!=null&&c(e,["transparent"],s),e}function O0(){return{}}function j0(){return{}}function RC(t){const e={},n=u(t,["disabled"]);n!=null&&c(e,["disabled"],n);const s=u(t,["startOfSpeechSensitivity"]);s!=null&&c(e,["startOfSpeechSensitivity"],s);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&c(e,["endOfSpeechSensitivity"],r);const l=u(t,["prefixPaddingMs"]);l!=null&&c(e,["prefixPaddingMs"],l);const f=u(t,["silenceDurationMs"]);return f!=null&&c(e,["silenceDurationMs"],f),e}function kC(t){const e={},n=u(t,["disabled"]);n!=null&&c(e,["disabled"],n);const s=u(t,["startOfSpeechSensitivity"]);s!=null&&c(e,["startOfSpeechSensitivity"],s);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&c(e,["endOfSpeechSensitivity"],r);const l=u(t,["prefixPaddingMs"]);l!=null&&c(e,["prefixPaddingMs"],l);const f=u(t,["silenceDurationMs"]);return f!=null&&c(e,["silenceDurationMs"],f),e}function DC(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&c(e,["automaticActivityDetection"],RC(n));const s=u(t,["activityHandling"]);s!=null&&c(e,["activityHandling"],s);const r=u(t,["turnCoverage"]);return r!=null&&c(e,["turnCoverage"],r),e}function IC(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&c(e,["automaticActivityDetection"],kC(n));const s=u(t,["activityHandling"]);s!=null&&c(e,["activityHandling"],s);const r=u(t,["turnCoverage"]);return r!=null&&c(e,["turnCoverage"],r),e}function UC(t){const e={},n=u(t,["targetTokens"]);return n!=null&&c(e,["targetTokens"],n),e}function LC(t){const e={},n=u(t,["targetTokens"]);return n!=null&&c(e,["targetTokens"],n),e}function PC(t){const e={},n=u(t,["triggerTokens"]);n!=null&&c(e,["triggerTokens"],n);const s=u(t,["slidingWindow"]);return s!=null&&c(e,["slidingWindow"],UC(s)),e}function OC(t){const e={},n=u(t,["triggerTokens"]);n!=null&&c(e,["triggerTokens"],n);const s=u(t,["slidingWindow"]);return s!=null&&c(e,["slidingWindow"],LC(s)),e}function jC(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&c(e,["proactiveAudio"],n),e}function VC(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&c(e,["proactiveAudio"],n),e}function qC(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig"],s);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","responseModalities"],r);const l=u(t,["temperature"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","temperature"],l);const f=u(t,["topP"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","topP"],f);const h=u(t,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const g=u(t,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const m=u(t,["mediaResolution"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","mediaResolution"],m);const x=u(t,["seed"]);e!==void 0&&x!=null&&c(e,["setup","generationConfig","seed"],x);const _=u(t,["speechConfig"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","speechConfig"],WS(yf(_)));const b=u(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=u(t,["systemInstruction"]);e!==void 0&&C!=null&&c(e,["setup","systemInstruction"],lC(Bt(C)));const E=u(t,["tools"]);if(e!==void 0&&E!=null){let V=Zo(E);Array.isArray(V)&&(V=V.map(W=>EC(Yo(W)))),c(e,["setup","tools"],V)}const N=u(t,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],NC(N));const D=u(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&c(e,["setup","inputAudioTranscription"],O0());const B=u(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&c(e,["setup","outputAudioTranscription"],O0());const z=u(t,["realtimeInputConfig"]);e!==void 0&&z!=null&&c(e,["setup","realtimeInputConfig"],DC(z));const U=u(t,["contextWindowCompression"]);e!==void 0&&U!=null&&c(e,["setup","contextWindowCompression"],PC(U));const F=u(t,["proactivity"]);return e!==void 0&&F!=null&&c(e,["setup","proactivity"],jC(F)),n}function BC(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig"],s);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","responseModalities"],r);const l=u(t,["temperature"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","temperature"],l);const f=u(t,["topP"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","topP"],f);const h=u(t,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const g=u(t,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const m=u(t,["mediaResolution"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","mediaResolution"],m);const x=u(t,["seed"]);e!==void 0&&x!=null&&c(e,["setup","generationConfig","seed"],x);const _=u(t,["speechConfig"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","speechConfig"],QS(yf(_)));const b=u(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=u(t,["systemInstruction"]);e!==void 0&&C!=null&&c(e,["setup","systemInstruction"],uC(Bt(C)));const E=u(t,["tools"]);if(e!==void 0&&E!=null){let V=Zo(E);Array.isArray(V)&&(V=V.map(W=>AC(Yo(W)))),c(e,["setup","tools"],V)}const N=u(t,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],MC(N));const D=u(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&c(e,["setup","inputAudioTranscription"],j0());const B=u(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&c(e,["setup","outputAudioTranscription"],j0());const z=u(t,["realtimeInputConfig"]);e!==void 0&&z!=null&&c(e,["setup","realtimeInputConfig"],IC(z));const U=u(t,["contextWindowCompression"]);e!==void 0&&U!=null&&c(e,["setup","contextWindowCompression"],OC(U));const F=u(t,["proactivity"]);return e!==void 0&&F!=null&&c(e,["setup","proactivity"],VC(F)),n}function $C(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["setup","model"],Ke(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],qC(r,n)),n}function zC(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["setup","model"],Ke(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],BC(r,n)),n}function GC(){return{}}function FC(){return{}}function HC(){return{}}function JC(){return{}}function YC(t){const e={},n=u(t,["media"]);n!=null&&c(e,["mediaChunks"],Gy(n));const s=u(t,["audio"]);s!=null&&c(e,["audio"],Hy(s));const r=u(t,["audioStreamEnd"]);r!=null&&c(e,["audioStreamEnd"],r);const l=u(t,["video"]);l!=null&&c(e,["video"],Fy(l));const f=u(t,["text"]);return f!=null&&c(e,["text"],f),u(t,["activityStart"])!=null&&c(e,["activityStart"],GC()),u(t,["activityEnd"])!=null&&c(e,["activityEnd"],HC()),e}function ZC(t){const e={},n=u(t,["media"]);n!=null&&c(e,["mediaChunks"],Gy(n));const s=u(t,["audio"]);s!=null&&c(e,["audio"],Hy(s));const r=u(t,["audioStreamEnd"]);r!=null&&c(e,["audioStreamEnd"],r);const l=u(t,["video"]);l!=null&&c(e,["video"],Fy(l));const f=u(t,["text"]);return f!=null&&c(e,["text"],f),u(t,["activityStart"])!=null&&c(e,["activityStart"],FC()),u(t,["activityEnd"])!=null&&c(e,["activityEnd"],JC()),e}function av(t){const e={},n=u(t,["text"]);n!=null&&c(e,["text"],n);const s=u(t,["weight"]);return s!=null&&c(e,["weight"],s),e}function KC(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>av(r))),c(e,["weightedPrompts"],s)}return e}function lv(t){const e={},n=u(t,["temperature"]);n!=null&&c(e,["temperature"],n);const s=u(t,["topK"]);s!=null&&c(e,["topK"],s);const r=u(t,["seed"]);r!=null&&c(e,["seed"],r);const l=u(t,["guidance"]);l!=null&&c(e,["guidance"],l);const f=u(t,["bpm"]);f!=null&&c(e,["bpm"],f);const h=u(t,["density"]);h!=null&&c(e,["density"],h);const g=u(t,["brightness"]);g!=null&&c(e,["brightness"],g);const m=u(t,["scale"]);m!=null&&c(e,["scale"],m);const x=u(t,["muteBass"]);x!=null&&c(e,["muteBass"],x);const _=u(t,["muteDrums"]);_!=null&&c(e,["muteDrums"],_);const b=u(t,["onlyBassAndDrums"]);return b!=null&&c(e,["onlyBassAndDrums"],b),e}function XC(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&c(e,["musicGenerationConfig"],lv(n)),e}function uv(t){const e={},n=u(t,["model"]);return n!=null&&c(e,["model"],n),e}function cv(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>av(r))),c(e,["weightedPrompts"],s)}return e}function Zd(t){const e={},n=u(t,["setup"]);n!=null&&c(e,["setup"],uv(n));const s=u(t,["clientContent"]);s!=null&&c(e,["clientContent"],cv(s));const r=u(t,["musicGenerationConfig"]);r!=null&&c(e,["musicGenerationConfig"],lv(r));const l=u(t,["playbackControl"]);return l!=null&&c(e,["playbackControl"],l),e}function WC(){return{}}function QC(t){const e={},n=u(t,["sessionId"]);return n!=null&&c(e,["sessionId"],n),e}function eE(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function tE(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function nE(t){const e={},n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function iE(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function sE(t){const e={},n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function oE(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function rE(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],eE(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],nE(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],sE(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function aE(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],tE(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],iE(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],oE(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function lE(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>rE(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function uE(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>aE(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function V0(t){const e={},n=u(t,["text"]);n!=null&&c(e,["text"],n);const s=u(t,["finished"]);return s!=null&&c(e,["finished"],s),e}function q0(t){const e={},n=u(t,["text"]);n!=null&&c(e,["text"],n);const s=u(t,["finished"]);return s!=null&&c(e,["finished"],s),e}function cE(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&c(e,["retrievedUrl"],n);const s=u(t,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function dE(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>cE(r))),c(e,["urlMetadata"],s)}return e}function fE(t){const e={},n=u(t,["modelTurn"]);n!=null&&c(e,["modelTurn"],lE(n));const s=u(t,["turnComplete"]);s!=null&&c(e,["turnComplete"],s);const r=u(t,["interrupted"]);r!=null&&c(e,["interrupted"],r);const l=u(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const f=u(t,["generationComplete"]);f!=null&&c(e,["generationComplete"],f);const h=u(t,["inputTranscription"]);h!=null&&c(e,["inputTranscription"],V0(h));const g=u(t,["outputTranscription"]);g!=null&&c(e,["outputTranscription"],V0(g));const m=u(t,["urlContextMetadata"]);return m!=null&&c(e,["urlContextMetadata"],dE(m)),e}function hE(t){const e={},n=u(t,["modelTurn"]);n!=null&&c(e,["modelTurn"],uE(n));const s=u(t,["turnComplete"]);s!=null&&c(e,["turnComplete"],s);const r=u(t,["interrupted"]);r!=null&&c(e,["interrupted"],r);const l=u(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const f=u(t,["generationComplete"]);f!=null&&c(e,["generationComplete"],f);const h=u(t,["inputTranscription"]);h!=null&&c(e,["inputTranscription"],q0(h));const g=u(t,["outputTranscription"]);return g!=null&&c(e,["outputTranscription"],q0(g)),e}function mE(t){const e={},n=u(t,["id"]);n!=null&&c(e,["id"],n);const s=u(t,["args"]);s!=null&&c(e,["args"],s);const r=u(t,["name"]);return r!=null&&c(e,["name"],r),e}function pE(t){const e={},n=u(t,["args"]);n!=null&&c(e,["args"],n);const s=u(t,["name"]);return s!=null&&c(e,["name"],s),e}function gE(t){const e={},n=u(t,["functionCalls"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>mE(r))),c(e,["functionCalls"],s)}return e}function yE(t){const e={},n=u(t,["functionCalls"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>pE(r))),c(e,["functionCalls"],s)}return e}function vE(t){const e={},n=u(t,["ids"]);return n!=null&&c(e,["ids"],n),e}function xE(t){const e={},n=u(t,["ids"]);return n!=null&&c(e,["ids"],n),e}function Dl(t){const e={},n=u(t,["modality"]);n!=null&&c(e,["modality"],n);const s=u(t,["tokenCount"]);return s!=null&&c(e,["tokenCount"],s),e}function Il(t){const e={},n=u(t,["modality"]);n!=null&&c(e,["modality"],n);const s=u(t,["tokenCount"]);return s!=null&&c(e,["tokenCount"],s),e}function _E(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&c(e,["promptTokenCount"],n);const s=u(t,["cachedContentTokenCount"]);s!=null&&c(e,["cachedContentTokenCount"],s);const r=u(t,["responseTokenCount"]);r!=null&&c(e,["responseTokenCount"],r);const l=u(t,["toolUsePromptTokenCount"]);l!=null&&c(e,["toolUsePromptTokenCount"],l);const f=u(t,["thoughtsTokenCount"]);f!=null&&c(e,["thoughtsTokenCount"],f);const h=u(t,["totalTokenCount"]);h!=null&&c(e,["totalTokenCount"],h);const g=u(t,["promptTokensDetails"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(C=>Dl(C))),c(e,["promptTokensDetails"],b)}const m=u(t,["cacheTokensDetails"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(C=>Dl(C))),c(e,["cacheTokensDetails"],b)}const x=u(t,["responseTokensDetails"]);if(x!=null){let b=x;Array.isArray(b)&&(b=b.map(C=>Dl(C))),c(e,["responseTokensDetails"],b)}const _=u(t,["toolUsePromptTokensDetails"]);if(_!=null){let b=_;Array.isArray(b)&&(b=b.map(C=>Dl(C))),c(e,["toolUsePromptTokensDetails"],b)}return e}function TE(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&c(e,["promptTokenCount"],n);const s=u(t,["cachedContentTokenCount"]);s!=null&&c(e,["cachedContentTokenCount"],s);const r=u(t,["candidatesTokenCount"]);r!=null&&c(e,["responseTokenCount"],r);const l=u(t,["toolUsePromptTokenCount"]);l!=null&&c(e,["toolUsePromptTokenCount"],l);const f=u(t,["thoughtsTokenCount"]);f!=null&&c(e,["thoughtsTokenCount"],f);const h=u(t,["totalTokenCount"]);h!=null&&c(e,["totalTokenCount"],h);const g=u(t,["promptTokensDetails"]);if(g!=null){let C=g;Array.isArray(C)&&(C=C.map(E=>Il(E))),c(e,["promptTokensDetails"],C)}const m=u(t,["cacheTokensDetails"]);if(m!=null){let C=m;Array.isArray(C)&&(C=C.map(E=>Il(E))),c(e,["cacheTokensDetails"],C)}const x=u(t,["candidatesTokensDetails"]);if(x!=null){let C=x;Array.isArray(C)&&(C=C.map(E=>Il(E))),c(e,["responseTokensDetails"],C)}const _=u(t,["toolUsePromptTokensDetails"]);if(_!=null){let C=_;Array.isArray(C)&&(C=C.map(E=>Il(E))),c(e,["toolUsePromptTokensDetails"],C)}const b=u(t,["trafficType"]);return b!=null&&c(e,["trafficType"],b),e}function bE(t){const e={},n=u(t,["timeLeft"]);return n!=null&&c(e,["timeLeft"],n),e}function wE(t){const e={},n=u(t,["timeLeft"]);return n!=null&&c(e,["timeLeft"],n),e}function SE(t){const e={},n=u(t,["newHandle"]);n!=null&&c(e,["newHandle"],n);const s=u(t,["resumable"]);s!=null&&c(e,["resumable"],s);const r=u(t,["lastConsumedClientMessageIndex"]);return r!=null&&c(e,["lastConsumedClientMessageIndex"],r),e}function CE(t){const e={},n=u(t,["newHandle"]);n!=null&&c(e,["newHandle"],n);const s=u(t,["resumable"]);s!=null&&c(e,["resumable"],s);const r=u(t,["lastConsumedClientMessageIndex"]);return r!=null&&c(e,["lastConsumedClientMessageIndex"],r),e}function EE(t){const e={};u(t,["setupComplete"])!=null&&c(e,["setupComplete"],WC());const s=u(t,["serverContent"]);s!=null&&c(e,["serverContent"],fE(s));const r=u(t,["toolCall"]);r!=null&&c(e,["toolCall"],gE(r));const l=u(t,["toolCallCancellation"]);l!=null&&c(e,["toolCallCancellation"],vE(l));const f=u(t,["usageMetadata"]);f!=null&&c(e,["usageMetadata"],_E(f));const h=u(t,["goAway"]);h!=null&&c(e,["goAway"],bE(h));const g=u(t,["sessionResumptionUpdate"]);return g!=null&&c(e,["sessionResumptionUpdate"],SE(g)),e}function AE(t){const e={},n=u(t,["setupComplete"]);n!=null&&c(e,["setupComplete"],QC(n));const s=u(t,["serverContent"]);s!=null&&c(e,["serverContent"],hE(s));const r=u(t,["toolCall"]);r!=null&&c(e,["toolCall"],yE(r));const l=u(t,["toolCallCancellation"]);l!=null&&c(e,["toolCallCancellation"],xE(l));const f=u(t,["usageMetadata"]);f!=null&&c(e,["usageMetadata"],TE(f));const h=u(t,["goAway"]);h!=null&&c(e,["goAway"],wE(h));const g=u(t,["sessionResumptionUpdate"]);return g!=null&&c(e,["sessionResumptionUpdate"],CE(g)),e}function NE(){return{}}function ME(t){const e={},n=u(t,["text"]);n!=null&&c(e,["text"],n);const s=u(t,["weight"]);return s!=null&&c(e,["weight"],s),e}function RE(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>ME(r))),c(e,["weightedPrompts"],s)}return e}function kE(t){const e={},n=u(t,["temperature"]);n!=null&&c(e,["temperature"],n);const s=u(t,["topK"]);s!=null&&c(e,["topK"],s);const r=u(t,["seed"]);r!=null&&c(e,["seed"],r);const l=u(t,["guidance"]);l!=null&&c(e,["guidance"],l);const f=u(t,["bpm"]);f!=null&&c(e,["bpm"],f);const h=u(t,["density"]);h!=null&&c(e,["density"],h);const g=u(t,["brightness"]);g!=null&&c(e,["brightness"],g);const m=u(t,["scale"]);m!=null&&c(e,["scale"],m);const x=u(t,["muteBass"]);x!=null&&c(e,["muteBass"],x);const _=u(t,["muteDrums"]);_!=null&&c(e,["muteDrums"],_);const b=u(t,["onlyBassAndDrums"]);return b!=null&&c(e,["onlyBassAndDrums"],b),e}function DE(t){const e={},n=u(t,["clientContent"]);n!=null&&c(e,["clientContent"],RE(n));const s=u(t,["musicGenerationConfig"]);return s!=null&&c(e,["musicGenerationConfig"],kE(s)),e}function IE(t){const e={},n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);s!=null&&c(e,["mimeType"],s);const r=u(t,["sourceMetadata"]);return r!=null&&c(e,["sourceMetadata"],DE(r)),e}function UE(t){const e={},n=u(t,["audioChunks"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>IE(r))),c(e,["audioChunks"],s)}return e}function LE(t){const e={},n=u(t,["text"]);n!=null&&c(e,["text"],n);const s=u(t,["filteredReason"]);return s!=null&&c(e,["filteredReason"],s),e}function PE(t){const e={};u(t,["setupComplete"])!=null&&c(e,["setupComplete"],NE());const s=u(t,["serverContent"]);s!=null&&c(e,["serverContent"],UE(s));const r=u(t,["filteredPrompt"]);return r!=null&&c(e,["filteredPrompt"],LE(r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OE(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function jE(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function VE(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function qE(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],OE(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],jE(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],VE(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function ou(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>qE(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function BE(t){const e={},n=u(t,["anyOf"]);n!=null&&c(e,["anyOf"],n);const s=u(t,["default"]);s!=null&&c(e,["default"],s);const r=u(t,["description"]);r!=null&&c(e,["description"],r);const l=u(t,["enum"]);l!=null&&c(e,["enum"],l);const f=u(t,["example"]);f!=null&&c(e,["example"],f);const h=u(t,["format"]);h!=null&&c(e,["format"],h);const g=u(t,["items"]);g!=null&&c(e,["items"],g);const m=u(t,["maxItems"]);m!=null&&c(e,["maxItems"],m);const x=u(t,["maxLength"]);x!=null&&c(e,["maxLength"],x);const _=u(t,["maxProperties"]);_!=null&&c(e,["maxProperties"],_);const b=u(t,["maximum"]);b!=null&&c(e,["maximum"],b);const C=u(t,["minItems"]);C!=null&&c(e,["minItems"],C);const E=u(t,["minLength"]);E!=null&&c(e,["minLength"],E);const N=u(t,["minProperties"]);N!=null&&c(e,["minProperties"],N);const D=u(t,["minimum"]);D!=null&&c(e,["minimum"],D);const B=u(t,["nullable"]);B!=null&&c(e,["nullable"],B);const z=u(t,["pattern"]);z!=null&&c(e,["pattern"],z);const U=u(t,["properties"]);U!=null&&c(e,["properties"],U);const F=u(t,["propertyOrdering"]);F!=null&&c(e,["propertyOrdering"],F);const V=u(t,["required"]);V!=null&&c(e,["required"],V);const W=u(t,["title"]);W!=null&&c(e,["title"],W);const se=u(t,["type"]);return se!=null&&c(e,["type"],se),e}function $E(t){const e={};if(u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=u(t,["category"]);n!=null&&c(e,["category"],n);const s=u(t,["threshold"]);return s!=null&&c(e,["threshold"],s),e}function zE(t){const e={},n=u(t,["behavior"]);n!=null&&c(e,["behavior"],n);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const r=u(t,["name"]);r!=null&&c(e,["name"],r);const l=u(t,["parameters"]);l!=null&&c(e,["parameters"],l);const f=u(t,["parametersJsonSchema"]);f!=null&&c(e,["parametersJsonSchema"],f);const h=u(t,["response"]);h!=null&&c(e,["response"],h);const g=u(t,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function GE(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function FE(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],GE(n)),e}function HE(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function JE(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],HE(n)),e}function YE(){return{}}function ZE(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(m=>zE(m))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],FE(s));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],JE(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],YE());const f=u(t,["codeExecution"]);f!=null&&c(e,["codeExecution"],f);const h=u(t,["computerUse"]);return h!=null&&c(e,["computerUse"],h),e}function KE(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function XE(t){const e={},n=u(t,["latitude"]);n!=null&&c(e,["latitude"],n);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function WE(t){const e={},n=u(t,["latLng"]);n!=null&&c(e,["latLng"],XE(n));const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function QE(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],KE(n));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],WE(s)),e}function e1(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function dv(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],e1(n)),e}function t1(t){const e={},n=u(t,["speaker"]);n!=null&&c(e,["speaker"],n);const s=u(t,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],dv(s)),e}function n1(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>t1(r))),c(e,["speakerVoiceConfigs"],s)}return e}function i1(t){const e={},n=u(t,["voiceConfig"]);n!=null&&c(e,["voiceConfig"],dv(n));const s=u(t,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],n1(s));const r=u(t,["languageCode"]);return r!=null&&c(e,["languageCode"],r),e}function s1(t){const e={},n=u(t,["includeThoughts"]);n!=null&&c(e,["includeThoughts"],n);const s=u(t,["thinkingBudget"]);return s!=null&&c(e,["thinkingBudget"],s),e}function o1(t,e,n){const s={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&c(n,["systemInstruction"],ou(Bt(r)));const l=u(e,["temperature"]);l!=null&&c(s,["temperature"],l);const f=u(e,["topP"]);f!=null&&c(s,["topP"],f);const h=u(e,["topK"]);h!=null&&c(s,["topK"],h);const g=u(e,["candidateCount"]);g!=null&&c(s,["candidateCount"],g);const m=u(e,["maxOutputTokens"]);m!=null&&c(s,["maxOutputTokens"],m);const x=u(e,["stopSequences"]);x!=null&&c(s,["stopSequences"],x);const _=u(e,["responseLogprobs"]);_!=null&&c(s,["responseLogprobs"],_);const b=u(e,["logprobs"]);b!=null&&c(s,["logprobs"],b);const C=u(e,["presencePenalty"]);C!=null&&c(s,["presencePenalty"],C);const E=u(e,["frequencyPenalty"]);E!=null&&c(s,["frequencyPenalty"],E);const N=u(e,["seed"]);N!=null&&c(s,["seed"],N);const D=u(e,["responseMimeType"]);D!=null&&c(s,["responseMimeType"],D);const B=u(e,["responseSchema"]);B!=null&&c(s,["responseSchema"],BE(pa(B)));const z=u(e,["responseJsonSchema"]);if(z!=null&&c(s,["responseJsonSchema"],z),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=u(e,["safetySettings"]);if(n!==void 0&&U!=null){let re=U;Array.isArray(re)&&(re=re.map(Q=>$E(Q))),c(n,["safetySettings"],re)}const F=u(e,["tools"]);if(n!==void 0&&F!=null){let re=Zo(F);Array.isArray(re)&&(re=re.map(Q=>ZE(Yo(Q)))),c(n,["tools"],re)}const V=u(e,["toolConfig"]);if(n!==void 0&&V!=null&&c(n,["toolConfig"],QE(V)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=u(e,["cachedContent"]);n!==void 0&&W!=null&&c(n,["cachedContent"],pi(t,W));const se=u(e,["responseModalities"]);se!=null&&c(s,["responseModalities"],se);const ye=u(e,["mediaResolution"]);ye!=null&&c(s,["mediaResolution"],ye);const ne=u(e,["speechConfig"]);if(ne!=null&&c(s,["speechConfig"],i1(gf(ne))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const oe=u(e,["thinkingConfig"]);return oe!=null&&c(s,["thinkingConfig"],s1(oe)),s}function B0(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Ke(t,s));const r=u(e,["contents"]);if(r!=null){let f=wn(r);Array.isArray(f)&&(f=f.map(h=>ou(h))),c(n,["contents"],f)}const l=u(e,["config"]);return l!=null&&c(n,["generationConfig"],o1(t,l,n)),n}function r1(t,e){const n={},s=u(t,["taskType"]);e!==void 0&&s!=null&&c(e,["requests[]","taskType"],s);const r=u(t,["title"]);e!==void 0&&r!=null&&c(e,["requests[]","title"],r);const l=u(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&c(e,["requests[]","outputDimensionality"],l),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function a1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Ke(t,s));const r=u(e,["contents"]);r!=null&&c(n,["requests[]","content"],Yy(t,r));const l=u(e,["config"]);l!=null&&c(n,["config"],r1(l,n));const f=u(e,["model"]);return f!==void 0&&c(n,["requests[]","model"],Ke(t,f)),n}function l1(t,e){const n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const r=u(t,["aspectRatio"]);e!==void 0&&r!=null&&c(e,["parameters","aspectRatio"],r);const l=u(t,["guidanceScale"]);if(e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=u(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&c(e,["parameters","safetySetting"],f);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&c(e,["parameters","personGeneration"],h);const g=u(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&c(e,["parameters","includeSafetyAttributes"],g);const m=u(t,["includeRaiReason"]);e!==void 0&&m!=null&&c(e,["parameters","includeRaiReason"],m);const x=u(t,["language"]);e!==void 0&&x!=null&&c(e,["parameters","language"],x);const _=u(t,["outputMimeType"]);e!==void 0&&_!=null&&c(e,["parameters","outputOptions","mimeType"],_);const b=u(t,["outputCompressionQuality"]);if(e!==void 0&&b!=null&&c(e,["parameters","outputOptions","compressionQuality"],b),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function u1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Ke(t,s));const r=u(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const l=u(e,["config"]);return l!=null&&c(n,["config"],l1(l,n)),n}function c1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","name"],Ke(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function d1(t,e,n){const s={},r=u(e,["pageSize"]);n!==void 0&&r!=null&&c(n,["_query","pageSize"],r);const l=u(e,["pageToken"]);n!==void 0&&l!=null&&c(n,["_query","pageToken"],l);const f=u(e,["filter"]);n!==void 0&&f!=null&&c(n,["_query","filter"],f);const h=u(e,["queryBase"]);return n!==void 0&&h!=null&&c(n,["_url","models_url"],Xy(t,h)),s}function f1(t,e){const n={},s=u(e,["config"]);return s!=null&&c(n,["config"],d1(t,s,n)),n}function h1(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const r=u(t,["description"]);e!==void 0&&r!=null&&c(e,["description"],r);const l=u(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&c(e,["defaultCheckpointId"],l),n}function m1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","name"],Ke(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],h1(r,n)),n}function p1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","name"],Ke(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function g1(t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function y1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Ke(t,s));const r=u(e,["contents"]);if(r!=null){let f=wn(r);Array.isArray(f)&&(f=f.map(h=>ou(h))),c(n,["contents"],f)}const l=u(e,["config"]);return l!=null&&c(n,["config"],g1(l)),n}function v1(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(t,["imageBytes"]);n!=null&&c(e,["bytesBase64Encoded"],gi(n));const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function x1(t,e){const n={},s=u(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=u(t,["durationSeconds"]);if(e!==void 0&&r!=null&&c(e,["parameters","durationSeconds"],r),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=u(t,["aspectRatio"]);if(e!==void 0&&l!=null&&c(e,["parameters","aspectRatio"],l),u(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const f=u(t,["personGeneration"]);if(e!==void 0&&f!=null&&c(e,["parameters","personGeneration"],f),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=u(t,["negativePrompt"]);e!==void 0&&h!=null&&c(e,["parameters","negativePrompt"],h);const g=u(t,["enhancePrompt"]);if(e!==void 0&&g!=null&&c(e,["parameters","enhancePrompt"],g),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(u(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function _1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Ke(t,s));const r=u(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const l=u(e,["image"]);if(l!=null&&c(n,["instances[0]","image"],v1(l)),u(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const f=u(e,["config"]);return f!=null&&c(n,["config"],x1(f,n)),n}function T1(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function b1(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function w1(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function S1(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],T1(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],b1(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],w1(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function Xo(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>S1(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function C1(t){const e={},n=u(t,["anyOf"]);n!=null&&c(e,["anyOf"],n);const s=u(t,["default"]);s!=null&&c(e,["default"],s);const r=u(t,["description"]);r!=null&&c(e,["description"],r);const l=u(t,["enum"]);l!=null&&c(e,["enum"],l);const f=u(t,["example"]);f!=null&&c(e,["example"],f);const h=u(t,["format"]);h!=null&&c(e,["format"],h);const g=u(t,["items"]);g!=null&&c(e,["items"],g);const m=u(t,["maxItems"]);m!=null&&c(e,["maxItems"],m);const x=u(t,["maxLength"]);x!=null&&c(e,["maxLength"],x);const _=u(t,["maxProperties"]);_!=null&&c(e,["maxProperties"],_);const b=u(t,["maximum"]);b!=null&&c(e,["maximum"],b);const C=u(t,["minItems"]);C!=null&&c(e,["minItems"],C);const E=u(t,["minLength"]);E!=null&&c(e,["minLength"],E);const N=u(t,["minProperties"]);N!=null&&c(e,["minProperties"],N);const D=u(t,["minimum"]);D!=null&&c(e,["minimum"],D);const B=u(t,["nullable"]);B!=null&&c(e,["nullable"],B);const z=u(t,["pattern"]);z!=null&&c(e,["pattern"],z);const U=u(t,["properties"]);U!=null&&c(e,["properties"],U);const F=u(t,["propertyOrdering"]);F!=null&&c(e,["propertyOrdering"],F);const V=u(t,["required"]);V!=null&&c(e,["required"],V);const W=u(t,["title"]);W!=null&&c(e,["title"],W);const se=u(t,["type"]);return se!=null&&c(e,["type"],se),e}function E1(t){const e={},n=u(t,["featureSelectionPreference"]);return n!=null&&c(e,["featureSelectionPreference"],n),e}function A1(t){const e={},n=u(t,["method"]);n!=null&&c(e,["method"],n);const s=u(t,["category"]);s!=null&&c(e,["category"],s);const r=u(t,["threshold"]);return r!=null&&c(e,["threshold"],r),e}function N1(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&c(e,["description"],n);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const r=u(t,["parameters"]);r!=null&&c(e,["parameters"],r);const l=u(t,["parametersJsonSchema"]);l!=null&&c(e,["parametersJsonSchema"],l);const f=u(t,["response"]);f!=null&&c(e,["response"],f);const h=u(t,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function M1(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function R1(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],M1(n)),e}function k1(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function D1(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],k1(n)),e}function I1(){return{}}function U1(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&c(e,["apiKeyString"],n),e}function L1(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&c(e,["apiKeyConfig"],U1(n));const s=u(t,["authType"]);s!=null&&c(e,["authType"],s);const r=u(t,["googleServiceAccountConfig"]);r!=null&&c(e,["googleServiceAccountConfig"],r);const l=u(t,["httpBasicAuthConfig"]);l!=null&&c(e,["httpBasicAuthConfig"],l);const f=u(t,["oauthConfig"]);f!=null&&c(e,["oauthConfig"],f);const h=u(t,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function P1(t){const e={},n=u(t,["authConfig"]);return n!=null&&c(e,["authConfig"],L1(n)),e}function O1(){return{}}function fv(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(b=>N1(b))),c(e,["functionDeclarations"],_)}const s=u(t,["retrieval"]);s!=null&&c(e,["retrieval"],s);const r=u(t,["googleSearch"]);r!=null&&c(e,["googleSearch"],R1(r));const l=u(t,["googleSearchRetrieval"]);l!=null&&c(e,["googleSearchRetrieval"],D1(l)),u(t,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],I1());const h=u(t,["googleMaps"]);h!=null&&c(e,["googleMaps"],P1(h)),u(t,["urlContext"])!=null&&c(e,["urlContext"],O1());const m=u(t,["codeExecution"]);m!=null&&c(e,["codeExecution"],m);const x=u(t,["computerUse"]);return x!=null&&c(e,["computerUse"],x),e}function j1(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function V1(t){const e={},n=u(t,["latitude"]);n!=null&&c(e,["latitude"],n);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function q1(t){const e={},n=u(t,["latLng"]);n!=null&&c(e,["latLng"],V1(n));const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function B1(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],j1(n));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],q1(s)),e}function $1(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function z1(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],$1(n)),e}function G1(t){const e={},n=u(t,["voiceConfig"]);if(n!=null&&c(e,["voiceConfig"],z1(n)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function F1(t){const e={},n=u(t,["includeThoughts"]);n!=null&&c(e,["includeThoughts"],n);const s=u(t,["thinkingBudget"]);return s!=null&&c(e,["thinkingBudget"],s),e}function H1(t,e,n){const s={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&c(n,["systemInstruction"],Xo(Bt(r)));const l=u(e,["temperature"]);l!=null&&c(s,["temperature"],l);const f=u(e,["topP"]);f!=null&&c(s,["topP"],f);const h=u(e,["topK"]);h!=null&&c(s,["topK"],h);const g=u(e,["candidateCount"]);g!=null&&c(s,["candidateCount"],g);const m=u(e,["maxOutputTokens"]);m!=null&&c(s,["maxOutputTokens"],m);const x=u(e,["stopSequences"]);x!=null&&c(s,["stopSequences"],x);const _=u(e,["responseLogprobs"]);_!=null&&c(s,["responseLogprobs"],_);const b=u(e,["logprobs"]);b!=null&&c(s,["logprobs"],b);const C=u(e,["presencePenalty"]);C!=null&&c(s,["presencePenalty"],C);const E=u(e,["frequencyPenalty"]);E!=null&&c(s,["frequencyPenalty"],E);const N=u(e,["seed"]);N!=null&&c(s,["seed"],N);const D=u(e,["responseMimeType"]);D!=null&&c(s,["responseMimeType"],D);const B=u(e,["responseSchema"]);B!=null&&c(s,["responseSchema"],C1(pa(B)));const z=u(e,["responseJsonSchema"]);z!=null&&c(s,["responseJsonSchema"],z);const U=u(e,["routingConfig"]);U!=null&&c(s,["routingConfig"],U);const F=u(e,["modelSelectionConfig"]);F!=null&&c(s,["modelConfig"],E1(F));const V=u(e,["safetySettings"]);if(n!==void 0&&V!=null){let Ce=V;Array.isArray(Ce)&&(Ce=Ce.map(q=>A1(q))),c(n,["safetySettings"],Ce)}const W=u(e,["tools"]);if(n!==void 0&&W!=null){let Ce=Zo(W);Array.isArray(Ce)&&(Ce=Ce.map(q=>fv(Yo(q)))),c(n,["tools"],Ce)}const se=u(e,["toolConfig"]);n!==void 0&&se!=null&&c(n,["toolConfig"],B1(se));const ye=u(e,["labels"]);n!==void 0&&ye!=null&&c(n,["labels"],ye);const ne=u(e,["cachedContent"]);n!==void 0&&ne!=null&&c(n,["cachedContent"],pi(t,ne));const oe=u(e,["responseModalities"]);oe!=null&&c(s,["responseModalities"],oe);const re=u(e,["mediaResolution"]);re!=null&&c(s,["mediaResolution"],re);const Q=u(e,["speechConfig"]);Q!=null&&c(s,["speechConfig"],G1(gf(Q)));const Se=u(e,["audioTimestamp"]);Se!=null&&c(s,["audioTimestamp"],Se);const Fe=u(e,["thinkingConfig"]);return Fe!=null&&c(s,["thinkingConfig"],F1(Fe)),s}function $0(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Ke(t,s));const r=u(e,["contents"]);if(r!=null){let f=wn(r);Array.isArray(f)&&(f=f.map(h=>Xo(h))),c(n,["contents"],f)}const l=u(e,["config"]);return l!=null&&c(n,["generationConfig"],H1(t,l,n)),n}function J1(t,e){const n={},s=u(t,["taskType"]);e!==void 0&&s!=null&&c(e,["instances[]","task_type"],s);const r=u(t,["title"]);e!==void 0&&r!=null&&c(e,["instances[]","title"],r);const l=u(t,["outputDimensionality"]);e!==void 0&&l!=null&&c(e,["parameters","outputDimensionality"],l);const f=u(t,["mimeType"]);e!==void 0&&f!=null&&c(e,["instances[]","mimeType"],f);const h=u(t,["autoTruncate"]);return e!==void 0&&h!=null&&c(e,["parameters","autoTruncate"],h),n}function Y1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Ke(t,s));const r=u(e,["contents"]);r!=null&&c(n,["instances[]","content"],Yy(t,r));const l=u(e,["config"]);return l!=null&&c(n,["config"],J1(l,n)),n}function Z1(t,e){const n={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const r=u(t,["negativePrompt"]);e!==void 0&&r!=null&&c(e,["parameters","negativePrompt"],r);const l=u(t,["numberOfImages"]);e!==void 0&&l!=null&&c(e,["parameters","sampleCount"],l);const f=u(t,["aspectRatio"]);e!==void 0&&f!=null&&c(e,["parameters","aspectRatio"],f);const h=u(t,["guidanceScale"]);e!==void 0&&h!=null&&c(e,["parameters","guidanceScale"],h);const g=u(t,["seed"]);e!==void 0&&g!=null&&c(e,["parameters","seed"],g);const m=u(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&c(e,["parameters","safetySetting"],m);const x=u(t,["personGeneration"]);e!==void 0&&x!=null&&c(e,["parameters","personGeneration"],x);const _=u(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&c(e,["parameters","includeSafetyAttributes"],_);const b=u(t,["includeRaiReason"]);e!==void 0&&b!=null&&c(e,["parameters","includeRaiReason"],b);const C=u(t,["language"]);e!==void 0&&C!=null&&c(e,["parameters","language"],C);const E=u(t,["outputMimeType"]);e!==void 0&&E!=null&&c(e,["parameters","outputOptions","mimeType"],E);const N=u(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&c(e,["parameters","outputOptions","compressionQuality"],N);const D=u(t,["addWatermark"]);e!==void 0&&D!=null&&c(e,["parameters","addWatermark"],D);const B=u(t,["enhancePrompt"]);return e!==void 0&&B!=null&&c(e,["parameters","enhancePrompt"],B),n}function K1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Ke(t,s));const r=u(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const l=u(e,["config"]);return l!=null&&c(n,["config"],Z1(l,n)),n}function ru(t){const e={},n=u(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);const s=u(t,["imageBytes"]);s!=null&&c(e,["bytesBase64Encoded"],gi(s));const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function X1(t){const e={},n=u(t,["maskMode"]);n!=null&&c(e,["maskMode"],n);const s=u(t,["segmentationClasses"]);s!=null&&c(e,["maskClasses"],s);const r=u(t,["maskDilation"]);return r!=null&&c(e,["dilation"],r),e}function W1(t){const e={},n=u(t,["controlType"]);n!=null&&c(e,["controlType"],n);const s=u(t,["enableControlImageComputation"]);return s!=null&&c(e,["computeControl"],s),e}function Q1(t){const e={},n=u(t,["styleDescription"]);return n!=null&&c(e,["styleDescription"],n),e}function eA(t){const e={},n=u(t,["subjectType"]);n!=null&&c(e,["subjectType"],n);const s=u(t,["subjectDescription"]);return s!=null&&c(e,["subjectDescription"],s),e}function tA(t){const e={},n=u(t,["referenceImage"]);n!=null&&c(e,["referenceImage"],ru(n));const s=u(t,["referenceId"]);s!=null&&c(e,["referenceId"],s);const r=u(t,["referenceType"]);r!=null&&c(e,["referenceType"],r);const l=u(t,["maskImageConfig"]);l!=null&&c(e,["maskImageConfig"],X1(l));const f=u(t,["controlImageConfig"]);f!=null&&c(e,["controlImageConfig"],W1(f));const h=u(t,["styleImageConfig"]);h!=null&&c(e,["styleImageConfig"],Q1(h));const g=u(t,["subjectImageConfig"]);return g!=null&&c(e,["subjectImageConfig"],eA(g)),e}function nA(t,e){const n={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const r=u(t,["negativePrompt"]);e!==void 0&&r!=null&&c(e,["parameters","negativePrompt"],r);const l=u(t,["numberOfImages"]);e!==void 0&&l!=null&&c(e,["parameters","sampleCount"],l);const f=u(t,["aspectRatio"]);e!==void 0&&f!=null&&c(e,["parameters","aspectRatio"],f);const h=u(t,["guidanceScale"]);e!==void 0&&h!=null&&c(e,["parameters","guidanceScale"],h);const g=u(t,["seed"]);e!==void 0&&g!=null&&c(e,["parameters","seed"],g);const m=u(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&c(e,["parameters","safetySetting"],m);const x=u(t,["personGeneration"]);e!==void 0&&x!=null&&c(e,["parameters","personGeneration"],x);const _=u(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&c(e,["parameters","includeSafetyAttributes"],_);const b=u(t,["includeRaiReason"]);e!==void 0&&b!=null&&c(e,["parameters","includeRaiReason"],b);const C=u(t,["language"]);e!==void 0&&C!=null&&c(e,["parameters","language"],C);const E=u(t,["outputMimeType"]);e!==void 0&&E!=null&&c(e,["parameters","outputOptions","mimeType"],E);const N=u(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&c(e,["parameters","outputOptions","compressionQuality"],N);const D=u(t,["editMode"]);e!==void 0&&D!=null&&c(e,["parameters","editMode"],D);const B=u(t,["baseSteps"]);return e!==void 0&&B!=null&&c(e,["parameters","editConfig","baseSteps"],B),n}function iA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Ke(t,s));const r=u(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const l=u(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>tA(g))),c(n,["instances[0]","referenceImages"],h)}const f=u(e,["config"]);return f!=null&&c(n,["config"],nA(f,n)),n}function sA(t,e){const n={},s=u(t,["includeRaiReason"]);e!==void 0&&s!=null&&c(e,["parameters","includeRaiReason"],s);const r=u(t,["outputMimeType"]);e!==void 0&&r!=null&&c(e,["parameters","outputOptions","mimeType"],r);const l=u(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&c(e,["parameters","outputOptions","compressionQuality"],l);const f=u(t,["enhanceInputImage"]);e!==void 0&&f!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],f);const h=u(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const g=u(t,["numberOfImages"]);e!==void 0&&g!=null&&c(e,["parameters","sampleCount"],g);const m=u(t,["mode"]);return e!==void 0&&m!=null&&c(e,["parameters","mode"],m),n}function oA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Ke(t,s));const r=u(e,["image"]);r!=null&&c(n,["instances[0]","image"],ru(r));const l=u(e,["upscaleFactor"]);l!=null&&c(n,["parameters","upscaleConfig","upscaleFactor"],l);const f=u(e,["config"]);return f!=null&&c(n,["config"],sA(f,n)),n}function rA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","name"],Ke(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function aA(t,e,n){const s={},r=u(e,["pageSize"]);n!==void 0&&r!=null&&c(n,["_query","pageSize"],r);const l=u(e,["pageToken"]);n!==void 0&&l!=null&&c(n,["_query","pageToken"],l);const f=u(e,["filter"]);n!==void 0&&f!=null&&c(n,["_query","filter"],f);const h=u(e,["queryBase"]);return n!==void 0&&h!=null&&c(n,["_url","models_url"],Xy(t,h)),s}function lA(t,e){const n={},s=u(e,["config"]);return s!=null&&c(n,["config"],aA(t,s,n)),n}function uA(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const r=u(t,["description"]);e!==void 0&&r!=null&&c(e,["description"],r);const l=u(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&c(e,["defaultCheckpointId"],l),n}function cA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Ke(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],uA(r,n)),n}function dA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","name"],Ke(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function fA(t,e){const n={},s=u(t,["systemInstruction"]);e!==void 0&&s!=null&&c(e,["systemInstruction"],Xo(Bt(s)));const r=u(t,["tools"]);if(e!==void 0&&r!=null){let f=r;Array.isArray(f)&&(f=f.map(h=>fv(h))),c(e,["tools"],f)}const l=u(t,["generationConfig"]);return e!==void 0&&l!=null&&c(e,["generationConfig"],l),n}function hA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Ke(t,s));const r=u(e,["contents"]);if(r!=null){let f=wn(r);Array.isArray(f)&&(f=f.map(h=>Xo(h))),c(n,["contents"],f)}const l=u(e,["config"]);return l!=null&&c(n,["config"],fA(l,n)),n}function mA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Ke(t,s));const r=u(e,["contents"]);if(r!=null){let f=wn(r);Array.isArray(f)&&(f=f.map(h=>Xo(h))),c(n,["contents"],f)}const l=u(e,["config"]);return l!=null&&c(n,["config"],l),n}function pA(t){const e={},n=u(t,["uri"]);n!=null&&c(e,["gcsUri"],n);const s=u(t,["videoBytes"]);s!=null&&c(e,["bytesBase64Encoded"],gi(s));const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function gA(t,e){const n={},s=u(t,["numberOfVideos"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&c(e,["parameters","storageUri"],r);const l=u(t,["fps"]);e!==void 0&&l!=null&&c(e,["parameters","fps"],l);const f=u(t,["durationSeconds"]);e!==void 0&&f!=null&&c(e,["parameters","durationSeconds"],f);const h=u(t,["seed"]);e!==void 0&&h!=null&&c(e,["parameters","seed"],h);const g=u(t,["aspectRatio"]);e!==void 0&&g!=null&&c(e,["parameters","aspectRatio"],g);const m=u(t,["resolution"]);e!==void 0&&m!=null&&c(e,["parameters","resolution"],m);const x=u(t,["personGeneration"]);e!==void 0&&x!=null&&c(e,["parameters","personGeneration"],x);const _=u(t,["pubsubTopic"]);e!==void 0&&_!=null&&c(e,["parameters","pubsubTopic"],_);const b=u(t,["negativePrompt"]);e!==void 0&&b!=null&&c(e,["parameters","negativePrompt"],b);const C=u(t,["enhancePrompt"]);e!==void 0&&C!=null&&c(e,["parameters","enhancePrompt"],C);const E=u(t,["generateAudio"]);e!==void 0&&E!=null&&c(e,["parameters","generateAudio"],E);const N=u(t,["lastFrame"]);e!==void 0&&N!=null&&c(e,["instances[0]","lastFrame"],ru(N));const D=u(t,["compressionQuality"]);return e!==void 0&&D!=null&&c(e,["parameters","compressionQuality"],D),n}function yA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Ke(t,s));const r=u(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const l=u(e,["image"]);l!=null&&c(n,["instances[0]","image"],ru(l));const f=u(e,["video"]);f!=null&&c(n,["instances[0]","video"],pA(f));const h=u(e,["config"]);return h!=null&&c(n,["config"],gA(h,n)),n}function vA(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function xA(t){const e={},n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function _A(t){const e={},n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function TA(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],vA(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],xA(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],_A(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function bA(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>TA(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function wA(t){const e={},n=u(t,["citationSources"]);return n!=null&&c(e,["citations"],n),e}function SA(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&c(e,["retrievedUrl"],n);const s=u(t,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function CA(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>SA(r))),c(e,["urlMetadata"],s)}return e}function EA(t){const e={},n=u(t,["content"]);n!=null&&c(e,["content"],bA(n));const s=u(t,["citationMetadata"]);s!=null&&c(e,["citationMetadata"],wA(s));const r=u(t,["tokenCount"]);r!=null&&c(e,["tokenCount"],r);const l=u(t,["finishReason"]);l!=null&&c(e,["finishReason"],l);const f=u(t,["urlContextMetadata"]);f!=null&&c(e,["urlContextMetadata"],CA(f));const h=u(t,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const g=u(t,["groundingMetadata"]);g!=null&&c(e,["groundingMetadata"],g);const m=u(t,["index"]);m!=null&&c(e,["index"],m);const x=u(t,["logprobsResult"]);x!=null&&c(e,["logprobsResult"],x);const _=u(t,["safetyRatings"]);return _!=null&&c(e,["safetyRatings"],_),e}function z0(t){const e={},n=u(t,["candidates"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>EA(h))),c(e,["candidates"],f)}const s=u(t,["modelVersion"]);s!=null&&c(e,["modelVersion"],s);const r=u(t,["promptFeedback"]);r!=null&&c(e,["promptFeedback"],r);const l=u(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function AA(t){const e={},n=u(t,["values"]);return n!=null&&c(e,["values"],n),e}function NA(){return{}}function MA(t){const e={},n=u(t,["embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>AA(l))),c(e,["embeddings"],r)}return u(t,["metadata"])!=null&&c(e,["metadata"],NA()),e}function RA(t){const e={},n=u(t,["bytesBase64Encoded"]);n!=null&&c(e,["imageBytes"],gi(n));const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function hv(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);const s=u(t,["safetyAttributes","scores"]);s!=null&&c(e,["scores"],s);const r=u(t,["contentType"]);return r!=null&&c(e,["contentType"],r),e}function kA(t){const e={},n=u(t,["_self"]);n!=null&&c(e,["image"],RA(n));const s=u(t,["raiFilteredReason"]);s!=null&&c(e,["raiFilteredReason"],s);const r=u(t,["_self"]);return r!=null&&c(e,["safetyAttributes"],hv(r)),e}function DA(t){const e={},n=u(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>kA(l))),c(e,["generatedImages"],r)}const s=u(t,["positivePromptSafetyAttributes"]);return s!=null&&c(e,["positivePromptSafetyAttributes"],hv(s)),e}function IA(t){const e={},n=u(t,["baseModel"]);n!=null&&c(e,["baseModel"],n);const s=u(t,["createTime"]);s!=null&&c(e,["createTime"],s);const r=u(t,["updateTime"]);return r!=null&&c(e,["updateTime"],r),e}function Kd(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["description"]);r!=null&&c(e,["description"],r);const l=u(t,["version"]);l!=null&&c(e,["version"],l);const f=u(t,["_self"]);f!=null&&c(e,["tunedModelInfo"],IA(f));const h=u(t,["inputTokenLimit"]);h!=null&&c(e,["inputTokenLimit"],h);const g=u(t,["outputTokenLimit"]);g!=null&&c(e,["outputTokenLimit"],g);const m=u(t,["supportedGenerationMethods"]);return m!=null&&c(e,["supportedActions"],m),e}function UA(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["_self"]);if(s!=null){let r=Wy(s);Array.isArray(r)&&(r=r.map(l=>Kd(l))),c(e,["models"],r)}return e}function LA(){return{}}function PA(t){const e={},n=u(t,["totalTokens"]);n!=null&&c(e,["totalTokens"],n);const s=u(t,["cachedContentTokenCount"]);return s!=null&&c(e,["cachedContentTokenCount"],s),e}function OA(t){const e={},n=u(t,["video","uri"]);n!=null&&c(e,["uri"],n);const s=u(t,["video","encodedVideo"]);s!=null&&c(e,["videoBytes"],gi(s));const r=u(t,["encoding"]);return r!=null&&c(e,["mimeType"],r),e}function jA(t){const e={},n=u(t,["_self"]);return n!=null&&c(e,["video"],OA(n)),e}function VA(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(f=>jA(f))),c(e,["generatedVideos"],l)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&c(e,["raiMediaFilteredReasons"],r),e}function qA(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const r=u(t,["done"]);r!=null&&c(e,["done"],r);const l=u(t,["error"]);l!=null&&c(e,["error"],l);const f=u(t,["response","generateVideoResponse"]);return f!=null&&c(e,["response"],VA(f)),e}function BA(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function $A(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function zA(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function GA(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],BA(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],$A(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],zA(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function FA(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>GA(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function HA(t){const e={},n=u(t,["citations"]);return n!=null&&c(e,["citations"],n),e}function JA(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&c(e,["retrievedUrl"],n);const s=u(t,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function YA(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>JA(r))),c(e,["urlMetadata"],s)}return e}function ZA(t){const e={},n=u(t,["content"]);n!=null&&c(e,["content"],FA(n));const s=u(t,["citationMetadata"]);s!=null&&c(e,["citationMetadata"],HA(s));const r=u(t,["finishMessage"]);r!=null&&c(e,["finishMessage"],r);const l=u(t,["finishReason"]);l!=null&&c(e,["finishReason"],l);const f=u(t,["urlContextMetadata"]);f!=null&&c(e,["urlContextMetadata"],YA(f));const h=u(t,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const g=u(t,["groundingMetadata"]);g!=null&&c(e,["groundingMetadata"],g);const m=u(t,["index"]);m!=null&&c(e,["index"],m);const x=u(t,["logprobsResult"]);x!=null&&c(e,["logprobsResult"],x);const _=u(t,["safetyRatings"]);return _!=null&&c(e,["safetyRatings"],_),e}function G0(t){const e={},n=u(t,["candidates"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(m=>ZA(m))),c(e,["candidates"],g)}const s=u(t,["createTime"]);s!=null&&c(e,["createTime"],s);const r=u(t,["responseId"]);r!=null&&c(e,["responseId"],r);const l=u(t,["modelVersion"]);l!=null&&c(e,["modelVersion"],l);const f=u(t,["promptFeedback"]);f!=null&&c(e,["promptFeedback"],f);const h=u(t,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function KA(t){const e={},n=u(t,["truncated"]);n!=null&&c(e,["truncated"],n);const s=u(t,["token_count"]);return s!=null&&c(e,["tokenCount"],s),e}function XA(t){const e={},n=u(t,["values"]);n!=null&&c(e,["values"],n);const s=u(t,["statistics"]);return s!=null&&c(e,["statistics"],KA(s)),e}function WA(t){const e={},n=u(t,["billableCharacterCount"]);return n!=null&&c(e,["billableCharacterCount"],n),e}function QA(t){const e={},n=u(t,["predictions[]","embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>XA(l))),c(e,["embeddings"],r)}const s=u(t,["metadata"]);return s!=null&&c(e,["metadata"],WA(s)),e}function e2(t){const e={},n=u(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);const s=u(t,["bytesBase64Encoded"]);s!=null&&c(e,["imageBytes"],gi(s));const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function mv(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);const s=u(t,["safetyAttributes","scores"]);s!=null&&c(e,["scores"],s);const r=u(t,["contentType"]);return r!=null&&c(e,["contentType"],r),e}function vf(t){const e={},n=u(t,["_self"]);n!=null&&c(e,["image"],e2(n));const s=u(t,["raiFilteredReason"]);s!=null&&c(e,["raiFilteredReason"],s);const r=u(t,["_self"]);r!=null&&c(e,["safetyAttributes"],mv(r));const l=u(t,["prompt"]);return l!=null&&c(e,["enhancedPrompt"],l),e}function t2(t){const e={},n=u(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>vf(l))),c(e,["generatedImages"],r)}const s=u(t,["positivePromptSafetyAttributes"]);return s!=null&&c(e,["positivePromptSafetyAttributes"],mv(s)),e}function n2(t){const e={},n=u(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>vf(r))),c(e,["generatedImages"],s)}return e}function i2(t){const e={},n=u(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>vf(r))),c(e,["generatedImages"],s)}return e}function s2(t){const e={},n=u(t,["endpoint"]);n!=null&&c(e,["name"],n);const s=u(t,["deployedModelId"]);return s!=null&&c(e,["deployedModelId"],s),e}function o2(t){const e={},n=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&c(e,["baseModel"],n);const s=u(t,["createTime"]);s!=null&&c(e,["createTime"],s);const r=u(t,["updateTime"]);return r!=null&&c(e,["updateTime"],r),e}function r2(t){const e={},n=u(t,["checkpointId"]);n!=null&&c(e,["checkpointId"],n);const s=u(t,["epoch"]);s!=null&&c(e,["epoch"],s);const r=u(t,["step"]);return r!=null&&c(e,["step"],r),e}function Xd(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["description"]);r!=null&&c(e,["description"],r);const l=u(t,["versionId"]);l!=null&&c(e,["version"],l);const f=u(t,["deployedModels"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(b=>s2(b))),c(e,["endpoints"],_)}const h=u(t,["labels"]);h!=null&&c(e,["labels"],h);const g=u(t,["_self"]);g!=null&&c(e,["tunedModelInfo"],o2(g));const m=u(t,["defaultCheckpointId"]);m!=null&&c(e,["defaultCheckpointId"],m);const x=u(t,["checkpoints"]);if(x!=null){let _=x;Array.isArray(_)&&(_=_.map(b=>r2(b))),c(e,["checkpoints"],_)}return e}function a2(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["_self"]);if(s!=null){let r=Wy(s);Array.isArray(r)&&(r=r.map(l=>Xd(l))),c(e,["models"],r)}return e}function l2(){return{}}function u2(t){const e={},n=u(t,["totalTokens"]);return n!=null&&c(e,["totalTokens"],n),e}function c2(t){const e={},n=u(t,["tokensInfo"]);return n!=null&&c(e,["tokensInfo"],n),e}function d2(t){const e={},n=u(t,["gcsUri"]);n!=null&&c(e,["uri"],n);const s=u(t,["bytesBase64Encoded"]);s!=null&&c(e,["videoBytes"],gi(s));const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function f2(t){const e={},n=u(t,["_self"]);return n!=null&&c(e,["video"],d2(n)),e}function h2(t){const e={},n=u(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(f=>f2(f))),c(e,["generatedVideos"],l)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&c(e,["raiMediaFilteredReasons"],r),e}function m2(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const r=u(t,["done"]);r!=null&&c(e,["done"],r);const l=u(t,["error"]);l!=null&&c(e,["error"],l);const f=u(t,["response"]);return f!=null&&c(e,["response"],h2(f)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p2="Content-Type",g2="X-Server-Timeout",y2="User-Agent",Wd="x-goog-api-client",v2="1.8.0",x2=`google-genai-sdk/${v2}`,_2="v1beta1",T2="v1beta",F0=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class b2{constructor(e){var n,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:_2,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:T2,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const r=[this.getRequestUrlInternal(n)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[f,h]of Object.entries(e.queryParams))r.searchParams.append(f,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(n))typeof l=="object"?s[r]=Object.assign(Object.assign({},s[r]),l):l!==void 0&&(s[r]=l);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s){if(n&&n.timeout||s){const r=new AbortController,l=r.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>r.abort(),n.timeout),s&&s.addEventListener("abort",()=>{r.abort()}),e.signal=l}return n&&n.extraBody!==null&&w2(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await H0(r),new Gd(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await H0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return Vo(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let f="";for(;;){const{done:h,value:g}=yield it(r.read());if(h){if(f.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=l.decode(g);try{const _=JSON.parse(m);if("error"in _){const b=JSON.parse(JSON.stringify(_.error)),C=b.status,E=b.code,N=`got status: ${C}. ${JSON.stringify(_)}`;if(E>=400&&E<600)throw new su({message:N,status:E})}}catch(_){if(_.name==="ApiError")throw _}f+=m;let x=f.match(F0);for(;x;){const _=x[1];try{const b=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield it(new Gd(b)),f=f.slice(x[0].length),x=f.match(F0)}catch(b){throw new Error(`exception parsing stream chunk ${_}. ${b}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=x2+" "+this.clientOptions.userAgentExtra;return e[y2]=n,e[Wd]=n,e[p2]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[s,r]of Object.entries(e.headers))n.append(s,r);e.timeout&&e.timeout>0&&n.append(g2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var s;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,f=await l.stat(e);r.sizeBytes=String(f.size);const h=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:f.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const g=await this.fetchUploadUrl(r,n);return l.upload(e,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var s;let r={};n!=null&&n.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},f=await this.request({path:pe("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:r});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(s=f==null?void 0:f.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function H0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(s);throw n>=400&&n<600?new su({message:r,status:n}):new Error(r)}}function w2(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,f){const h=Object.assign({},l);for(const g in f)if(Object.prototype.hasOwnProperty.call(f,g)){const m=f[g],x=h[g];m&&typeof m=="object"&&!Array.isArray(m)&&x&&typeof x=="object"&&!Array.isArray(x)?h[g]=s(x,m):(x&&m&&typeof x!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof x}, New type: ${typeof m}. Overwriting.`),h[g]=m)}return h}const r=s(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S2="mcp_used/unknown";function pv(t){for(const e of t)if(xf(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function gv(t){var e;const n=(e=t[Wd])!==null&&e!==void 0?e:"";t[Wd]=(n+` ${S2}`).trimStart()}function C2(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>xf(r)))!==null&&s!==void 0?s:!1}function E2(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!xf(r)))!==null&&s!==void 0?s:!1}function xf(t){return t!==null&&typeof t=="object"&&t instanceof _f}function A2(t,e=100){return Vo(this,arguments,function*(){let s,r=0;for(;r<e;){const l=yield it(t.listTools({cursor:s}));for(const f of l.tools)yield yield it(f),r++;if(!l.nextCursor)break;s=l.nextCursor}})}class _f{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new _f(e,n)}async initialize(){var e,n,s,r;if(this.mcpTools.length>0)return;const l={},f=[];for(const x of this.mcpClients)try{for(var h=!0,g=(n=void 0,la(A2(x))),m;m=await g.next(),e=m.done,!e;h=!0){r=m.value,h=!1;const _=r;f.push(_);const b=_.name;if(l[b])throw new Error(`Duplicate function name ${b} found in MCP tools. Please ensure function names are unique.`);l[b]=x}}catch(_){n={error:_}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(n)throw n.error}}this.mcpTools=f,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),_b(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const f=await r.callTool({name:s.name,arguments:s.args},void 0,l);n.push({functionResponse:{name:s.name,response:f.isError?{error:f}:f}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function N2(t,e,n){const s=new ub;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data);const l=PE(r);Object.assign(s,l),e(s)}class M2{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),f=D2(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const x=new Promise(U=>{m=U}),_=e.callbacks,b=function(){m({})},C=this.apiClient,E={onopen:b,onmessage:U=>{N2(C,_.onmessage,U)},onerror:(n=_==null?void 0:_.onerror)!==null&&n!==void 0?n:function(U){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(U){}},N=this.webSocketFactory.create(g,k2(f),E);N.connect(),await x;const D=Ke(this.apiClient,e.model),B=uv({model:D}),z=Zd({setup:B});return N.send(JSON.stringify(z)),new R2(N,this.apiClient)}}class R2{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=KC(e),s=cv(n);this.conn.send(JSON.stringify({clientContent:s}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=XC(e),s=Zd(n);this.conn.send(JSON.stringify(s))}sendPlaybackControl(e){const n=Zd({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Oo.PLAY)}pause(){this.sendPlaybackControl(Oo.PAUSE)}stop(){this.sendPlaybackControl(Oo.STOP)}resetContext(){this.sendPlaybackControl(Oo.RESET_CONTEXT)}close(){this.conn.close()}}function k2(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function D2(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function U2(t,e,n){const s=new lb;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const l=JSON.parse(r);if(t.isVertexAI()){const f=AE(l);Object.assign(s,f)}else{const f=EE(l);Object.assign(s,f)}e(s)}class L2{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new M2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,r,l,f,h;const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let x;const _=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&pv(e.config.tools)&&gv(_);const b=V2(_);if(this.apiClient.isVertexAI())x=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(b);else{const ne=this.apiClient.getApiKey();let oe="BidiGenerateContent",re="key";ne!=null&&ne.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),oe="BidiGenerateContentConstrained",re="access_token"),x=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${oe}?${re}=${ne}`}let C=()=>{};const E=new Promise(ne=>{C=ne}),N=e.callbacks,D=function(){var ne;(ne=N==null?void 0:N.onopen)===null||ne===void 0||ne.call(N),C({})},B=this.apiClient,z={onopen:D,onmessage:ne=>{U2(B,N.onmessage,ne)},onerror:(n=N==null?void 0:N.onerror)!==null&&n!==void 0?n:function(ne){},onclose:(s=N==null?void 0:N.onclose)!==null&&s!==void 0?s:function(ne){}},U=this.webSocketFactory.create(x,j2(b),z);U.connect(),await E;let F=Ke(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&F.startsWith("publishers/")){const ne=this.apiClient.getProject(),oe=this.apiClient.getLocation();F=`projects/${ne}/locations/${oe}/`+F}let V={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Xl.AUDIO]}:e.config.responseModalities=[Xl.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const W=(h=(f=e.config)===null||f===void 0?void 0:f.tools)!==null&&h!==void 0?h:[],se=[];for(const ne of W)if(this.isCallableTool(ne)){const oe=ne;se.push(await oe.tool())}else se.push(ne);se.length>0&&(e.config.tools=se);const ye={model:F,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?V=zC(this.apiClient,ye):V=$C(this.apiClient,ye),delete V.config,U.send(JSON.stringify(V)),new O2(U,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const P2={turnComplete:!0};class O2{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=wn(n.turns),e.isVertexAI()?s=s.map(r=>Xo(r)):s=s.map(r=>ou(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(I2)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},P2),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:ZC(e)}:n={realtimeInput:YC(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function j2(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function V2(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J0=10;function Y0(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const f of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(zl(f)){r=!0;break}if(!r)return!0;const l=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function zl(t){return"callTool"in t&&typeof t.callTool=="function"}function Z0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q2 extends Ls{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,r,l,f,h;const g=await this.processParamsForMcpUsage(n);if(!C2(n)||Y0(n.config))return await this.generateContentInternal(g);if(E2(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let m,x;const _=wn(g.contents),b=(l=(r=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:J0;let C=0;for(;C<b&&(m=await this.generateContentInternal(g),!(!m.functionCalls||m.functionCalls.length===0));){const E=m.candidates[0].content,N=[];for(const D of(h=(f=n.config)===null||f===void 0?void 0:f.tools)!==null&&h!==void 0?h:[])if(zl(D)){const z=await D.callTool(m.functionCalls);N.push(...z)}C++,x={role:"user",parts:N},g.contents=wn(g.contents),g.contents.push(E),g.contents.push(x),Z0(g.config)&&(_.push(E),_.push(x))}return Z0(g.config)&&(m.automaticFunctionCallingHistory=_),m},this.generateContentStream=async n=>{if(Y0(n.config)){const s=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var r;let l;const f=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:f.push(g);let h;return l?h={generatedImages:f,positivePromptSafetyAttributes:l}:h={generatedImages:f},h}),this.list=async n=>{var s;const f={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!f.config.queryBase){if(!((s=f.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");f.config.filter="labels.tune-type:*"}return new xa(Us.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(f),f)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(r)}}async processParamsForMcpUsage(e){var n,s,r;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const f=await Promise.all(l.map(async g=>zl(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:f})};if(h.config.tools=f,e.config&&e.config.tools&&pv(e.config.tools)){const g=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),gv(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var n,s,r;const l=new Map;for(const f of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(zl(f)){const h=f,g=await h.tool();for(const m of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,h)}}return l}async processAfcStream(e){var n,s,r;const l=(r=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:J0;let f=!1,h=0;const g=await this.initAfcToolsMap(e);return function(m,x,_){var b,C;return Vo(this,arguments,function*(){for(var E,N,D,B;h<l;){f&&(h++,f=!1);const V=yield it(m.processParamsForMcpUsage(_)),W=yield it(m.generateContentStreamInternal(V)),se=[],ye=[];try{for(var z=!0,U=(N=void 0,la(W)),F;F=yield it(U.next()),E=F.done,!E;z=!0){B=F.value,z=!1;const ne=B;if(yield yield it(ne),ne.candidates&&(!((b=ne.candidates[0])===null||b===void 0)&&b.content)){ye.push(ne.candidates[0].content);for(const oe of(C=ne.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(h<l&&oe.functionCall){if(!oe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(oe.functionCall.name)){const re=yield it(x.get(oe.functionCall.name).callTool([oe.functionCall]));se.push(...re)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${oe.functionCall.name}`)}}}}catch(ne){N={error:ne}}finally{try{!z&&!E&&(D=U.return)&&(yield it(D.call(U)))}finally{if(N)throw N.error}}if(se.length>0){f=!0;const ne=new ta;ne.candidates=[{content:{role:"user",parts:se}}],yield yield it(ne);const oe=[];oe.push(...ye),oe.push({role:"user",parts:se});const re=wn(_.contents).concat(oe);_.contents=re}else break}})}(this,g,e)}async generateContentInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=$0(this.apiClient,e);return h=pe("{model}:generateContent",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>{const _=G0(x),b=new ta;return Object.assign(b,_),b})}else{const m=B0(this.apiClient,e);return h=pe("{model}:generateContent",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>{const _=z0(x),b=new ta;return Object.assign(b,_),b})}}async generateContentStreamInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=$0(this.apiClient,e);return h=pe("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),f.then(function(_){return Vo(this,arguments,function*(){var b,C,E,N;try{for(var D=!0,B=la(_),z;z=yield it(B.next()),b=z.done,!b;D=!0){N=z.value,D=!1;const F=G0(yield it(N.json())),V=new ta;Object.assign(V,F),yield yield it(V)}}catch(U){C={error:U}}finally{try{!D&&!b&&(E=B.return)&&(yield it(E.call(B)))}finally{if(C)throw C.error}}})})}else{const m=B0(this.apiClient,e);return h=pe("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),f.then(function(_){return Vo(this,arguments,function*(){var b,C,E,N;try{for(var D=!0,B=la(_),z;z=yield it(B.next()),b=z.done,!b;D=!0){N=z.value,D=!1;const F=z0(yield it(N.json())),V=new ta;Object.assign(V,F),yield yield it(V)}}catch(U){C={error:U}}finally{try{!D&&!b&&(E=B.return)&&(yield it(E.call(B)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=Y1(this.apiClient,e);return h=pe("{model}:predict",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>{const _=QA(x),b=new _0;return Object.assign(b,_),b})}else{const m=a1(this.apiClient,e);return h=pe("{model}:batchEmbedContents",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>{const _=MA(x),b=new _0;return Object.assign(b,_),b})}}async generateImagesInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=K1(this.apiClient,e);return h=pe("{model}:predict",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>{const _=t2(x),b=new T0;return Object.assign(b,_),b})}else{const m=u1(this.apiClient,e);return h=pe("{model}:predict",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>{const _=DA(x),b=new T0;return Object.assign(b,_),b})}}async editImageInternal(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI()){const h=iA(this.apiClient,e);return l=pe("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=n2(g),x=new nb;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI()){const h=oA(this.apiClient,e);return l=pe("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=i2(g),x=new ib;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=rA(this.apiClient,e);return h=pe("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>Xd(x))}else{const m=c1(this.apiClient,e);return h=pe("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>Kd(x))}}async listInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=lA(this.apiClient,e);return h=pe("{models_url}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>{const _=a2(x),b=new b0;return Object.assign(b,_),b})}else{const m=f1(this.apiClient,e);return h=pe("{models_url}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>{const _=UA(x),b=new b0;return Object.assign(b,_),b})}}async update(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=cA(this.apiClient,e);return h=pe("{model}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>Xd(x))}else{const m=m1(this.apiClient,e);return h=pe("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>Kd(x))}}async delete(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=dA(this.apiClient,e);return h=pe("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(()=>{const x=l2(),_=new w0;return Object.assign(_,x),_})}else{const m=p1(this.apiClient,e);return h=pe("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(()=>{const x=LA(),_=new w0;return Object.assign(_,x),_})}}async countTokens(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=hA(this.apiClient,e);return h=pe("{model}:countTokens",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>{const _=u2(x),b=new S0;return Object.assign(b,_),b})}else{const m=y1(this.apiClient,e);return h=pe("{model}:countTokens",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>{const _=PA(x),b=new S0;return Object.assign(b,_),b})}}async computeTokens(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI()){const h=mA(this.apiClient,e);return l=pe("{model}:computeTokens",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=c2(g),x=new sb;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=yA(this.apiClient,e);return h=pe("{model}:predictLongRunning",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>m2(x))}else{const m=_1(this.apiClient,e);return h=pe("{model}:predictLongRunning",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>qA(x))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B2(t){const e={},n=u(t,["operationName"]);n!=null&&c(e,["_url","operationName"],n);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function $2(t){const e={},n=u(t,["operationName"]);n!=null&&c(e,["_url","operationName"],n);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function z2(t){const e={},n=u(t,["operationName"]);n!=null&&c(e,["operationName"],n);const s=u(t,["resourceName"]);s!=null&&c(e,["_url","resourceName"],s);const r=u(t,["config"]);return r!=null&&c(e,["config"],r),e}function G2(t){const e={},n=u(t,["video","uri"]);n!=null&&c(e,["uri"],n);const s=u(t,["video","encodedVideo"]);s!=null&&c(e,["videoBytes"],gi(s));const r=u(t,["encoding"]);return r!=null&&c(e,["mimeType"],r),e}function F2(t){const e={},n=u(t,["_self"]);return n!=null&&c(e,["video"],G2(n)),e}function H2(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(f=>F2(f))),c(e,["generatedVideos"],l)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&c(e,["raiMediaFilteredReasons"],r),e}function J2(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const r=u(t,["done"]);r!=null&&c(e,["done"],r);const l=u(t,["error"]);l!=null&&c(e,["error"],l);const f=u(t,["response","generateVideoResponse"]);return f!=null&&c(e,["response"],H2(f)),e}function Y2(t){const e={},n=u(t,["gcsUri"]);n!=null&&c(e,["uri"],n);const s=u(t,["bytesBase64Encoded"]);s!=null&&c(e,["videoBytes"],gi(s));const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Z2(t){const e={},n=u(t,["_self"]);return n!=null&&c(e,["video"],Y2(n)),e}function K2(t){const e={},n=u(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(f=>Z2(f))),c(e,["generatedVideos"],l)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&c(e,["raiMediaFilteredReasons"],r),e}function K0(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const r=u(t,["done"]);r!=null&&c(e,["done"],r);const l=u(t,["error"]);l!=null&&c(e,["error"],l);const f=u(t,["response"]);return f!=null&&c(e,["response"],K2(f)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X2 extends Ls{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;return s&&"httpOptions"in s&&(l=s.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}})}else return this.getVideosOperationInternal({operationName:n.name,config:s})}async getVideosOperationInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=$2(e);return h=pe("{operationName}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>K0(x))}else{const m=B2(e);return h=pe("{operationName}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>J2(x))}}async fetchPredictVideosOperationInternal(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI()){const h=z2(e);return l=pe("{resourceName}:fetchPredictOperation",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>K0(g))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W2(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function yv(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],W2(n)),e}function Q2(t){const e={},n=u(t,["speaker"]);n!=null&&c(e,["speaker"],n);const s=u(t,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],yv(s)),e}function eN(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Q2(r))),c(e,["speakerVoiceConfigs"],s)}return e}function tN(t){const e={},n=u(t,["voiceConfig"]);n!=null&&c(e,["voiceConfig"],yv(n));const s=u(t,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],eN(s));const r=u(t,["languageCode"]);return r!=null&&c(e,["languageCode"],r),e}function nN(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function iN(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function sN(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function oN(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],nN(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],iN(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],sN(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function rN(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>oN(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function aN(t){const e={},n=u(t,["behavior"]);n!=null&&c(e,["behavior"],n);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const r=u(t,["name"]);r!=null&&c(e,["name"],r);const l=u(t,["parameters"]);l!=null&&c(e,["parameters"],l);const f=u(t,["parametersJsonSchema"]);f!=null&&c(e,["parametersJsonSchema"],f);const h=u(t,["response"]);h!=null&&c(e,["response"],h);const g=u(t,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function lN(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function uN(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],lN(n)),e}function cN(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function dN(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],cN(n)),e}function fN(){return{}}function hN(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(m=>aN(m))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],uN(s));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],dN(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],fN());const f=u(t,["codeExecution"]);f!=null&&c(e,["codeExecution"],f);const h=u(t,["computerUse"]);return h!=null&&c(e,["computerUse"],h),e}function mN(t){const e={},n=u(t,["handle"]);if(n!=null&&c(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function X0(){return{}}function pN(t){const e={},n=u(t,["disabled"]);n!=null&&c(e,["disabled"],n);const s=u(t,["startOfSpeechSensitivity"]);s!=null&&c(e,["startOfSpeechSensitivity"],s);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&c(e,["endOfSpeechSensitivity"],r);const l=u(t,["prefixPaddingMs"]);l!=null&&c(e,["prefixPaddingMs"],l);const f=u(t,["silenceDurationMs"]);return f!=null&&c(e,["silenceDurationMs"],f),e}function gN(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&c(e,["automaticActivityDetection"],pN(n));const s=u(t,["activityHandling"]);s!=null&&c(e,["activityHandling"],s);const r=u(t,["turnCoverage"]);return r!=null&&c(e,["turnCoverage"],r),e}function yN(t){const e={},n=u(t,["targetTokens"]);return n!=null&&c(e,["targetTokens"],n),e}function vN(t){const e={},n=u(t,["triggerTokens"]);n!=null&&c(e,["triggerTokens"],n);const s=u(t,["slidingWindow"]);return s!=null&&c(e,["slidingWindow"],yN(s)),e}function xN(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&c(e,["proactiveAudio"],n),e}function _N(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig"],s);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","responseModalities"],r);const l=u(t,["temperature"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","temperature"],l);const f=u(t,["topP"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","topP"],f);const h=u(t,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const g=u(t,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const m=u(t,["mediaResolution"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","mediaResolution"],m);const x=u(t,["seed"]);e!==void 0&&x!=null&&c(e,["setup","generationConfig","seed"],x);const _=u(t,["speechConfig"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","speechConfig"],tN(yf(_)));const b=u(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=u(t,["systemInstruction"]);e!==void 0&&C!=null&&c(e,["setup","systemInstruction"],rN(Bt(C)));const E=u(t,["tools"]);if(e!==void 0&&E!=null){let V=Zo(E);Array.isArray(V)&&(V=V.map(W=>hN(Yo(W)))),c(e,["setup","tools"],V)}const N=u(t,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],mN(N));const D=u(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&c(e,["setup","inputAudioTranscription"],X0());const B=u(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&c(e,["setup","outputAudioTranscription"],X0());const z=u(t,["realtimeInputConfig"]);e!==void 0&&z!=null&&c(e,["setup","realtimeInputConfig"],gN(z));const U=u(t,["contextWindowCompression"]);e!==void 0&&U!=null&&c(e,["setup","contextWindowCompression"],vN(U));const F=u(t,["proactivity"]);return e!==void 0&&F!=null&&c(e,["setup","proactivity"],xN(F)),n}function TN(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["setup","model"],Ke(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],_N(r,n)),n}function bN(t,e,n){const s={},r=u(e,["expireTime"]);n!==void 0&&r!=null&&c(n,["expireTime"],r);const l=u(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&c(n,["newSessionExpireTime"],l);const f=u(e,["uses"]);n!==void 0&&f!=null&&c(n,["uses"],f);const h=u(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&c(n,["bidiGenerateContentSetup"],TN(t,h));const g=u(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&c(n,["fieldMask"],g),s}function wN(t,e){const n={},s=u(e,["config"]);return s!=null&&c(n,["config"],bN(t,s,n)),n}function SN(t){const e={},n=u(t,["name"]);return n!=null&&c(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CN(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(l=>`${n}.${l}`);e.push(...r)}else e.push(n)}return e.join(",")}function EN(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const l=CN(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const f=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(m=>f.includes(m)?`generationConfig.${m}`:m));const g=[];l&&g.push(l),h.length>0&&g.push(...h),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class AN extends Ls{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=wN(this.apiClient,e);l=pe("auth_tokens",h._url),f=h._query,delete h.config,delete h._url,delete h._query;const g=EN(h,e.config);return r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>SN(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NN(t){const e={},n=u(t,["name"]);n!=null&&c(e,["_url","name"],n);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function MN(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&c(e,["_query","pageToken"],r);const l=u(t,["filter"]);return e!==void 0&&l!=null&&c(e,["_query","filter"],l),n}function RN(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],MN(n,e)),e}function kN(t){const e={},n=u(t,["textInput"]);n!=null&&c(e,["textInput"],n);const s=u(t,["output"]);return s!=null&&c(e,["output"],s),e}function DN(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=u(t,["examples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>kN(r))),c(e,["examples","examples"],s)}return e}function IN(t,e){const n={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=u(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&c(e,["displayName"],s),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=u(t,["epochCount"]);e!==void 0&&r!=null&&c(e,["tuningTask","hyperparameters","epochCount"],r);const l=u(t,["learningRateMultiplier"]);if(l!=null&&c(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=u(t,["batchSize"]);e!==void 0&&f!=null&&c(e,["tuningTask","hyperparameters","batchSize"],f);const h=u(t,["learningRate"]);return e!==void 0&&h!=null&&c(e,["tuningTask","hyperparameters","learningRate"],h),n}function UN(t){const e={},n=u(t,["baseModel"]);n!=null&&c(e,["baseModel"],n);const s=u(t,["trainingDataset"]);s!=null&&c(e,["tuningTask","trainingData"],DN(s));const r=u(t,["config"]);return r!=null&&c(e,["config"],IN(r,e)),e}function LN(t){const e={},n=u(t,["name"]);n!=null&&c(e,["_url","name"],n);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function PN(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&c(e,["_query","pageToken"],r);const l=u(t,["filter"]);return e!==void 0&&l!=null&&c(e,["_query","filter"],l),n}function ON(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],PN(n,e)),e}function jN(t,e){const n={},s=u(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s);const r=u(t,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],r),u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function VN(t,e){const n={},s=u(t,["gcsUri"]);s!=null&&c(n,["validationDatasetUri"],s);const r=u(t,["vertexDatasetResource"]);return e!==void 0&&r!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],r),n}function qN(t,e){const n={},s=u(t,["validationDataset"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec"],VN(s,n));const r=u(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&c(e,["tunedModelDisplayName"],r);const l=u(t,["description"]);e!==void 0&&l!=null&&c(e,["description"],l);const f=u(t,["epochCount"]);e!==void 0&&f!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],f);const h=u(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const g=u(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g);const m=u(t,["adapterSize"]);if(e!==void 0&&m!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],m),u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function BN(t){const e={},n=u(t,["baseModel"]);n!=null&&c(e,["baseModel"],n);const s=u(t,["trainingDataset"]);s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],jN(s,e));const r=u(t,["config"]);return r!=null&&c(e,["config"],qN(r,e)),e}function $N(t){const e={},n=u(t,["name"]);n!=null&&c(e,["model"],n);const s=u(t,["name"]);return s!=null&&c(e,["endpoint"],s),e}function vv(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["state"]);s!=null&&c(e,["state"],Zy(s));const r=u(t,["createTime"]);r!=null&&c(e,["createTime"],r);const l=u(t,["tuningTask","startTime"]);l!=null&&c(e,["startTime"],l);const f=u(t,["tuningTask","completeTime"]);f!=null&&c(e,["endTime"],f);const h=u(t,["updateTime"]);h!=null&&c(e,["updateTime"],h);const g=u(t,["description"]);g!=null&&c(e,["description"],g);const m=u(t,["baseModel"]);m!=null&&c(e,["baseModel"],m);const x=u(t,["_self"]);x!=null&&c(e,["tunedModel"],$N(x));const _=u(t,["distillationSpec"]);_!=null&&c(e,["distillationSpec"],_);const b=u(t,["experiment"]);b!=null&&c(e,["experiment"],b);const C=u(t,["labels"]);C!=null&&c(e,["labels"],C);const E=u(t,["pipelineJob"]);E!=null&&c(e,["pipelineJob"],E);const N=u(t,["satisfiesPzi"]);N!=null&&c(e,["satisfiesPzi"],N);const D=u(t,["satisfiesPzs"]);D!=null&&c(e,["satisfiesPzs"],D);const B=u(t,["serviceAccount"]);B!=null&&c(e,["serviceAccount"],B);const z=u(t,["tunedModelDisplayName"]);return z!=null&&c(e,["tunedModelDisplayName"],z),e}function zN(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>vv(l))),c(e,["tuningJobs"],r)}return e}function GN(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const r=u(t,["done"]);r!=null&&c(e,["done"],r);const l=u(t,["error"]);return l!=null&&c(e,["error"],l),e}function FN(t){const e={},n=u(t,["checkpointId"]);n!=null&&c(e,["checkpointId"],n);const s=u(t,["epoch"]);s!=null&&c(e,["epoch"],s);const r=u(t,["step"]);r!=null&&c(e,["step"],r);const l=u(t,["endpoint"]);return l!=null&&c(e,["endpoint"],l),e}function HN(t){const e={},n=u(t,["model"]);n!=null&&c(e,["model"],n);const s=u(t,["endpoint"]);s!=null&&c(e,["endpoint"],s);const r=u(t,["checkpoints"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(f=>FN(f))),c(e,["checkpoints"],l)}return e}function Qd(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["state"]);s!=null&&c(e,["state"],Zy(s));const r=u(t,["createTime"]);r!=null&&c(e,["createTime"],r);const l=u(t,["startTime"]);l!=null&&c(e,["startTime"],l);const f=u(t,["endTime"]);f!=null&&c(e,["endTime"],f);const h=u(t,["updateTime"]);h!=null&&c(e,["updateTime"],h);const g=u(t,["error"]);g!=null&&c(e,["error"],g);const m=u(t,["description"]);m!=null&&c(e,["description"],m);const x=u(t,["baseModel"]);x!=null&&c(e,["baseModel"],x);const _=u(t,["tunedModel"]);_!=null&&c(e,["tunedModel"],HN(_));const b=u(t,["supervisedTuningSpec"]);b!=null&&c(e,["supervisedTuningSpec"],b);const C=u(t,["tuningDataStats"]);C!=null&&c(e,["tuningDataStats"],C);const E=u(t,["encryptionSpec"]);E!=null&&c(e,["encryptionSpec"],E);const N=u(t,["partnerModelTuningSpec"]);N!=null&&c(e,["partnerModelTuningSpec"],N);const D=u(t,["distillationSpec"]);D!=null&&c(e,["distillationSpec"],D);const B=u(t,["experiment"]);B!=null&&c(e,["experiment"],B);const z=u(t,["labels"]);z!=null&&c(e,["labels"],z);const U=u(t,["pipelineJob"]);U!=null&&c(e,["pipelineJob"],U);const F=u(t,["satisfiesPzi"]);F!=null&&c(e,["satisfiesPzi"],F);const V=u(t,["satisfiesPzs"]);V!=null&&c(e,["satisfiesPzs"],V);const W=u(t,["serviceAccount"]);W!=null&&c(e,["serviceAccount"],W);const se=u(t,["tunedModelDisplayName"]);return se!=null&&c(e,["tunedModelDisplayName"],se),e}function JN(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Qd(l))),c(e,["tuningJobs"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YN extends Ls{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new xa(Us.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const s=await this.tuneMldevInternal(n);let r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:zd.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=LN(e);return h=pe("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>Qd(x))}else{const m=NN(e);return h=pe("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>vv(x))}}async listInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=ON(e);return h=pe("tuningJobs",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>{const _=JN(x),b=new C0;return Object.assign(b,_),b})}else{const m=RN(e);return h=pe("tunedModels",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>{const _=zN(x),b=new C0;return Object.assign(b,_),b})}}async tuneInternal(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI()){const h=BN(e);return l=pe("tuningJobs",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>Qd(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=UN(e);return l=pe("tunedModels",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>GN(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZN{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const KN=1024*1024*8,XN=3,WN=1e3,QN=2,Ad="x-goog-upload-status";async function eM(t,e,n){var s,r,l;let f=0,h=0,g=new Gd(new Response),m="upload";for(f=t.size;h<f;){const _=Math.min(KN,f-h),b=t.slice(h,h+_);h+_>=f&&(m+=", finalize");let C=0,E=WN;for(;C<XN&&(g=await n.request({path:"",body:b,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(h),"Content-Length":String(_)}}}),!(!((s=g==null?void 0:g.headers)===null||s===void 0)&&s[Ad]));)C++,await nM(E),E=E*QN;if(h+=_,((r=g==null?void 0:g.headers)===null||r===void 0?void 0:r[Ad])!=="active")break;if(f<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const x=await(g==null?void 0:g.json());if(((l=g==null?void 0:g.headers)===null||l===void 0?void 0:l[Ad])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return x.file}async function tM(t){return{size:t.size,type:t.type}}function nM(t){return new Promise(e=>setTimeout(e,t))}class iM{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await eM(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sM{create(e,n,s){return new oM(e,n,s)}}class oM{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W0="x-goog-api-key";class rM{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(W0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(W0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aM="gl-node/";class lM{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=tb(e,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const r=new rM(this.apiKey);this.apiClient=new b2({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:aM+"web",uploader:new iM,downloader:new ZN}),this.models=new q2(this.apiClient),this.live=new L2(this.apiClient,r,new sM),this.batches=new Mw(this.apiClient),this.chats=new IS(this.models,this.apiClient),this.caches=new RS(this.apiClient),this.files=new HS(this.apiClient),this.operations=new X2(this.apiClient),this.authTokens=new AN(this.apiClient),this.tunings=new YN(this.apiClient)}}const yi="gemini-2.5-flash-preview-04-17";let ht=null;const Q0=t=>{if(!t){ht=null;return}try{ht=new lM({apiKey:t})}catch(e){console.error("Failed to initialize Gemini AI:",e),ht=null}},Wo=t=>{const e=n=>{const{position:s,extendedDetails:r,...l}=n,f={...l};if(r){const{reportDeck:h,attachments:g,subSteps:m,decisions:x,..._}=r,b={..._};h&&h.slides.length>0&&(b.reportDeckExists=!0,b.reportDeckSlideCount=h.slides.length),g&&g.length>0&&(b.attachments=g.map(C=>({id:C.id,name:C.name,type:C.type}))),m&&m.length>0&&(b.subSteps=m.map(C=>{const{position:E,attachments:N,actionItems:D,...B}=C,z={...B};return N&&N.length>0&&(z.attachments=N.map(U=>({id:U.id,name:U.name,type:U.type}))),D&&D.length>0&&(z.actionItems=D.map(U=>{const{report:F,...V}=U,W={...V};if(F){const{attachments:se,...ye}=F,ne={...ye};se&&se.length>0&&(ne.attachments=se.map(oe=>({id:oe.id,name:oe.name,type:oe.type}))),W.report=ne}return W})),z})),f.extendedDetails=b}return f};return Array.isArray(t)?t.map(e):e(t)},au=t=>({...t,slides:t.slides.map(e=>{if(e.isLocked)return{id:e.id,isLocked:!0,summary:`Locked Slide: Contains ${e.elements.length} elements. Content is preserved and must not be changed.`,elements:[]};const{elements:n,...s}=e;return{...s,elements:n.map(r=>{var l;if(r.type==="flowchart"&&((l=r.data)!=null&&l.subSteps)){const f=r;return{...f,data:{subStepCount:f.data.subSteps.length,subSteps:`[Sub-step data omitted for brevity, count: ${f.data.subSteps.length}]`}}}return r})}})}),uM=t=>{const e=/"dependencies"\s*:\s*\[([\s\S]*?)\]/g;return t.replace(e,(n,s)=>{const r=s.match(/"[^"]*"/g);return`"dependencies": [${r?r.join(", "):""}]`})},Qi=t=>{let e=t.trim();const n=/^```(?:json)?\s*\n?(.*?)\n?\s*```$/s,s=e.match(n);if(s&&s[1]&&(e=s[1].trim()),e=uM(e),e=e.replace(/"((?:\\.|[^"\\])*)"/g,(r,l)=>`"${l.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")}"`),!s){const r=e.indexOf("{"),l=e.indexOf("[");if(r===-1&&l===-1)throw console.error("No JSON object or array found in the response string.",t),new Error(`AI response did not contain a valid JSON structure. Raw response: ${t.substring(0,500)}...`);const f=r===-1?l:l===-1?r:Math.min(r,l),h=e.lastIndexOf("}"),g=e.lastIndexOf("]"),m=Math.max(h,g);f>-1&&m>f&&(e=e.substring(f,m+1))}try{return JSON.parse(e)}catch(r){throw console.error("Failed to parse JSON response:",r,`
Original text:`,t,`
Processed string:`,e),new Error(`Failed to parse AI response as JSON. Raw response: ${t.substring(0,500)}...`)}},vi=(t,e)=>{console.error(`Error in Gemini API call during ${e}:`,t);let n=`AIとの通信中に不明なエラーが発生しました (${e})。`;if(t instanceof Error){const s=t.message.toLowerCase();s.includes("api key not valid")||s.includes("api key is invalid")?n="APIキーが無効です。キーを確認して再度設定してください。(API key not valid. Please pass a valid API key.)":s.includes("quota")?n="API利用上限に達しました。Google AI Platformのプランと請求情報を確認してください。(You have exceeded your API quota.)":n=`AIとの通信に失敗しました (${e}): ${t.message}`}throw new Error(n)},cM=async(t,e)=>{if(!ht)throw new Error("AI Service not initialized. Please set an API Key.");const n=`
    You are an expert project planner. Your task is to break down a high-level project goal into a sequence of actionable tasks.
    CONTEXT:
    - Project Goal: "${t}"
    - Target Completion Date: "${e}"
    INSTRUCTIONS:
    1.  Generate a sequence of 3 to 7 high-level, actionable tasks.
    2.  Provide a concise title (max 10 words) and a brief description (1-2 sentences) for each.
    3.  Your response MUST be a single, valid JSON array of objects. Do NOT include any explanations or markdown fences.
    4.  The language of the output should match the language of the input goal.
    5.  Each object MUST have this structure: { "id": "unique_string_id", "title": "Task Title", "description": "Task Description" }
  `;try{const s=await ht.models.generateContent({model:yi,contents:n,config:{responseMimeType:"application/json"}}),r=Qi(s.text);if(!r||!Array.isArray(r)||r.some(l=>!l.id||!l.title||!l.description))throw new Error("AI returned an unexpected format for project tasks.");return r}catch(s){vi(s,"project plan generation")}},dM=async(t,e,n)=>{if(!ht)throw new Error("AI Service not initialized. Please set an API Key.");const s=`
      You are a presentation designer and project analyst. Your task is to update a project status report slide deck based on new data, while preserving slides that have been manually locked by the user.
      CONTEXT:
      - Overall Project Goal: "${n}"
      - Updated Full Task Data (JSON, pruned for brevity): ${JSON.stringify(Wo(e))}
      - Existing Slide Deck (pruned for brevity): ${JSON.stringify(au(t))}

      INSTRUCTIONS:
      1.  Analyze 'existingDeck'. Slides with '"isLocked": true' have been summarized and their 'elements' are empty. You MUST NOT change these slides. Return them exactly as they are in the input (id, isLocked, summary, empty elements array).
      2.  For all other slides (unlocked), REGENERATE their content from scratch based on the 'updatedTaskData'.
      3.  This includes regenerating 'flowchart' slides to reflect the latest sub-step data.
      4.  **ACTION ITEM FOCUS**: When regenerating, pay close attention to the progress and reports within each sub-step's 'actionItems'.
      5.  The final output MUST be a single, valid JSON object representing the complete slide deck, with all slides (locked and regenerated) in their original order.
      6.  Follow the same JSON structure and rules as the initial generation.
    `;try{const r=await ht.models.generateContent({model:yi,contents:s,config:{responseMimeType:"application/json"}}),l=Qi(r.text);if(!l||!Array.isArray(l.slides))throw new Error("AI returned an invalid format for the regenerated slide deck.");return l}catch(r){vi(r,"slide deck regeneration")}},fM=async t=>{if(!ht)throw new Error("AI Service not initialized. Please set an API Key.");const e=`
        You are an expert presentation designer. The following JSON represents a slide deck.
        Analyze its content and structure. Your task is to improve the layout, wording, and visual hierarchy for maximum clarity and impact.
        You can rephrase text for conciseness, change element positions and sizes, and adjust font properties. Do not change element types or IDs.
        Return the updated slide deck as a valid JSON object with the exact same structure as the input. Do not use markdown.
        CRITICAL: Textbox elements use a "content" field, NOT a "text" field.
        
        Input Deck (pruned for brevity):
        ${JSON.stringify(au(t))}
    `;try{const n=await ht.models.generateContent({model:yi,contents:e,config:{responseMimeType:"application/json"}}),s=Qi(n.text);if(!s||!Array.isArray(s.slides))throw new Error("AI returned an invalid format for the optimized slide deck.");return s}catch(n){vi(n,"slide layout optimization")}},hM=async(t,e,n)=>{if(!ht)throw new Error("AI Service not initialized. Please set an API Key.");const s=`
      You are a senior project manager AI. Your task is to conduct a holistic health check of the entire project.
      CONTEXT:
      - Overall Project Goal: "${e}"
      - Final Target Date: "${n}"
      - Current Date: "${new Date().toISOString().split("T")[0]}"
      - Full Project Data (JSON, pruned for brevity): ${JSON.stringify(Wo(t),null,2)}

      INSTRUCTIONS:
      1.  **Holistic Analysis**: Review ALL provided data. Compare task/sub-step due dates with the current date. Analyze dependencies, blockers, and the completion rate of action items.
      2.  **Determine Overall Status**: Categorize the project's health as 'On Track', 'At Risk', or 'Off Track'.
      3.  **Identify Positives**: List 2-3 key accomplishments or areas that are progressing well.
      4.  **Identify Concerns**: List the most critical risks or issues. For each, explain WHY it's a concern (e.g., "Task 'X' is 2 weeks overdue and blocking 3 other tasks"). Note the related task IDs.
      5.  **Propose Solutions**: For each major concern, provide concrete, actionable suggestions for improvement. (e.g., "Re-allocate resources from Task Y to Task X", "Hold a risk mitigation meeting for Z").
      6.  **Summarize**: Write a concise, executive-level summary of the project's current state.
      7.  **JSON Output**: Your response MUST be a single, valid JSON object following the ProjectHealthReport structure. Do not include markdown or explanations.
      8.  **The output language MUST be Japanese.**

      JSON Structure to follow:
      {
        "overallStatus": "'On Track' | 'At Risk' | 'Off Track'",
        "summary": "string",
        "positivePoints": ["string"],
        "areasOfConcern": [{ "description": "string", "relatedTaskIds": ["string"] }],
        "suggestions": ["string"]
      }
    `;try{const r=await ht.models.generateContent({model:yi,contents:s,config:{responseMimeType:"application/json"}}),l=Qi(r.text);if(!l||!l.overallStatus||!l.summary)throw new Error("AI returned an invalid format for the project health report.");return l}catch(r){vi(r,"project health report generation")}},mM=async(t,e,n)=>{if(!ht)throw new Error("AI Service not initialized. Please set an API Key.");const s=`
        You are a senior project analyst AI. Your task is to create a comprehensive slide deck summarizing the ENTIRE project status.
        CONTEXT:
        - Overall Project Goal: "${e}"
        - Final Target Date: "${n}"
        - Full Project Data (JSON, pruned for brevity): ${JSON.stringify(Wo(t),null,2)}
        INSTRUCTIONS:
        1.  Synthesize a comprehensive slide deck (6-10 slides) summarizing the entire project.
        2.  The response MUST be a single, valid JSON object following the SlideDeck structure. Do NOT use markdown.
        3.  The output language MUST be Japanese.
        4.  **CRITICAL SYNTHESIS**:
            - **Title & Overview**: Create a title slide and a project overview slide.
            - **Task Summary & Flowchart**: For each major task in the 'tasks' array, create one or two summary slides. One slide should show a \`flowchart\` of its sub-steps if they exist, following the structure \`{"type": "flowchart", "data": {"subSteps": [...]}}\`. You MUST copy the task's specific \`subSteps\` array from the input JSON into the \`data.subSteps\` field. Another slide can summarize the task's status and outcomes.
            - **Key Project Decisions**: Analyze the 'decisions' data from all tasks. Create a dedicated slide titled "主要なプロジェクト決定事項". List the top 3-5 most important 'decided' items and their outcomes. Separately, list any critical 'undecided' questions that pose a risk to the project timeline or goals.
            - **Key Achievements & Risks**: Create dedicated slides for significant achievements and project-level risks.
            - **Conclusion**: A final slide summarizing the project's outlook and next steps.
        5.  Use the standard JSON format for slides and elements. Remember "content" for textboxes.
    `;try{const r=await ht.models.generateContent({model:yi,contents:s,config:{responseMimeType:"application/json"}}),l=Qi(r.text);if(!l||!Array.isArray(l.slides))throw new Error("AI returned an invalid format for the project slide deck.");return l}catch(r){vi(r,"project report deck generation")}},pM=async(t,e,n,s)=>{if(!ht)throw new Error("AI Service not initialized. Please set an API Key.");const r=`
      You are a senior project analyst AI. Your task is to update a project-wide status report slide deck based on new data, while preserving slides that have been manually locked by the user.
      CONTEXT:
      - Overall Project Goal: "${n}"
      - Final Target Date: "${s}"
      - Updated Full Project Data (JSON, pruned for brevity): ${JSON.stringify(Wo(e),null,2)}
      - Existing Slide Deck (pruned for brevity): ${JSON.stringify(au(t))}

      INSTRUCTIONS:
      1.  Analyze 'existingDeck'. Slides with '"isLocked": true' have been summarized and their 'elements' are empty. You MUST NOT change these slides. Return them exactly as they are in the input (id, isLocked, summary, empty elements array).
      2.  For all other slides (unlocked slides), REGENERATE their content from scratch based on the updated project data.
      3.  This includes regenerating any 'flowchart' elements on unlocked slides to show the latest sub-step data.
      4.  Synthesize information across all tasks to provide a holistic project view in the regenerated slides.
      5.  The final output MUST be a single, valid JSON object for the complete slide deck, in the original slide order.
      6.  The output language MUST be Japanese.
    `;try{const l=await ht.models.generateContent({model:yi,contents:r,config:{responseMimeType:"application/json"}}),f=Qi(l.text);if(!f||!Array.isArray(f.slides))throw new Error("AI returned an invalid format for the regenerated project slide deck.");return f}catch(l){vi(l,"project report deck regeneration")}},gM=t=>{const e=t.match(/^data:(.+);base64,(.*)$/);return e?{mimeType:e[1],data:e[2]}:null},xv=t=>{if(!ht)throw new Error("AI Service not initialized. Please set an API Key.");const e=[];for(const n of t){if(e.push({text:`
--- START OF SOURCE: ${n.name} ---
`}),n.type==="image"&&typeof n.content=="string"){const s=gM(n.content);s?e.push({inlineData:{mimeType:s.mimeType,data:s.data}}):e.push({text:"[Image data was invalid or in wrong format]"})}else if(n.type==="json"){const s=n.content.slides?au(n.content):Wo(n.content);e.push({text:`Type: JSON Data
Content: ${JSON.stringify(s,null,2)}`})}else e.push({text:`Type: Text
Content: ${n.content}`});e.push({text:`
--- END OF SOURCE: ${n.name} ---
`})}return e},yM=async(t,e)=>{if(!ht)throw new Error("AI Service not initialized. Please set an API Key.");const s=[{text:`
        You are a professional presentation designer AI. Your task is to create a slide deck based on a user's objective and provided source materials.

        **USER OBJECTIVE**: "${e}"

        **CRITICAL INSTRUCTIONS**:
        1.  **Strict JSON Output**: Your entire response MUST be a single, valid JSON object. Do NOT include any text, explanations, or markdown fences (like \`\`\`json\`) outside of the JSON object. Your response should start with \`{\` and end with \`}\`.
        2.  **Schema Adherence**: The JSON object MUST strictly conform to the following TypeScript interfaces for \`SlideDeck\`, \`Slide\`, and \`SlideElement\`.
            \`\`\`typescript
            // The main container for the presentation
            interface SlideDeck {
              slides: Slide[];
              theme?: 'light' | 'dark' | 'business';
            }

            // Represents a single slide in the deck
            interface Slide {
              id: string; // A unique identifier for the slide
              layout: 'title_slide' | 'title_and_content' | 'section_header' | 'two_column' | 'blank';
              elements: SlideElement[];
              isLocked?: boolean; // Must be false for all generated slides
              notes?: string; // Optional speaker notes
            }

            // Union type for all possible elements on a slide
            type SlideElement = TextboxElement | ImageElement | TableElement | ChartElement | FlowchartElement;

            // Base interface for all elements
            interface BaseSlideElement {
              id: string; // A unique identifier for the element
              type: 'textbox' | 'image' | 'table' | 'chart' | 'flowchart';
              position: { x: number; y: number; width: number; height: number; }; // Position in percentages
            }

            // For displaying text
            interface TextboxElement extends BaseSlideElement {
              type: 'textbox';
              content: string; // IMPORTANT: The text content field MUST be named "content".
            }
            
            // For displaying an image from the source materials
            interface ImageElement extends BaseSlideElement {
              type: 'image';
              // You MUST find a relevant image from the source materials and reference its properties here.
              // These IDs must correspond to actual data in the sources provided.
              subStepId: string;
              actionItemId: string; 
              attachmentId: string;
            }

            // For displaying a flowchart of sub-steps
            interface FlowchartElement extends BaseSlideElement {
                type: 'flowchart';
                // You MUST copy the entire 'subSteps' array from the source task data into this field.
                data: {
                    subSteps: any[]; 
                };
            }
            \`\`\`
        3.  **Content Synthesis**:
            *   Analyze ALL provided source materials to create a coherent 4-7 slide presentation that directly addresses the user's objective.
            *   If image sources are provided, you MUST incorporate them into the slides using the 'image' element type.
            *   Do not just copy-paste. Interpret, summarize, and visualize the information effectively.
        4.  **Language**: The output language MUST be Japanese.
        5.  **IDs**: Generate unique string IDs for all 'id' fields in slides and elements.

        **SOURCE MATERIALS FOLLOW**:
    `},...xv(t)];s.push({text:`
Reminder: Create the slide deck now based on the objective and all the sources provided above. The response must be only the JSON object.`});try{const r=await ht.models.generateContent({model:yi,contents:{parts:s},config:{responseMimeType:"application/json"}}),l=Qi(r.text);if(!l||!Array.isArray(l.slides))throw new Error("AI returned an invalid format for the custom slide deck.");return l}catch(r){vi(r,"custom slide deck generation")}},vM=async(t,e)=>{if(!ht)throw new Error("AI Service not initialized. Please set an API Key.");const s=[{text:`
        You are an expert project analyst. Your task is to write a text-based report based on a specific user objective and a collection of source materials.
        USER OBJECTIVE:
        "${e}"
        INSTRUCTIONS:
        1.  Synthesize the information from ALL provided source materials to create a coherent and insightful report that directly addresses the user's objective.
        2.  Do not simply copy-paste data. Interpret and summarize the information in a clear, professional manner.
        3.  Format the output using Markdown for readability (e.g., use headings, bullet points, bold text).
        4.  If image sources are provided, reference them by name in your report (e.g., "(see image: 'chart.png')"). Do not try to embed them.
        5.  The language of the output should be Japanese.
        6.  Your response MUST be only the text report. Do not include any other explanations.
        SOURCE MATERIALS FOLLOW:
    `},...xv(t)];s.push({text:`
Reminder: Write the report now based on the objective and all the sources provided above. The response must be only the text report.`});try{return(await ht.models.generateContent({model:yi,contents:{parts:s}})).text}catch(r){vi(r,"custom text report generation")}},ey=async(t,e,n)=>{if(!ht)throw new Error("AI Service not initialized. Please set an API Key.");const s=`
      You are a project management assistant AI. Your task is to convert a project structure into data for a Gantt chart.
      CONTEXT:
      - Project Goal: "${e}"
      - Project Start Date: "${new Date().toISOString().split("T")[0]}"
      - Project Target End Date: "${n}"
      - Full Project Data (JSON, pruned for brevity): ${JSON.stringify(Wo(t),null,2)}

      INSTRUCTIONS:
      1.  Create a flat list of items for the Gantt chart. Include every ProjectTask, every SubStep, and every ActionItem from all tasks.
      2.  For each item, generate a JSON object with this exact structure:
          { "id": "string", "name": "string", "start": "YYYY-MM-DD", "end": "YYYY-MM-DD", "progress": number, "dependencies": ["string"], "type": "'task' | 'substep' | 'actionitem'", "parentId": "string | null" }
      3.  **Date Estimation**:
          - The project must fit between the start and target dates.
          - Use an item's \`dueDate\` as its 'end' date if available for tasks and sub-steps.
          - Estimate 'start' and 'end' dates logically. An item must start after its dependencies end.
          - For 'actionitem', estimate a short duration (e.g., 1-2 days) within the parent sub-step's timeframe.
      4.  **Progress Calculation**:
          - For a 'task': 'Completed' is 100, 'Not Started' is 0. For 'In Progress' or 'Blocked', average the progress of its sub-steps. If no sub-steps, 'In Progress' is 50.
          - For a 'substep': Calculate progress from its \`actionItems\` (% of completed items). If no action items, use its \`status\`: 'Completed' is 100, 'In Progress' is 50, 'Not Started' is 0.
          - For an 'actionitem': 'completed: true' is 100, 'completed: false' is 0.
      5.  **Dependencies & Parent ID**:
          - **Rule**: The 'dependencies' array models the sequential workflow. A dependency can ONLY exist between items of the SAME \`type\` AND with the SAME \`parentId\`.
          - **Tasks**: A task's 'parentId' is ALWAYS null. Use \`nextTaskIds\` to establish dependencies between tasks.
          - **Sub-steps**: A sub-step's 'parentId' MUST BE the ID of its parent ProjectTask. Use \`nextSubStepIds\` to establish dependencies ONLY between sub-steps within the same task.
          - **Action Items**: An action item's 'parentId' MUST BE the ID of its parent SubStep. Create sequential dependencies ONLY between action items within the same sub-step (item 2 depends on item 1, etc.).
          - **CRITICAL**: Do NOT create dependencies across different parents (e.g., from a sub-step in Task A to one in Task B) or across different types (e.g., from a task to a sub-step).
      6.  Your response MUST be a single, valid JSON array of GanttItem objects. Do not use markdown.
    `;try{const r=await ht.models.generateContent({model:yi,contents:s,config:{responseMimeType:"application/json"}}),l=Qi(r.text);if(!l||!Array.isArray(l))throw new Error("AI returned an invalid format for the Gantt chart data.");return l}catch(r){vi(r,"Gantt chart data generation")}},xM="modulepreload",_M=function(t){return"/"+t},ty={},_a=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let f=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));r=f(n.map(m=>{if(m=_M(m),m in ty)return;ty[m]=!0;const x=m.endsWith(".css"),_=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${_}`))return;const b=document.createElement("link");if(b.rel=x?"stylesheet":xM,x||(b.as="script"),b.crossOrigin="",b.href=m,g&&b.setAttribute("nonce",g),document.head.appendChild(b),x)return new Promise((C,E)=>{b.addEventListener("load",C),b.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(f){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f}return r.then(f=>{for(const h of f||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})},TM=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>_a(async()=>{const{default:s}=await Promise.resolve().then(()=>Qo);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)};class Tf extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class bM extends Tf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ny extends Tf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class iy extends Tf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ef;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ef||(ef={}));var wM=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function h(x){try{m(s.next(x))}catch(_){f(_)}}function g(x){try{m(s.throw(x))}catch(_){f(_)}}function m(x){x.done?l(x.value):r(x.value).then(h,g)}m((s=s.apply(t,e||[])).next())})};class SM{constructor(e,{headers:n={},customFetch:s,region:r=ef.Any}={}){this.url=e,this.headers=n,this.region=r,this.fetch=TM(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var s;return wM(this,void 0,void 0,function*(){try{const{headers:r,method:l,body:f}=n;let h={},{region:g}=n;g||(g=this.region);const m=new URL(`${this.url}/${e}`);g&&g!=="any"&&(h["x-region"]=g,m.searchParams.set("forceFunctionRegion",g));let x;f&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",x=f):typeof f=="string"?(h["Content-Type"]="text/plain",x=f):typeof FormData<"u"&&f instanceof FormData?x=f:(h["Content-Type"]="application/json",x=JSON.stringify(f)));const _=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),r),body:x}).catch(N=>{throw new bM(N)}),b=_.headers.get("x-relay-error");if(b&&b==="true")throw new ny(_);if(!_.ok)throw new iy(_);let C=((s=_.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),E;return C==="application/json"?E=yield _.json():C==="application/octet-stream"?E=yield _.blob():C==="text/event-stream"?E=_:C==="multipart/form-data"?E=yield _.formData():E=yield _.text(),{data:E,error:null,response:_}}catch(r){return{data:null,error:r,response:r instanceof iy||r instanceof ny?r.context:void 0}}})}}var Mt={},So={},Co={},Eo={},Ao={},No={},CM=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ho=CM();const EM=Ho.fetch,_v=Ho.fetch.bind(Ho),Tv=Ho.Headers,AM=Ho.Request,NM=Ho.Response,Qo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Tv,Request:AM,Response:NM,default:_v,fetch:EM},Symbol.toStringTag,{value:"Module"})),MM=lT(Qo);var Ul={},sy;function bv(){if(sy)return Ul;sy=1,Object.defineProperty(Ul,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Ul.default=t,Ul}var oy;function wv(){if(oy)return No;oy=1;var t=No&&No.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(No,"__esModule",{value:!0});const e=t(MM),n=t(bv());class s{constructor(l){this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=l.headers,this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=l.shouldThrowOnError,this.signal=l.signal,this.isMaybeSingle=l.isMaybeSingle,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,f){return this.headers=Object.assign({},this.headers),this.headers[l]=f,this}then(l,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const h=this.fetch;let g=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var x,_,b;let C=null,E=null,N=null,D=m.status,B=m.statusText;if(m.ok){if(this.method!=="HEAD"){const V=await m.text();V===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?E=V:E=JSON.parse(V))}const U=(x=this.headers.Prefer)===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),F=(_=m.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");U&&F&&F.length>1&&(N=parseInt(F[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(C={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,N=null,D=406,B="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const U=await m.text();try{C=JSON.parse(U),Array.isArray(C)&&m.status===404&&(E=[],C=null,D=200,B="OK")}catch{m.status===404&&U===""?(D=204,B="No Content"):C={message:U}}if(C&&this.isMaybeSingle&&(!((b=C==null?void 0:C.details)===null||b===void 0)&&b.includes("0 rows"))&&(C=null,D=200,B="OK"),C&&this.shouldThrowOnError)throw new n.default(C)}return{error:C,data:E,count:N,status:D,statusText:B}});return this.shouldThrowOnError||(g=g.catch(m=>{var x,_,b;return{error:{message:`${(x=m==null?void 0:m.name)!==null&&x!==void 0?x:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(_=m==null?void 0:m.stack)!==null&&_!==void 0?_:""}`,hint:"",code:`${(b=m==null?void 0:m.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),g.then(l,f)}returns(){return this}overrideTypes(){return this}}return No.default=s,No}var ry;function Sv(){if(ry)return Ao;ry=1;var t=Ao&&Ao.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ao,"__esModule",{value:!0});const e=t(wv());class n extends e.default{select(r){let l=!1;const f=(r??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",f),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(r,{ascending:l=!0,nullsFirst:f,foreignTable:h,referencedTable:g=h}={}){const m=g?`${g}.order`:"order",x=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${x?`${x},`:""}${r}.${l?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:l,referencedTable:f=l}={}){const h=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(h,`${r}`),this}range(r,l,{foreignTable:f,referencedTable:h=f}={}){const g=typeof h>"u"?"offset":`${h}.offset`,m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(g,`${r}`),this.url.searchParams.set(m,`${l-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:r=!1,verbose:l=!1,settings:f=!1,buffers:h=!1,wal:g=!1,format:m="text"}={}){var x;const _=[r?"analyze":null,l?"verbose":null,f?"settings":null,h?"buffers":null,g?"wal":null].filter(Boolean).join("|"),b=(x=this.headers.Accept)!==null&&x!==void 0?x:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${m}; for="${b}"; options=${_};`,m==="json"?this:this}rollback(){var r;return((r=this.headers.Prefer)!==null&&r!==void 0?r:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Ao.default=n,Ao}var ay;function bf(){if(ay)return Eo;ay=1;var t=Eo&&Eo.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Eo,"__esModule",{value:!0});const e=t(Sv());class n extends e.default{eq(r,l){return this.url.searchParams.append(r,`eq.${l}`),this}neq(r,l){return this.url.searchParams.append(r,`neq.${l}`),this}gt(r,l){return this.url.searchParams.append(r,`gt.${l}`),this}gte(r,l){return this.url.searchParams.append(r,`gte.${l}`),this}lt(r,l){return this.url.searchParams.append(r,`lt.${l}`),this}lte(r,l){return this.url.searchParams.append(r,`lte.${l}`),this}like(r,l){return this.url.searchParams.append(r,`like.${l}`),this}likeAllOf(r,l){return this.url.searchParams.append(r,`like(all).{${l.join(",")}}`),this}likeAnyOf(r,l){return this.url.searchParams.append(r,`like(any).{${l.join(",")}}`),this}ilike(r,l){return this.url.searchParams.append(r,`ilike.${l}`),this}ilikeAllOf(r,l){return this.url.searchParams.append(r,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(r,l){return this.url.searchParams.append(r,`ilike(any).{${l.join(",")}}`),this}is(r,l){return this.url.searchParams.append(r,`is.${l}`),this}in(r,l){const f=Array.from(new Set(l)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(r,`in.(${f})`),this}contains(r,l){return typeof l=="string"?this.url.searchParams.append(r,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(r,`cs.{${l.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(l)}`),this}containedBy(r,l){return typeof l=="string"?this.url.searchParams.append(r,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(r,`cd.{${l.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(l)}`),this}rangeGt(r,l){return this.url.searchParams.append(r,`sr.${l}`),this}rangeGte(r,l){return this.url.searchParams.append(r,`nxl.${l}`),this}rangeLt(r,l){return this.url.searchParams.append(r,`sl.${l}`),this}rangeLte(r,l){return this.url.searchParams.append(r,`nxr.${l}`),this}rangeAdjacent(r,l){return this.url.searchParams.append(r,`adj.${l}`),this}overlaps(r,l){return typeof l=="string"?this.url.searchParams.append(r,`ov.${l}`):this.url.searchParams.append(r,`ov.{${l.join(",")}}`),this}textSearch(r,l,{config:f,type:h}={}){let g="";h==="plain"?g="pl":h==="phrase"?g="ph":h==="websearch"&&(g="w");const m=f===void 0?"":`(${f})`;return this.url.searchParams.append(r,`${g}fts${m}.${l}`),this}match(r){return Object.entries(r).forEach(([l,f])=>{this.url.searchParams.append(l,`eq.${f}`)}),this}not(r,l,f){return this.url.searchParams.append(r,`not.${l}.${f}`),this}or(r,{foreignTable:l,referencedTable:f=l}={}){const h=f?`${f}.or`:"or";return this.url.searchParams.append(h,`(${r})`),this}filter(r,l,f){return this.url.searchParams.append(r,`${l}.${f}`),this}}return Eo.default=n,Eo}var ly;function Cv(){if(ly)return Co;ly=1;var t=Co&&Co.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Co,"__esModule",{value:!0});const e=t(bf());class n{constructor(r,{headers:l={},schema:f,fetch:h}){this.url=r,this.headers=l,this.schema=f,this.fetch=h}select(r,{head:l=!1,count:f}={}){const h=l?"HEAD":"GET";let g=!1;const m=(r??"*").split("").map(x=>/\s/.test(x)&&!g?"":(x==='"'&&(g=!g),x)).join("");return this.url.searchParams.set("select",m),f&&(this.headers.Prefer=`count=${f}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(r,{count:l,defaultToNull:f=!0}={}){const h="POST",g=[];if(this.headers.Prefer&&g.push(this.headers.Prefer),l&&g.push(`count=${l}`),f||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(r)){const m=r.reduce((x,_)=>x.concat(Object.keys(_)),[]);if(m.length>0){const x=[...new Set(m)].map(_=>`"${_}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}upsert(r,{onConflict:l,ignoreDuplicates:f=!1,count:h,defaultToNull:g=!0}={}){const m="POST",x=[`resolution=${f?"ignore":"merge"}-duplicates`];if(l!==void 0&&this.url.searchParams.set("on_conflict",l),this.headers.Prefer&&x.push(this.headers.Prefer),h&&x.push(`count=${h}`),g||x.push("missing=default"),this.headers.Prefer=x.join(","),Array.isArray(r)){const _=r.reduce((b,C)=>b.concat(Object.keys(C)),[]);if(_.length>0){const b=[...new Set(_)].map(C=>`"${C}"`);this.url.searchParams.set("columns",b.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}update(r,{count:l}={}){const f="PATCH",h=[];return this.headers.Prefer&&h.push(this.headers.Prefer),l&&h.push(`count=${l}`),this.headers.Prefer=h.join(","),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}delete({count:r}={}){const l="DELETE",f=[];return r&&f.push(`count=${r}`),this.headers.Prefer&&f.unshift(this.headers.Prefer),this.headers.Prefer=f.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Co.default=n,Co}var na={},ia={},uy;function RM(){return uy||(uy=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.version=void 0,ia.version="0.0.0-automated"),ia}var cy;function kM(){if(cy)return na;cy=1,Object.defineProperty(na,"__esModule",{value:!0}),na.DEFAULT_HEADERS=void 0;const t=RM();return na.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},na}var dy;function DM(){if(dy)return So;dy=1;var t=So&&So.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(So,"__esModule",{value:!0});const e=t(Cv()),n=t(bf()),s=kM();class r{constructor(f,{headers:h={},schema:g,fetch:m}={}){this.url=f,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),h),this.schemaName=g,this.fetch=m}from(f){const h=new URL(`${this.url}/${f}`);return new e.default(h,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(f){return new r(this.url,{headers:this.headers,schema:f,fetch:this.fetch})}rpc(f,h={},{head:g=!1,get:m=!1,count:x}={}){let _;const b=new URL(`${this.url}/rpc/${f}`);let C;g||m?(_=g?"HEAD":"GET",Object.entries(h).filter(([N,D])=>D!==void 0).map(([N,D])=>[N,Array.isArray(D)?`{${D.join(",")}}`:`${D}`]).forEach(([N,D])=>{b.searchParams.append(N,D)})):(_="POST",C=h);const E=Object.assign({},this.headers);return x&&(E.Prefer=`count=${x}`),new n.default({method:_,url:b,headers:E,schema:this.schemaName,body:C,fetch:this.fetch,allowEmpty:!1})}}return So.default=r,So}var fy;function IM(){if(fy)return Mt;fy=1;var t=Mt&&Mt.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.PostgrestError=Mt.PostgrestBuilder=Mt.PostgrestTransformBuilder=Mt.PostgrestFilterBuilder=Mt.PostgrestQueryBuilder=Mt.PostgrestClient=void 0;const e=t(DM());Mt.PostgrestClient=e.default;const n=t(Cv());Mt.PostgrestQueryBuilder=n.default;const s=t(bf());Mt.PostgrestFilterBuilder=s.default;const r=t(Sv());Mt.PostgrestTransformBuilder=r.default;const l=t(wv());Mt.PostgrestBuilder=l.default;const f=t(bv());return Mt.PostgrestError=f.default,Mt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:l.default,PostgrestError:f.default},Mt}var UM=IM();const LM=hf(UM),{PostgrestClient:PM,PostgrestQueryBuilder:h5,PostgrestFilterBuilder:m5,PostgrestTransformBuilder:p5,PostgrestBuilder:g5,PostgrestError:y5}=LM;function OM(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const jM=OM(),VM="2.11.15",qM=`realtime-js/${VM}`,BM="1.0.0",Ev=1e4,$M=1e3;var ua;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ua||(ua={}));var qt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(qt||(qt={}));var Pn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Pn||(Pn={}));var tf;(function(t){t.websocket="websocket"})(tf||(tf={}));var As;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(As||(As={}));class zM{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,n,s)}_decodeBroadcast(e,n,s){const r=n.getUint8(1),l=n.getUint8(2);let f=this.HEADER_LENGTH+2;const h=s.decode(e.slice(f,f+r));f=f+r;const g=s.decode(e.slice(f,f+l));f=f+l;const m=JSON.parse(s.decode(e.slice(f,e.byteLength)));return{ref:null,topic:h,event:g,payload:m}}}class Av{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var nt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(nt||(nt={}));const hy=(t,e,n={})=>{var s;const r=(s=n.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((l,f)=>(l[f]=GM(f,t,e,r),l),{})},GM=(t,e,n,s)=>{const r=e.find(h=>h.name===t),l=r==null?void 0:r.type,f=n[t];return l&&!s.includes(l)?Nv(l,f):nf(f)},Nv=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return YM(e,n)}switch(t){case nt.bool:return FM(e);case nt.float4:case nt.float8:case nt.int2:case nt.int4:case nt.int8:case nt.numeric:case nt.oid:return HM(e);case nt.json:case nt.jsonb:return JM(e);case nt.timestamp:return ZM(e);case nt.abstime:case nt.date:case nt.daterange:case nt.int4range:case nt.int8range:case nt.money:case nt.reltime:case nt.text:case nt.time:case nt.timestamptz:case nt.timetz:case nt.tsrange:case nt.tstzrange:return nf(e);default:return nf(e)}},nf=t=>t,FM=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},HM=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},JM=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},YM=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let l;const f=t.slice(1,n);try{l=JSON.parse("["+f+"]")}catch{l=f?f.split(","):[]}return l.map(h=>Nv(e,h))}return t},ZM=t=>typeof t=="string"?t.replace(" ","T"):t,Mv=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Nd{constructor(e,n,s={},r=Ev){this.channel=e,this.event=n,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var my;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(my||(my={}));class ca{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:l,onLeave:f,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ca.syncState(this.state,r,l,f),this.pendingDiffs.forEach(g=>{this.state=ca.syncDiff(this.state,g,l,f)}),this.pendingDiffs=[],h()}),this.channel._on(s.diff,{},r=>{const{onJoin:l,onLeave:f,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=ca.syncDiff(this.state,r,l,f),h())}),this.onJoin((r,l,f)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:l,newPresences:f})}),this.onLeave((r,l,f)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:l,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,r){const l=this.cloneDeep(e),f=this.transformState(n),h={},g={};return this.map(l,(m,x)=>{f[m]||(g[m]=x)}),this.map(f,(m,x)=>{const _=l[m];if(_){const b=x.map(D=>D.presence_ref),C=_.map(D=>D.presence_ref),E=x.filter(D=>C.indexOf(D.presence_ref)<0),N=_.filter(D=>b.indexOf(D.presence_ref)<0);E.length>0&&(h[m]=E),N.length>0&&(g[m]=N)}else h[m]=x}),this.syncDiff(l,{joins:h,leaves:g},s,r)}static syncDiff(e,n,s,r){const{joins:l,leaves:f}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(l,(h,g)=>{var m;const x=(m=e[h])!==null&&m!==void 0?m:[];if(e[h]=this.cloneDeep(g),x.length>0){const _=e[h].map(C=>C.presence_ref),b=x.filter(C=>_.indexOf(C.presence_ref)<0);e[h].unshift(...b)}s(h,x,g)}),this.map(f,(h,g)=>{let m=e[h];if(!m)return;const x=g.map(_=>_.presence_ref);m=m.filter(_=>x.indexOf(_.presence_ref)<0),e[h]=m,r(h,m,g),m.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const r=e[s];return"metas"in r?n[s]=r.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[s]=r,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var py;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(py||(py={}));var gy;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(gy||(gy={}));var fi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(fi||(fi={}));class wf{constructor(e,n={config:{}},s){this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=qt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Nd(this,Pn.join,this.params,this.timeout),this.rejoinTimer=new Av(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pn.reply,{},(r,l)=>{this._trigger(this._replyEventName(l),r)}),this.presence=new ca(this),this.broadcastEndpointURL=Mv(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==qt.closed){const{config:{broadcast:l,presence:f,private:h}}=this.params;this._onError(x=>e==null?void 0:e(fi.CHANNEL_ERROR,x)),this._onClose(()=>e==null?void 0:e(fi.CLOSED));const g={},m={broadcast:l,presence:f,postgres_changes:(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(x=>x.filter))!==null&&r!==void 0?r:[],private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:m},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:x})=>{var _;if(this.socket.setAuth(),x===void 0){e==null||e(fi.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,C=(_=b==null?void 0:b.length)!==null&&_!==void 0?_:0,E=[];for(let N=0;N<C;N++){const D=b[N],{filter:{event:B,schema:z,table:U,filter:F}}=D,V=x&&x[N];if(V&&V.event===B&&V.schema===z&&V.table===U&&V.filter===F)E.push(Object.assign(Object.assign({},D),{id:V.id}));else{this.unsubscribe(),this.state=qt.errored,e==null||e(fi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(fi.SUBSCRIBED);return}}).receive("error",x=>{this.state=qt.errored,e==null||e(fi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(fi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this._on(e,n,s)}async send(e,n={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:f}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:f,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=m.body)===null||r===void 0?void 0:r.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var f,h,g;const m=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(f=this.params)===null||f===void 0?void 0:f.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),m.receive("ok",()=>l("ok")),m.receive("error",()=>l("error")),m.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=qt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new Nd(this,Pn.leave,{},e),s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,s){const r=new AbortController,l=setTimeout(()=>r.abort(),s),f=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(l),f}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Nd(this,e,n,s);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var r,l;const f=e.toLocaleLowerCase(),{close:h,error:g,leave:m,join:x}=Pn;if(s&&[h,g,m,x].indexOf(f)>=0&&s!==this._joinRef())return;let b=this._onMessage(f,n,s);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(C=>{var E,N,D;return((E=C.filter)===null||E===void 0?void 0:E.event)==="*"||((D=(N=C.filter)===null||N===void 0?void 0:N.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===f}).map(C=>C.callback(b,s)):(l=this.bindings[f])===null||l===void 0||l.filter(C=>{var E,N,D,B,z,U;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in C){const F=C.id,V=(E=C.filter)===null||E===void 0?void 0:E.event;return F&&((N=n.ids)===null||N===void 0?void 0:N.includes(F))&&(V==="*"||(V==null?void 0:V.toLocaleLowerCase())===((D=n.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{const F=(z=(B=C==null?void 0:C.filter)===null||B===void 0?void 0:B.event)===null||z===void 0?void 0:z.toLocaleLowerCase();return F==="*"||F===((U=n==null?void 0:n.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===f}).map(C=>{if(typeof b=="object"&&"ids"in b){const E=b.data,{schema:N,table:D,commit_timestamp:B,type:z,errors:U}=E;b=Object.assign(Object.assign({},{schema:N,table:D,commit_timestamp:B,eventType:z,new:{},old:{},errors:U}),this._getPayloadRecords(E))}C.callback(b,s)})}_isClosed(){return this.state===qt.closed}_isJoined(){return this.state===qt.joined}_isJoining(){return this.state===qt.joining}_isLeaving(){return this.state===qt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const r=e.toLocaleLowerCase(),l={type:r,filter:n,callback:s};return this.bindings[r]?this.bindings[r].push(l):this.bindings[r]=[l],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(r=>{var l;return!(((l=r.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&wf.isEqual(r.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Pn.close,{},e)}_onError(e){this._on(Pn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=hy(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=hy(e.columns,e.old_record)),n}}const yy=()=>{},KM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class XM{constructor(e,n){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ev,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yy,this.ref=0,this.logger=yy,this.conn=null,this.sendBuffer=[],this.serializer=new zM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=l=>{let f;return l?f=l:typeof fetch>"u"?f=(...h)=>_a(async()=>{const{default:g}=await Promise.resolve().then(()=>Qo);return{default:g}},void 0).then(({default:g})=>g(...h)):f=fetch,(...h)=>f(...h)},this.endPoint=`${e}/${tf.websocket}`,this.httpEndpoint=Mv(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const r=(s=n==null?void 0:n.params)===null||s===void 0?void 0:s.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:l=>[1e3,2e3,5e3,1e4][l-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(l,f)=>f(JSON.stringify(l)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Av(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=jM),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:BM}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ua.connecting:return As.Connecting;case ua.open:return As.Open;case ua.closing:return As.Closing;default:return As.Closed}}isConnected(){return this.connectionState()===As.Open}channel(e,n={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(l=>l.topic===s);if(r)return r;{const l=new wf(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:s,payload:r,ref:l}=e,f=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${n} ${s} (${l})`,r),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const r={access_token:n,version:qM};n&&s.updateJoinPayload(r),s.joinedOnce&&s._isJoined()&&s._push(Pn.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close($M,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:s,event:r,payload:l,ref:f}=n;s==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),f&&f===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${l.status||""} ${s} ${r} ${f&&"("+f+")"||""}`,l),Array.from(this.channels).filter(h=>h._isMember(s)).forEach(h=>h._trigger(r,l,f)),this.stateChangeCallbacks.message.forEach(h=>h(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Pn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${e}${s}${r}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([KM],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}}class Sf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Rt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class WM extends Sf{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class sf extends Sf{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var QM=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function h(x){try{m(s.next(x))}catch(_){f(_)}}function g(x){try{m(s.throw(x))}catch(_){f(_)}}function m(x){x.done?l(x.value):r(x.value).then(h,g)}m((s=s.apply(t,e||[])).next())})};const Rv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>_a(async()=>{const{default:s}=await Promise.resolve().then(()=>Qo);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},eR=()=>QM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield _a(()=>Promise.resolve().then(()=>Qo),void 0)).Response:Response}),of=t=>{if(Array.isArray(t))return t.map(n=>of(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const r=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[r]=of(s)}),e};var Ps=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function h(x){try{m(s.next(x))}catch(_){f(_)}}function g(x){try{m(s.throw(x))}catch(_){f(_)}}function m(x){x.done?l(x.value):r(x.value).then(h,g)}m((s=s.apply(t,e||[])).next())})};const Md=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),tR=(t,e,n)=>Ps(void 0,void 0,void 0,function*(){const s=yield eR();t instanceof s&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{e(new WM(Md(r),t.status||500))}).catch(r=>{e(new sf(Md(r),r))}):e(new sf(Md(t),t))}),nR=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(r.body=JSON.stringify(s)),Object.assign(Object.assign({},r),n))};function Ta(t,e,n,s,r,l){return Ps(this,void 0,void 0,function*(){return new Promise((f,h)=>{t(n,nR(e,s,r,l)).then(g=>{if(!g.ok)throw g;return s!=null&&s.noResolveJson?g:g.json()}).then(g=>f(g)).catch(g=>tR(g,h,s))})})}function Ql(t,e,n,s){return Ps(this,void 0,void 0,function*(){return Ta(t,"GET",e,n,s)})}function Ji(t,e,n,s,r){return Ps(this,void 0,void 0,function*(){return Ta(t,"POST",e,s,r,n)})}function iR(t,e,n,s,r){return Ps(this,void 0,void 0,function*(){return Ta(t,"PUT",e,s,r,n)})}function sR(t,e,n,s){return Ps(this,void 0,void 0,function*(){return Ta(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function kv(t,e,n,s,r){return Ps(this,void 0,void 0,function*(){return Ta(t,"DELETE",e,s,r,n)})}var Xt=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function h(x){try{m(s.next(x))}catch(_){f(_)}}function g(x){try{m(s.throw(x))}catch(_){f(_)}}function m(x){x.done?l(x.value):r(x.value).then(h,g)}m((s=s.apply(t,e||[])).next())})};const oR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class rR{constructor(e,n={},s,r){this.url=e,this.headers=n,this.bucketId=s,this.fetch=Rv(r)}uploadOrUpdate(e,n,s,r){return Xt(this,void 0,void 0,function*(){try{let l;const f=Object.assign(Object.assign({},vy),r);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(f.upsert)});const g=f.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",f.cacheControl),g&&l.append("metadata",this.encodeMetadata(g)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",f.cacheControl),g&&l.append("metadata",this.encodeMetadata(g))):(l=s,h["cache-control"]=`max-age=${f.cacheControl}`,h["content-type"]=f.contentType,g&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),r!=null&&r.headers&&(h=Object.assign(Object.assign({},h),r.headers));const m=this._removeEmptyFolders(n),x=this._getFinalPath(m),_=yield this.fetch(`${this.url}/object/${x}`,Object.assign({method:e,body:l,headers:h},f!=null&&f.duplex?{duplex:f.duplex}:{})),b=yield _.json();return _.ok?{data:{path:m,id:b.Id,fullPath:b.Key},error:null}:{data:null,error:b}}catch(l){if(Rt(l))return{data:null,error:l};throw l}})}upload(e,n,s){return Xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,r){return Xt(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),f=this._getFinalPath(l),h=new URL(this.url+`/object/upload/sign/${f}`);h.searchParams.set("token",n);try{let g;const m=Object.assign({upsert:vy.upsert},r),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&s instanceof Blob?(g=new FormData,g.append("cacheControl",m.cacheControl),g.append("",s)):typeof FormData<"u"&&s instanceof FormData?(g=s,g.append("cacheControl",m.cacheControl)):(g=s,x["cache-control"]=`max-age=${m.cacheControl}`,x["content-type"]=m.contentType);const _=yield this.fetch(h.toString(),{method:"PUT",body:g,headers:x}),b=yield _.json();return _.ok?{data:{path:l,fullPath:b.Key},error:null}:{data:null,error:b}}catch(g){if(Rt(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,n){return Xt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);n!=null&&n.upsert&&(r["x-upsert"]="true");const l=yield Ji(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),f=new URL(this.url+l.url),h=f.searchParams.get("token");if(!h)throw new Sf("No token returned by API");return{data:{signedUrl:f.toString(),path:e,token:h},error:null}}catch(s){if(Rt(s))return{data:null,error:s};throw s}})}update(e,n,s){return Xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return Xt(this,void 0,void 0,function*(){try{return{data:yield Ji(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Rt(r))return{data:null,error:r};throw r}})}copy(e,n,s){return Xt(this,void 0,void 0,function*(){try{return{data:{path:(yield Ji(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Rt(r))return{data:null,error:r};throw r}})}createSignedUrl(e,n,s){return Xt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),l=yield Ji(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const f=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${f}`)},{data:l,error:null}}catch(r){if(Rt(r))return{data:null,error:r};throw r}})}createSignedUrls(e,n,s){return Xt(this,void 0,void 0,function*(){try{const r=yield Ji(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${l}`):null})),error:null}}catch(r){if(Rt(r))return{data:null,error:r};throw r}})}download(e,n){return Xt(this,void 0,void 0,function*(){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),f=l?`?${l}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield Ql(this.fetch,`${this.url}/${r}/${h}${f}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(Rt(h))return{data:null,error:h};throw h}})}info(e){return Xt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield Ql(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:of(s),error:null}}catch(s){if(Rt(s))return{data:null,error:s};throw s}})}exists(e){return Xt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield sR(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Rt(s)&&s instanceof sf){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),r=[],l=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&r.push(l);const h=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});g!==""&&r.push(g);let m=r.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${s}${m}`)}}}remove(e){return Xt(this,void 0,void 0,function*(){try{return{data:yield kv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Rt(n))return{data:null,error:n};throw n}})}list(e,n,s){return Xt(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},oR),n),{prefix:e||""});return{data:yield Ji(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(Rt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const aR="2.7.1",lR={"X-Client-Info":`storage-js/${aR}`};var Mo=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function h(x){try{m(s.next(x))}catch(_){f(_)}}function g(x){try{m(s.throw(x))}catch(_){f(_)}}function m(x){x.done?l(x.value):r(x.value).then(h,g)}m((s=s.apply(t,e||[])).next())})};class uR{constructor(e,n={},s){this.url=e,this.headers=Object.assign(Object.assign({},lR),n),this.fetch=Rv(s)}listBuckets(){return Mo(this,void 0,void 0,function*(){try{return{data:yield Ql(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Rt(e))return{data:null,error:e};throw e}})}getBucket(e){return Mo(this,void 0,void 0,function*(){try{return{data:yield Ql(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Rt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Mo(this,void 0,void 0,function*(){try{return{data:yield Ji(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Rt(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return Mo(this,void 0,void 0,function*(){try{return{data:yield iR(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Rt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Mo(this,void 0,void 0,function*(){try{return{data:yield Ji(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Rt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Mo(this,void 0,void 0,function*(){try{return{data:yield kv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Rt(n))return{data:null,error:n};throw n}})}}class cR extends uR{constructor(e,n={},s){super(e,n,s)}from(e){return new rR(this.url,this.headers,e,this.fetch)}}const dR="2.50.3";let ra="";typeof Deno<"u"?ra="deno":typeof document<"u"?ra="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ra="react-native":ra="node";const fR={"X-Client-Info":`supabase-js-${ra}/${dR}`},hR={headers:fR},mR={schema:"public"},pR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},gR={};var yR=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function h(x){try{m(s.next(x))}catch(_){f(_)}}function g(x){try{m(s.throw(x))}catch(_){f(_)}}function m(x){x.done?l(x.value):r(x.value).then(h,g)}m((s=s.apply(t,e||[])).next())})};const vR=t=>{let e;return t?e=t:typeof fetch>"u"?e=_v:e=fetch,(...n)=>e(...n)},xR=()=>typeof Headers>"u"?Tv:Headers,_R=(t,e,n)=>{const s=vR(n),r=xR();return(l,f)=>yR(void 0,void 0,void 0,function*(){var h;const g=(h=yield e())!==null&&h!==void 0?h:t;let m=new r(f==null?void 0:f.headers);return m.has("apikey")||m.set("apikey",t),m.has("Authorization")||m.set("Authorization",`Bearer ${g}`),s(l,Object.assign(Object.assign({},f),{headers:m}))})};var TR=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function h(x){try{m(s.next(x))}catch(_){f(_)}}function g(x){try{m(s.throw(x))}catch(_){f(_)}}function m(x){x.done?l(x.value):r(x.value).then(h,g)}m((s=s.apply(t,e||[])).next())})};function bR(t){return t.endsWith("/")?t:t+"/"}function wR(t,e){var n,s;const{db:r,auth:l,realtime:f,global:h}=t,{db:g,auth:m,realtime:x,global:_}=e,b={db:Object.assign(Object.assign({},g),r),auth:Object.assign(Object.assign({},m),l),realtime:Object.assign(Object.assign({},x),f),global:Object.assign(Object.assign(Object.assign({},_),h),{headers:Object.assign(Object.assign({},(n=_==null?void 0:_.headers)!==null&&n!==void 0?n:{}),(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>TR(this,void 0,void 0,function*(){return""})};return t.accessToken?b.accessToken=t.accessToken:delete b.accessToken,b}const Dv="2.70.0",Po=30*1e3,rf=3,Rd=rf*Po,SR="http://localhost:9999",CR="supabase.auth.token",ER={"X-Client-Info":`gotrue-js/${Dv}`},af="X-Supabase-Api-Version",Iv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},AR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,NR=6e5;class Cf extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function Re(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class MR extends Cf{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function RR(t){return Re(t)&&t.name==="AuthApiError"}class Uv extends Cf{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class es extends Cf{constructor(e,n,s,r){super(e,s,r),this.name=n,this.status=s}}class Fi extends es{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function kR(t){return Re(t)&&t.name==="AuthSessionMissingError"}class Ll extends es{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Pl extends es{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ol extends es{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function DR(t){return Re(t)&&t.name==="AuthImplicitGrantRedirectError"}class xy extends es{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lf extends es{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function kd(t){return Re(t)&&t.name==="AuthRetryableFetchError"}class _y extends es{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class da extends es{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const eu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ty=` 	
\r=`.split(""),IR=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ty.length;e+=1)t[Ty[e].charCodeAt(0)]=-2;for(let e=0;e<eu.length;e+=1)t[eu[e].charCodeAt(0)]=e;return t})();function by(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(eu[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(eu[s]),e.queuedBits-=6}}function Lv(t,e,n){const s=IR[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function wy(t){const e=[],n=f=>{e.push(String.fromCodePoint(f))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},l=f=>{PR(f,s,n)};for(let f=0;f<t.length;f+=1)Lv(t.charCodeAt(f),r,l);return e.join("")}function UR(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function LR(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}UR(s,e)}}function PR(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function OR(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)Lv(t.charCodeAt(r),n,s);return new Uint8Array(e)}function jR(t){const e=[];return LR(t,n=>e.push(n)),new Uint8Array(e)}function VR(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};return t.forEach(r=>by(r,n,s)),by(null,n,s),e.join("")}function qR(t){return Math.round(Date.now()/1e3)+t}function BR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ln=()=>typeof window<"u"&&typeof document<"u",Cs={tested:!1,writable:!1},fa=()=>{if(!Ln())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Cs.tested)return Cs.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Cs.tested=!0,Cs.writable=!0}catch{Cs.tested=!0,Cs.writable=!1}return Cs.writable};function $R(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,l)=>{e[l]=r})}catch{}return n.searchParams.forEach((s,r)=>{e[r]=s}),e}const Pv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>_a(async()=>{const{default:s}=await Promise.resolve().then(()=>Qo);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},zR=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ov=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},jl=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Vl=async(t,e)=>{await t.removeItem(e)};class lu{constructor(){this.promise=new lu.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}lu.promiseConstructor=Promise;function Dd(t){const e=t.split(".");if(e.length!==3)throw new da("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!AR.test(e[s]))throw new da("JWT not in base64url format");return{header:JSON.parse(wy(e[0])),payload:JSON.parse(wy(e[1])),signature:OR(e[2]),raw:{header:e[0],payload:e[1]}}}async function GR(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function FR(t,e){return new Promise((s,r)=>{(async()=>{for(let l=0;l<1/0;l++)try{const f=await t(l);if(!e(l,null,f)){s(f);return}}catch(f){if(!e(l,f)){r(f);return}}})()})}function HR(t){return("0"+t.toString(16)).substr(-2)}function JR(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let r="";for(let l=0;l<56;l++)r+=n.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,HR).join("")}async function YR(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(s);return Array.from(r).map(l=>String.fromCharCode(l)).join("")}async function ZR(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await YR(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ro(t,e,n=!1){const s=JR();let r=s;n&&(r+="/PASSWORD_RECOVERY"),await Ov(t,`${e}-code-verifier`,r);const l=await ZR(s);return[l,s===l?"plain":"s256"]}const KR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function XR(t){const e=t.headers.get(af);if(!e||!e.match(KR))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function WR(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function QR(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ek=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ko(t){if(!ek.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var tk=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};const Es=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),nk=[502,503,504];async function Sy(t){var e;if(!zR(t))throw new lf(Es(t),0);if(nk.includes(t.status))throw new lf(Es(t),t.status);let n;try{n=await t.json()}catch(l){throw new Uv(Es(l),l)}let s;const r=XR(t);if(r&&r.getTime()>=Iv["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new _y(Es(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Fi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,f)=>l&&typeof f=="string",!0))throw new _y(Es(n),t.status,n.weak_password.reasons);throw new MR(Es(n),t.status||500,s)}const ik=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};async function Ve(t,e,n,s){var r;const l=Object.assign({},s==null?void 0:s.headers);l[af]||(l[af]=Iv["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const f=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(f.redirect_to=s.redirectTo);const h=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",g=await sk(t,e,n+h,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(g):{data:Object.assign({},g),error:null}}async function sk(t,e,n,s,r,l){const f=ik(e,s,r,l);let h;try{h=await t(n,Object.assign({},f))}catch(g){throw console.error(g),new lf(Es(g),0)}if(h.ok||await Sy(h),s!=null&&s.noResolveJson)return h;try{return await h.json()}catch(g){await Sy(g)}}function di(t){var e;let n=null;lk(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=qR(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function Cy(t){const e=di(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Zi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function ok(t){return{data:t,error:null}}function rk(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:l}=t,f=tk(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:l},g=Object.assign({},f);return{data:{properties:h,user:g},error:null}}function ak(t){return t}function lk(t){return t.access_token&&t.refresh_token&&t.expires_in}const Id=["global","local","others"];var uk=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};class ck{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=Pv(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Id[0]){if(Id.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Id.join(", ")}`);try{return await Ve(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await Ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Zi})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=uk(e,["options"]),r=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await Ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:rk,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ve(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Zi})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,r,l,f,h,g;try{const m={nextPage:null,lastPage:0,total:0},x=await Ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:""},xform:ak});if(x.error)throw x.error;const _=await x.json(),b=(f=x.headers.get("x-total-count"))!==null&&f!==void 0?f:0,C=(g=(h=x.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return C.length>0&&(C.forEach(E=>{const N=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(E.split(";")[1].split("=")[1]);m[`${D}Page`]=N}),m.total=parseInt(b)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(Re(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){ko(e);try{return await Ve(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Zi})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){ko(e);try{return await Ve(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Zi})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){ko(e);try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Zi})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){ko(e.userId);try{const{data:n,error:s}=await Ve(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:s}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteFactor(e){ko(e.userId),ko(e.id);try{return{data:await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}}const dk={getItem:t=>fa()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{fa()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{fa()&&globalThis.localStorage.removeItem(t)}};function Ey(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function fk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Do={debug:!!(globalThis&&fa()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class hk extends jv{}async function mk(t,e,n){Do.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Do.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){Do.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await n()}finally{Do.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw Do.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new hk(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Do.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}fk();const pk={url:SR,storageKey:CR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ER,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ay(t,e,n){return await n()}class ga{constructor(e){var n,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ga.nextInstanceID,ga.nextInstanceID+=1,this.instanceID>0&&Ln()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},pk),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new ck({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Pv(r.fetch),this.lock=r.lock||Ay,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Ln()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=mk:this.lock=Ay,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:fa()?this.storage=dk:(this.memoryStorage={},this.storage=Ey(this.memoryStorage)):(this.memoryStorage={},this.storage=Ey(this.memoryStorage)),Ln()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Dv}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=$R(window.location.href);let s="none";if(this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce"),Ln()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:l}=await this._getSessionFromURL(n,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),DR(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:f,redirectType:h}=r;return this._debug("#_initialize()","detected session in URL",f,"redirect type",h),await this._saveSession(f),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Re(n)?{error:n}:{error:new Uv("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,r;try{const l=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:di}),{data:f,error:h}=l;if(h||!f)return{data:{user:null,session:null},error:h};const g=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:m,session:g},error:null}}catch(l){if(Re(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var n,s,r;try{let l;if("email"in e){const{email:x,password:_,options:b}=e;let C=null,E=null;this.flowType==="pkce"&&([C,E]=await Ro(this.storage,this.storageKey)),l=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:x,password:_,data:(n=b==null?void 0:b.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:C,code_challenge_method:E},xform:di})}else if("phone"in e){const{phone:x,password:_,options:b}=e;l=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:_,data:(s=b==null?void 0:b.data)!==null&&s!==void 0?s:{},channel:(r=b==null?void 0:b.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:di})}else throw new Pl("You must provide either an email or phone number and a password");const{data:f,error:h}=l;if(h||!f)return{data:{user:null,session:null},error:h};const g=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:m,session:g},error:null}}catch(l){if(Re(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:f,options:h}=e;n=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:f,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Cy})}else if("phone"in e){const{phone:l,password:f,options:h}=e;n=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:f,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Cy})}else throw new Pl("You must provide either an email or phone number and a password");const{data:s,error:r}=n;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Ll}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,s,r,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,s,r,l,f,h,g,m,x,_,b,C;let E,N;if("message"in e)E=e.message,N=e.signature;else{const{chain:D,wallet:B,statement:z,options:U}=e;let F;if(Ln())if(typeof B=="object")F=B;else{const W=window;if("solana"in W&&typeof W.solana=="object"&&("signIn"in W.solana&&typeof W.solana.signIn=="function"||"signMessage"in W.solana&&typeof W.solana.signMessage=="function"))F=W.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof B!="object"||!(U!=null&&U.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=B}const V=new URL((n=U==null?void 0:U.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in F&&F.signIn){const W=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},U==null?void 0:U.signInWithSolana),{version:"1",domain:V.host,uri:V.href}),z?{statement:z}:null));let se;if(Array.isArray(W)&&W[0]&&typeof W[0]=="object")se=W[0];else if(W&&typeof W=="object"&&"signedMessage"in W&&"signature"in W)se=W;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in se&&"signature"in se&&(typeof se.signedMessage=="string"||se.signedMessage instanceof Uint8Array)&&se.signature instanceof Uint8Array)E=typeof se.signedMessage=="string"?se.signedMessage:new TextDecoder().decode(se.signedMessage),N=se.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${V.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...z?["",z,""]:[""],"Version: 1",`URI: ${V.href}`,`Issued At: ${(r=(s=U==null?void 0:U.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((l=U==null?void 0:U.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${U.signInWithSolana.notBefore}`]:[],...!((f=U==null?void 0:U.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${U.signInWithSolana.expirationTime}`]:[],...!((h=U==null?void 0:U.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${U.signInWithSolana.chainId}`]:[],...!((g=U==null?void 0:U.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${U.signInWithSolana.nonce}`]:[],...!((m=U==null?void 0:U.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${U.signInWithSolana.requestId}`]:[],...!((_=(x=U==null?void 0:U.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||_===void 0)&&_.length?["Resources",...U.signInWithSolana.resources.map(se=>`- ${se}`)]:[]].join(`
`);const W=await F.signMessage(new TextEncoder().encode(E),"utf8");if(!W||!(W instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=W}}try{const{data:D,error:B}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:VR(N)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(C=e.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:di});if(B)throw B;return!D||!D.session||!D.user?{data:{user:null,session:null},error:new Ll}:(D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),{data:Object.assign({},D),error:B})}catch(D){if(Re(D))return{data:{user:null,session:null},error:D};throw D}}async _exchangeCodeForSession(e){const n=await jl(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(n??"").split("/");try{const{data:l,error:f}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:di});if(await Vl(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new Ll}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:r??null}),error:f})}catch(l){if(Re(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:n,provider:s,token:r,access_token:l,nonce:f}=e,h=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:l,nonce:f,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:di}),{data:g,error:m}=h;return m?{data:{user:null,session:null},error:m}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Ll}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:m})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,s,r,l,f;try{if("email"in e){const{email:h,options:g}=e;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await Ro(this.storage,this.storageKey));const{error:_}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},create_user:(s=g==null?void 0:g.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:m,code_challenge_method:x},redirectTo:g==null?void 0:g.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){const{phone:h,options:g}=e,{data:m,error:x}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(f=g==null?void 0:g.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:x}}throw new Pl("You must provide either an email or phone number.")}catch(h){if(Re(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var n,s;try{let r,l;"options"in e&&(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:f,error:h}=await Ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:r,xform:di});if(h)throw h;if(!f)throw new Error("An error occurred on token verification.");const g=f.session,m=f.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:m,session:g},error:null}}catch(r){if(Re(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var n,s,r;try{let l=null,f=null;return this.flowType==="pkce"&&([l,f]=await Ro(this.storage,this.storageKey)),await Ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:f}),headers:this.headers,xform:ok})}catch(l){if(Re(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new Fi;const{error:r}=await Ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Re(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:l}=e,{error:f}=await Ve(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in e){const{phone:s,type:r,options:l}=e,{data:f,error:h}=await Ve(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:h}}throw new Pl("You must provide either an email or phone number and a type")}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await jl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Rd:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let f=this.suppressGetSessionWarning;e=new Proxy(e,{get:(g,m,x)=>(!f&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,m,x))})}return{data:{session:e},error:null}}const{session:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Zi}):await this._useSession(async n=>{var s,r,l;const{data:f,error:h}=n;if(h)throw h;return!(!((s=f.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fi}:await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(r=f.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0,xform:Zi})})}catch(n){if(Re(n))return kR(n)&&(await this._removeSession(),await Vl(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:r,error:l}=s;if(l)throw l;if(!r.session)throw new Fi;const f=r.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await Ro(this.storage,this.storageKey));const{data:m,error:x}=await Ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:f.access_token,xform:Zi});if(x)throw x;return f.user=m.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Fi;const n=Date.now()/1e3;let s=n,r=!0,l=null;const{payload:f}=Dd(e.access_token);if(f.exp&&(s=f.exp,r=s<=n),r){const{session:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(n){if(Re(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:f,error:h}=n;if(h)throw h;e=(s=f.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Fi;const{session:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Ln())throw new Ol("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ol(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new xy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ol("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new xy("No code detected.");const{data:z,error:U}=await this._exchangeCodeForSession(e.code);if(U)throw U;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:l,refresh_token:f,expires_in:h,expires_at:g,token_type:m}=e;if(!l||!h||!f||!m)throw new Ol("No session defined in URL");const x=Math.round(Date.now()/1e3),_=parseInt(h);let b=x+_;g&&(b=parseInt(g));const C=b-x;C*1e3<=Po&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${_}s`);const E=b-_;x-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,b,x):x-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,b,x);const{data:N,error:D}=await this._getUser(l);if(D)throw D;const B={provider_token:s,provider_refresh_token:r,access_token:l,expires_in:_,expires_at:b,refresh_token:f,token_type:m,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:B,redirectType:e.type},error:null}}catch(s){if(Re(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await jl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:r,error:l}=n;if(l)return{error:l};const f=(s=r.session)===null||s===void 0?void 0:s.access_token;if(f){const{error:h}=await this.admin.signOut(f,e);if(h&&!(RR(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await Vl(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=BR(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,r;try{const{data:{session:l},error:f}=n;if(f)throw f;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await Ro(this.storage,this.storageKey,!0));try{return await Ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(Re(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:s,error:r}=await this._useSession(async l=>{var f,h,g,m,x;const{data:_,error:b}=l;if(b)throw b;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(f=e.options)===null||f===void 0?void 0:f.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Ve(this.fetch,"GET",C,{headers:this.headers,jwt:(x=(m=_.session)===null||m===void 0?void 0:m.access_token)!==null&&x!==void 0?x:void 0})});if(r)throw r;return Ln()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(Re(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,r;const{data:l,error:f}=n;if(f)throw f;return await Ve(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await FR(async r=>(r>0&&await GR(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await Ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:di})),(r,l)=>{const f=200*Math.pow(2,r);return l&&kd(l)&&Date.now()+f-s<Po})}catch(s){if(this._debug(n,"error",s),Re(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),Ln()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await jl(this.storage,this.storageKey);if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const r=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Rd;if(this._debug(n,`session has${r?"":" not"} expired with margin of ${Rd}s`),r){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),kd(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new Fi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new lu;const{data:l,error:f}=await this._refreshAccessToken(e);if(f)throw f;if(!l.session)throw new Fi;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={session:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(r,"error",l),Re(l)){const f={session:null,error:l};return kd(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(f),f}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,n,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],f=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(g){l.push(g)}});if(await Promise.all(f),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ov(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Vl(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ln()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Po);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/Po);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Po}ms, refresh threshold is ${rf} ticks`),r<=rf&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof jv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ln()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const r=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,f]=await Ro(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(f)}`});r.push(h.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);r.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:r,error:l}=n;return l?{data:null,error:l}:await Ve(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,r;const{data:l,error:f}=n;if(f)return{data:null,error:f};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:g,error:m}=await Ve(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&(!((r=g==null?void 0:g.totp)===null||r===void 0)&&r.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:l}=n;if(l)return{data:null,error:l};const{data:f,error:h}=await Ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),{data:f,error:h})})}catch(n){if(Re(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:l}=n;return l?{data:null,error:l}:await Ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(Re(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const s=(e==null?void 0:e.factors)||[],r=s.filter(f=>f.factor_type==="totp"&&f.status==="verified"),l=s.filter(f=>f.factor_type==="phone"&&f.status==="verified");return{data:{all:s,totp:r,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,s;const{data:{session:r},error:l}=e;if(l)return{data:null,error:l};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=Dd(r.access_token);let h=null;f.aal&&(h=f.aal);let g=h;((s=(n=r.user.factors)===null||n===void 0?void 0:n.filter(_=>_.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(g="aal2");const x=f.amr||[];return{data:{currentLevel:h,nextLevel:g,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(f=>f.kid===e);if(s||(s=this.jwks.keys.find(f=>f.kid===e),s&&this.jwks_cached_at+NR>Date.now()))return s;const{data:r,error:l}=await Ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;if(!r.keys||r.keys.length===0)throw new da("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),s=r.keys.find(f=>f.kid===e),!s)throw new da("No matching signing key found in JWKS");return s}async getClaims(e,n={keys:[]}){try{let s=e;if(!s){const{data:C,error:E}=await this.getSession();if(E||!C.session)return{data:null,error:E};s=C.session.access_token}const{header:r,payload:l,signature:f,raw:{header:h,payload:g}}=Dd(s);if(WR(l.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:C}=await this.getUser(s);if(C)throw C;return{data:{claims:l,header:r,signature:f},error:null}}const m=QR(r.alg),x=await this.fetchJwk(r.kid,n),_=await crypto.subtle.importKey("jwk",x,m,!0,["verify"]);if(!await crypto.subtle.verify(m,_,f,jR(`${h}.${g}`)))throw new da("Invalid JWT signature");return{data:{claims:l,header:r,signature:f},error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}}}ga.nextInstanceID=0;const gk=ga;class yk extends gk{constructor(e){super(e)}}var vk=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function h(x){try{m(s.next(x))}catch(_){f(_)}}function g(x){try{m(s.throw(x))}catch(_){f(_)}}function m(x){x.done?l(x.value):r(x.value).then(h,g)}m((s=s.apply(t,e||[])).next())})};class xk{constructor(e,n,s){var r,l,f;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const h=bR(e),g=new URL(h);this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const m=`sb-${g.hostname.split(".")[0]}-auth-token`,x={db:mR,realtime:gR,auth:Object.assign(Object.assign({},pR),{storageKey:m}),global:hR},_=wR(s??{},x);this.storageKey=(r=_.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(l=_.global.headers)!==null&&l!==void 0?l:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(b,C)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(C)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=_.auth)!==null&&f!==void 0?f:{},this.headers,_.global.fetch),this.fetch=_R(n,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.rest=new PM(new URL("rest/v1",g).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),_.accessToken||this._listenForAuthEvents()}get functions(){return new SM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new cR(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return vk(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:r,storageKey:l,flowType:f,lock:h,debug:g},m,x){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yk({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),m),storageKey:l,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:r,flowType:f,lock:h,debug:g,fetch:x,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new XM(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const _k=(t,e,n)=>new xk(t,e,n),Tk="https://jfjbgqrwkneyyfylttkh.supabase.co",bk="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmamJncXJ3a25leXlmeWx0dGtoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4NzYyMTAsImV4cCI6MjA2NzQ1MjIxMH0.N7Q28PiuDQHL05LorPJ_5aYxYC-VGgs6t-IA3tZK9XQ",ut=_k(Tk,bk);class Ns{static async getProjects(){const{data:e,error:n}=await ut.from("projects").select(`
        *,
        project_members!inner(role)
      `).order("updated_at",{ascending:!1});if(n)throw new Error(`プロジェクトの取得に失敗しました: ${n.message}`);return e.map(s=>{var r;return{id:s.id,title:s.title,goal:s.goal,targetDate:s.target_date,tasks:s.tasks_data||[],ganttData:s.gantt_data,createdAt:s.created_at,updatedAt:s.updated_at,ownerId:s.owner_id,isPublic:s.is_public,lastModifiedBy:s.last_modified_by,userRole:(r=s.project_members[0])==null?void 0:r.role}})}static async createProject(e,n,s,r=[],l){const{data:{user:f}}=await ut.auth.getUser();if(!f)throw new Error("ログインが必要です");const{data:h,error:g}=await ut.from("projects").insert({owner_id:f.id,user_id:f.id,title:e,goal:n,target_date:s,tasks_data:r,gantt_data:l}).select().single();if(g)throw new Error(`プロジェクトの作成に失敗しました: ${g.message}`);return{id:h.id,title:h.title,goal:h.goal,targetDate:h.target_date,tasks:h.tasks_data||[],ganttData:h.gantt_data,createdAt:h.created_at,updatedAt:h.updated_at,ownerId:h.owner_id,isPublic:h.is_public,lastModifiedBy:h.last_modified_by,userRole:"owner"}}static async updateProject(e,n){var f;const s={};n.title!==void 0&&(s.title=n.title),n.goal!==void 0&&(s.goal=n.goal),n.targetDate!==void 0&&(s.target_date=n.targetDate),n.tasks!==void 0&&(s.tasks_data=n.tasks),n.ganttData!==void 0&&(s.gantt_data=n.ganttData),n.isPublic!==void 0&&(s.is_public=n.isPublic);const{data:r,error:l}=await ut.from("projects").update(s).eq("id",e).select(`
        *,
        project_members!inner(role)
      `).single();if(l)throw new Error(`プロジェクトの更新に失敗しました: ${l.message}`);return{id:r.id,title:r.title,goal:r.goal,targetDate:r.target_date,tasks:r.tasks_data||[],ganttData:r.gantt_data,createdAt:r.created_at,updatedAt:r.updated_at,ownerId:r.owner_id,isPublic:r.is_public,lastModifiedBy:r.last_modified_by,userRole:(f=r.project_members[0])==null?void 0:f.role}}static async deleteProject(e){const{error:n}=await ut.from("projects").delete().eq("id",e);if(n)throw new Error(`プロジェクトの削除に失敗しました: ${n.message}`)}static async getProject(e){var r;const{data:n,error:s}=await ut.from("projects").select(`
        *,
        project_members!inner(role)
      `).eq("id",e).single();if(s)throw new Error(`プロジェクトの取得に失敗しました: ${s.message}`);return{id:n.id,title:n.title,goal:n.goal,targetDate:n.target_date,tasks:n.tasks_data||[],ganttData:n.gantt_data,createdAt:n.created_at,updatedAt:n.updated_at,ownerId:n.owner_id,isPublic:n.is_public,lastModifiedBy:n.last_modified_by,userRole:(r=n.project_members[0])==null?void 0:r.role}}static async toggleProjectVisibility(e){const s=!(await this.getProject(e)).isPublic;return await this.updateProject(e,{isPublic:s}),s}}const Qt=({size:t="md",color:e="border-blue-500",text:n})=>{const s={sm:"w-6 h-6",md:"w-10 h-10",lg:"w-16 h-16"};return y.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[y.jsx("div",{className:`animate-spin rounded-full border-4 ${e} border-t-transparent ${s[t]}`}),n&&y.jsx("p",{className:"text-slate-600 text-sm",children:n})]})},Ef=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-3.75h.008v.008H12v-.008ZM12 15h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5v-.008ZM9.75 18.75h.008v.008H9.75v-.008ZM7.5 18.75h.008v.008H7.5v-.008ZM14.25 15h.008v.008H14.25v-.008ZM16.5 15h.008v.008H16.5v-.008ZM14.25 18.75h.008v.008H14.25v-.008ZM16.5 18.75h.008v.008H16.5v-.008Z"})}),Af=t=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m12 12 4.243 4.243"})]}),wk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})}),Zn=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),Vv=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})}),Sk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})}),Jo=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),Ck=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Ms=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12.56 0c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),Nf=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),ha=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),qv=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.354a15.055 15.055 0 0 1-3 0M12.75 4.5v-.75a.75.75 0 0 0-.75-.75h-.75a.75.75 0 0 0-.75.75v.75m0 0A2.25 2.25 0 0 0 9.75 6.75h4.5A2.25 2.25 0 0 0 12.75 4.5M12 18.75h.008v.008H12v-.008Z"})}),Rs=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),Ek=({title:t,...e})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[t&&y.jsx("title",{children:t}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9.75V12m0 0H9.75M12 12h2.25m-2.25 0V9.75M12 12v2.25m0 0H9.75M12 14.25h2.25M12 6.75a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Zm0 0V3m0 3.75h.008v.008H12V6.75Zm-5.25 0H3.75m0 0V3m0 3.75h.008v.008H3.75V6.75Zm10.5 0h2.25m0 0V3m0 3.75h.008v.008H16.5V6.75Z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})]}),Bv=t=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75h16.5v16.5H3.75V3.75Z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9 12.75 3 3 6-6"})]}),$v=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25-2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"})}),Mf=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),Ak=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Nk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Mk=t=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113A.375.375 0 0 1 9.75 15.113V8.887c0-.286.307-.466.557-.332l5.603 3.118Z"})]}),Rk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),zv=t=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3v11.25A2.25 2.25 0 006 16.5h12A2.25 2.25 0 0020.25 14.25V3M3.75 21h16.5M16.5 3.75h.008v.008H16.5V3.75zm-3.75 0h.008v.008H12.75V3.75zm-3.75 0h.008v.008H9V3.75zm-3.75 0h.008v.008H5.25V3.75z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.5h18M9.75 16.5a.75.75 0 01.75-.75h3a.75.75 0 01.75.75v4.5a.75.75 0 01-.75.75h-3a.75.75 0 01-.75-.75v-4.5z"})]}),kk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})}),Dk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})}),Ik=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15 15 6-6m0 0-6-6m6 6H3a6 6 0 0 0 0 12h3"})}),Uk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.122 2.122l7.81-7.81"})}),Lk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125v-1.5c0-.621.504-1.125 1.125-1.125h17.25c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h-1.5m1.5 0v-1.5m17.25 1.5v-1.5m0 0h1.5m-1.5 0h-17.25m0 0H3.375c-.621 0-1.125-.504-1.125-1.125v-12.75c0-.621.504-1.125 1.125-1.125h17.25c.621 0 1.125.504 1.125 1.125v12.75c0 .621-.504 1.125-1.125 1.125M12 4.5v15m0 0H9m3 0h3"})}),Pk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...t,children:y.jsx("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z",clipRule:"evenodd"})}),Ok=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...t,children:y.jsx("path",{d:"M10 2a5 5 0 00-5 5v2a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-1V7a5 5 0 00-5-5zm0 2.5a2.5 2.5 0 00-2.5 2.5V9h5V7a2.5 2.5 0 00-2.5-2.5z"})}),Rf=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.572L16.5 21.75l-.398-1.178a3.375 3.375 0 00-2.455-2.456L12.5 17.25l1.178-.398a3.375 3.375 0 002.455-2.456L16.5 13.5l.398 1.178a3.375 3.375 0 002.456 2.456L20.25 17.25l-1.178.398a3.375 3.375 0 00-2.456 2.456z"})}),jk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75c0-.231-.035-.454-.1-.664M6.75 7.5H18v2.25H6.75V7.5zM3 12h3v6.75a2.25 2.25 0 002.25 2.25h9.75a2.25 2.25 0 002.25-2.25V12h3m-3.498 6.75H15"})}),Gv=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"})}),ya=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})}),uf=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",...t,children:y.jsx("path",{d:"M7.247 4.86l-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"})}),cf=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",...t,children:y.jsx("path",{d:"M7.247 11.14l-4.796-5.481c-.566-.647-.106-1.659.753-1.659h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"})}),va=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25z"})}),Vk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})}),qk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),Bk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})}),$k=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})}),zk=t=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),Gk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 1-4.243-4.243m4.242 4.242L9.88 9.88"})}),Fk=({onSubmit:t,isLoading:e,onImportProject:n,onLoadTemplate:s,initialGoal:r="",initialDate:l="",onOpenProjectList:f,onLogout:h,user:g})=>{const[m,x]=G.useState(r),[_,b]=G.useState(l),C=G.useRef(null);qo.useEffect(()=>{x(r)},[r]),qo.useEffect(()=>{b(l)},[l]);const E=new Date().toISOString().split("T")[0],N=F=>{if(F.preventDefault(),!m.trim()||!_){alert("事業目的と目標日付を入力してください。");return}t(m,_)},D=()=>{var F;(F=C.current)==null||F.click()},B=F=>{var W;const V=(W=F.target.files)==null?void 0:W[0];V&&(n(V),F.target.value="")},z=F=>{if(!m.trim()||!_){alert("テンプレートから開始するには、まずプロジェクトの目的と目標の日付を入力してください。");return}s(F,m,_)},U=({template:F,title:V,description:W,disabled:se})=>y.jsxs("button",{type:"button",onClick:()=>z(F),disabled:se,className:"text-left p-4 bg-purple-600 hover:bg-purple-700 disabled:bg-slate-400 text-white rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105",children:[y.jsx("div",{className:"font-semibold text-md",children:V}),y.jsx("div",{className:"text-xs text-purple-200 mt-1",children:W})]});return y.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-slate-900 to-slate-700 p-4",children:[y.jsxs("div",{className:"w-full max-w-2xl mb-4 flex justify-between items-center",children:[y.jsxs("div",{className:"text-white text-sm",children:["ログイン中: ",g==null?void 0:g.email]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2 bg-slate-600 text-white rounded-md hover:bg-slate-500",children:[y.jsx(ya,{className:"w-5 h-5"}),"保存済みプロジェクト"]}),y.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:[y.jsx(va,{className:"w-5 h-5"}),"ログアウト"]})]})]}),y.jsxs("div",{className:"w-full max-w-2xl bg-white shadow-2xl rounded-xl p-8 md:p-12",children:[y.jsxs("div",{className:"text-center mb-10",children:[y.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-3",children:"AIプロジェクトプランナー"}),y.jsx("p",{className:"text-slate-600 text-lg",children:"あなたの目標達成をAIがお手伝いします。"})]}),y.jsxs("form",{onSubmit:N,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"projectGoal",className:"block text-sm font-semibold text-slate-700 mb-2 flex items-center",children:[y.jsx(Af,{className:"w-5 h-5 mr-2 text-blue-600"}),"プロジェクトの目的 (最終形)"]}),y.jsx("textarea",{id:"projectGoal",value:m,onChange:F=>x(F.target.value),placeholder:"例: 新しいEコマースサイトを立ち上げ、初年度売上1000万円を目指す",rows:3,className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out text-base text-slate-100 placeholder-slate-400"})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"targetDate",className:"block text-sm font-semibold text-slate-700 mb-2 flex items-center",children:[y.jsx(Ef,{className:"w-5 h-5 mr-2 text-blue-600"}),"目標の日付"]}),y.jsx("input",{type:"date",id:"targetDate",value:_,onChange:F=>b(F.target.value),min:E,className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out text-base text-slate-100",style:{colorScheme:"dark"}})]}),y.jsx("p",{className:"text-sm text-slate-500 text-center",children:"目的と日付を入力して計画を作成するか、テンプレートまたは既存の計画から開始します。"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[y.jsx("button",{type:"submit",disabled:e,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 flex items-center justify-center text-md",children:e?y.jsx(Qt,{size:"sm",color:"border-white"}):"AIで計画を作成"}),y.jsxs("button",{type:"button",onClick:D,disabled:e,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-slate-400 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 flex items-center justify-center text-md",children:[y.jsx(Sk,{className:"w-5 h-5 mr-2"}),"計画をインポート (.json)"]}),y.jsx("input",{type:"file",ref:C,onChange:B,accept:".json",className:"hidden","aria-hidden":"true"})]}),y.jsxs("div",{className:"sm:col-span-2 pt-4",children:[y.jsx("p",{className:"text-center text-sm font-semibold text-slate-600 mb-3",children:"または、テンプレートから開始:"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[y.jsx(U,{template:"process-design",disabled:e,title:"工程設計 (APQP)",description:"新製品の工程をAPQPに基づき計画から量産まで設計します。"}),y.jsx(U,{template:"process-change",disabled:e,title:"工程変更 (ISO/IATF)",description:"既存工程の変更を影響分析、承認、検証を含めて管理します。"}),y.jsx(U,{template:"new-product-eval",disabled:e,title:"新製品の設備評価",description:"顧客要求に基づき、既存設備での実現可能性を評価・報告します。"}),y.jsx(U,{template:"improvement-project",disabled:e,title:"生産性・コスト改善",description:"DMAICフレームワークに基づき、既存プロセスの問題を解決し、改善します。"}),y.jsx(U,{template:"equipment-modification",disabled:e,title:"社内設備改造",description:"社内設備・治具の改造・改善を計画・実行・評価します。"})]})]})]})]}),y.jsx("footer",{className:"mt-12 text-center",children:y.jsx("p",{className:"text-slate-400 text-sm",children:"Powered by Gemini API & Supabase"})})]})},ql=t=>{switch(t){case Le.IN_PROGRESS:return{icon:y.jsx(Mk,{className:"w-3.5 h-3.5"}),color:"text-blue-700",text:"進行中",bgColor:"bg-blue-100"};case Le.COMPLETED:return{icon:y.jsx(Nf,{className:"w-3.5 h-3.5"}),color:"text-green-700",text:"完了",bgColor:"bg-green-100"};case Le.BLOCKED:return{icon:y.jsx(Rk,{className:"w-3.5 h-3.5"}),color:"text-red-700",text:"停滞中",bgColor:"bg-red-100"};case Le.NOT_STARTED:default:return{icon:y.jsx(Nk,{className:"w-3.5 h-3.5"}),color:"text-slate-600",text:"未着手",bgColor:"bg-slate-100"}}},Hk=({task:t,onSelectTask:e,onRemoveTask:n,onUpdateStatus:s,onDragCardStart:r,index:l,cardRef:f,onStartConnection:h,onEndConnection:g})=>{var W,se,ye,ne;const[m,x]=G.useState(!1),_=G.useRef(null);G.useEffect(()=>{const oe=re=>{_.current&&!_.current.contains(re.target)&&x(!1)};return document.addEventListener("mousedown",oe),()=>{document.removeEventListener("mousedown",oe)}},[_]);const b=oe=>{s(t.id,oe),x(!1)},C=(W=t.extendedDetails)==null?void 0:W.numericalTarget;let E="text-slate-500";C&&(C.status===Ld.ACHIEVED?E="text-green-600":C.status===Ld.MISSED?E="text-red-600":E="text-yellow-600");const N=ql(t.status),D=(se=t.extendedDetails)==null?void 0:se.dueDate,B=D?new Date(D+"T00:00:00Z").toLocaleDateString("ja-JP",{month:"short",day:"numeric"}):null,z=t.status===Le.IN_PROGRESS,U="task-card-in-flow bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 ease-in-out overflow-hidden flex-shrink-0 w-80 md:w-96 m-1 cursor-grab active:cursor-grabbing",F=z?"border-4 border-blue-500 ring-2 ring-blue-500 ring-offset-1":"border border-transparent",V=oe=>{oe.stopPropagation(),h(t.id,oe)};return y.jsxs("div",{ref:f,id:`taskcard-${t.id}`,draggable:"true",onDragStart:oe=>r(oe,t.id),onMouseUp:()=>g(t.id),className:`${U} ${F}`,style:{position:"absolute",left:((ye=t.position)==null?void 0:ye.x)||0,top:((ne=t.position)==null?void 0:ne.y)||0,touchAction:"none"},children:[y.jsxs("div",{className:"p-5 relative",children:[y.jsx("div",{onMouseDown:V,className:"absolute right-[-6px] top-1/2 -translate-y-1/2 w-4 h-4 bg-blue-500 border-2 border-white rounded-full cursor-crosshair hover:scale-125 transition-transform z-10",title:"ドラッグして接続"}),y.jsxs("div",{className:"flex items-start justify-between mb-2",children:[y.jsxs("div",{className:"flex items-center flex-grow min-w-0 mr-2",children:[y.jsx("span",{className:"bg-blue-600 text-white rounded-full w-7 h-7 flex items-center justify-center font-bold text-xs mr-3 flex-shrink-0",children:l+1}),y.jsx("div",{className:"flex-grow min-w-0",children:y.jsx("div",{className:"text-lg font-bold text-slate-900 break-words","aria-label":`task title for ${t.title}`,children:t.title})})]}),y.jsxs("div",{className:"flex space-x-1 flex-shrink-0 items-center",children:[C&&y.jsx(Ek,{className:`w-5 h-5 ${E}`,title:`数値目標: ${C.description} (${C.status})`}),y.jsx("button",{onClick:oe=>{oe.stopPropagation(),e(t)},className:"text-blue-600 hover:text-blue-800 transition-colors p-1 rounded-full hover:bg-blue-100",title:"詳細・計画編集","aria-label":`詳細・計画編集: ${t.title}`,children:y.jsx(wk,{className:"w-5 h-5"})}),y.jsx("button",{onClick:oe=>{oe.stopPropagation(),n(t.id)},className:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-100",title:"タスクを削除","aria-label":`タスクを削除: ${t.title}`,children:y.jsx(Ms,{className:"w-5 h-5"})})]})]}),y.jsx("div",{className:"h-20 mb-3",children:y.jsx("p",{className:"text-slate-800 text-sm leading-relaxed line-clamp-4 overflow-hidden h-full",children:t.description})}),y.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 mb-2",children:[y.jsxs("div",{className:"relative",ref:_,children:[y.jsxs("button",{onClick:()=>x(oe=>!oe),className:`inline-flex items-center px-2 py-0.5 rounded-full cursor-pointer ${N.bgColor} ${N.color} hover:ring-2 hover:ring-offset-1 hover:ring-blue-400 transition-all`,title:"ステータスを変更",children:[qo.cloneElement(N.icon,{className:`w-3 h-3 mr-1 ${N.color}`}),N.text]}),m&&y.jsx("div",{className:"absolute bottom-full mb-1 w-36 bg-white border border-slate-200 rounded-md shadow-lg z-20 py-1",children:Object.values(Le).map(oe=>y.jsxs("button",{onClick:()=>b(oe),className:"w-full text-left px-3 py-1.5 text-sm text-slate-700 hover:bg-slate-100 flex items-center",children:[qo.cloneElement(ql(oe).icon,{className:`w-3.5 h-3.5 mr-2 ${ql(oe).color}`}),ql(oe).text]},oe))})]}),B&&y.jsxs("div",{className:"flex items-center text-orange-600",children:[y.jsx(Ak,{className:"w-3.5 h-3.5 mr-1"}),"期日: ",B]})]})]}),y.jsx("button",{onClick:oe=>{oe.stopPropagation(),e(t)},className:"block w-full text-left bg-slate-100 hover:bg-slate-200 text-blue-700 font-medium py-3 px-5 transition-colors text-xs border-t border-slate-200",children:"詳細な計画・レポート・接続 →"})]})},Jk=G.memo(Hk),df=({from:t,to:e,id:n,onDelete:s})=>{const f=t.x,h=e.x,g=(f+h)/2,m=(t.y+e.y)/2,x=`M${f},${t.y} C${f+50},${t.y} ${h-50},${e.y} ${h},${e.y}`;return y.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",overflow:"visible"},"aria-hidden":"true",children:[y.jsx("defs",{children:y.jsx("marker",{id:`arrowhead-${n}`,markerWidth:8,markerHeight:8*.7,refX:8,refY:8*.35,orient:"auto",markerUnits:"strokeWidth",children:y.jsx("path",{d:`M0,0 L8,${8*.35} L0,${8*.7} Z`,fill:"#64748b"})})}),y.jsxs("g",{style:{pointerEvents:s?"auto":"none"},children:[y.jsx("path",{d:x,stroke:"#64748b",strokeWidth:2,markerEnd:`url(#arrowhead-${n})`,fill:"none"}),y.jsx("path",{d:x,stroke:"transparent",strokeWidth:"16",fill:"none",className:s?"cursor-pointer group":"",onClick:s}),s&&y.jsxs("g",{transform:`translate(${g}, ${m})`,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:s,children:[y.jsx("circle",{cx:"0",cy:"0",r:"8",fill:"white",stroke:"#ef4444",strokeWidth:"1"}),y.jsx("path",{d:"M -3.5 -3.5 L 3.5 3.5 M -3.5 3.5 L 3.5 -3.5",stroke:"#ef4444",strokeWidth:"1.5",strokeLinecap:"round"})]})]})]})},Yk=({tasks:t,onClose:e})=>{const[n,s]=G.useState("all"),[r,l]=G.useState(""),[f,h]=G.useState(null),g=G.useMemo(()=>{const E=[];return t.forEach(N=>{var D,B;(B=(D=N.extendedDetails)==null?void 0:D.subSteps)==null||B.forEach(z=>{var U;(U=z.actionItems)==null||U.forEach(F=>{E.push({actionItem:F,subStep:z,task:N})})})}),E},[t]),m=G.useMemo(()=>g.filter(E=>n==="completed"?E.actionItem.completed:n==="pending"?!E.actionItem.completed:!0).filter(E=>{const N=r.toLowerCase();return E.actionItem.text.toLowerCase().includes(N)||E.subStep.text.toLowerCase().includes(N)||(E.subStep.responsible||"").toLowerCase().includes(N)||E.task.title.toLowerCase().includes(N)}),[g,n,r]),x=G.useMemo(()=>{let E=[...m];return f!==null&&E.sort((N,D)=>{let B="",z="";switch(f.key){case"status":B=N.actionItem.completed,z=D.actionItem.completed;break;case"actionItem":B=N.actionItem.text.toLowerCase(),z=D.actionItem.text.toLowerCase();break;case"responsible":B=(N.subStep.responsible||"").toLowerCase(),z=(D.subStep.responsible||"").toLowerCase();break;case"subStep":B=N.subStep.text.toLowerCase(),z=D.subStep.text.toLowerCase();break;case"task":B=N.task.title.toLowerCase(),z=D.task.title.toLowerCase();break;case"dueDate":B=N.actionItem.dueDate||N.subStep.dueDate||"9999-12-31",z=D.actionItem.dueDate||D.subStep.dueDate||"9999-12-31";break}return B<z?f.direction==="ascending"?-1:1:B>z?f.direction==="ascending"?1:-1:0}),E},[m,f]),_=E=>{let N="ascending";f&&f.key===E&&f.direction==="ascending"&&(N="descending"),h({key:E,direction:N})},b=E=>!f||f.key!==E?y.jsx(uf,{className:"w-3 h-3 ml-1 opacity-20"}):f.direction==="ascending"?y.jsx(uf,{className:"w-3 h-3 ml-1 text-blue-600"}):y.jsx(cf,{className:"w-3 h-3 ml-1 text-blue-600"}),C=({sortKey:E,label:N,className:D})=>y.jsx("th",{scope:"col",className:`px-6 py-3 ${D||""}`,children:y.jsxs("button",{onClick:()=>_(E),className:"flex items-center gap-1 hover:text-blue-600 transition-colors",children:[N,b(E)]})});return y.jsxs("div",{className:"fixed inset-0 bg-slate-100 z-[60] flex flex-col",children:[y.jsx("header",{className:"flex-shrink-0 bg-white shadow-md",children:y.jsxs("div",{className:"flex items-center justify-between p-4 border-b w-full max-w-7xl mx-auto",children:[y.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"全アクションアイテム一覧"}),y.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold text-slate-700 bg-slate-200 rounded-md hover:bg-slate-300",children:[y.jsx(Vv,{className:"w-5 h-5"}),"フローに戻る"]})]})}),y.jsxs("main",{className:"flex-grow flex flex-col overflow-hidden p-4 w-full max-w-7xl mx-auto",children:[y.jsx("div",{className:"p-4 flex-shrink-0 bg-white rounded-t-lg border-x border-t",children:y.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[y.jsx("input",{type:"text",placeholder:"検索...",value:r,onChange:E=>l(E.target.value),className:"px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm w-full sm:w-auto flex-grow"}),y.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-slate-100 p-1",children:[y.jsx("button",{onClick:()=>s("all"),className:`px-3 py-1 text-sm rounded-md ${n==="all"?"bg-white shadow":"hover:bg-slate-200"}`,children:"全て"}),y.jsx("button",{onClick:()=>s("pending"),className:`px-3 py-1 text-sm rounded-md ${n==="pending"?"bg-white shadow":"hover:bg-slate-200"}`,children:"未完了"}),y.jsx("button",{onClick:()=>s("completed"),className:`px-3 py-1 text-sm rounded-md ${n==="completed"?"bg-white shadow":"hover:bg-slate-200"}`,children:"完了"})]})]})}),y.jsx("div",{className:"flex-grow overflow-y-auto bg-white rounded-b-lg border",children:y.jsxs("table",{className:"w-full text-sm text-left text-slate-600",children:[y.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-100 sticky top-0 z-10",children:y.jsxs("tr",{children:[y.jsx(C,{sortKey:"status",label:"状態",className:"w-24"}),y.jsx(C,{sortKey:"actionItem",label:"アクションアイテム"}),y.jsx(C,{sortKey:"responsible",label:"担当者"}),y.jsx(C,{sortKey:"subStep",label:"所属サブステップ"}),y.jsx(C,{sortKey:"task",label:"所属タスク"}),y.jsx(C,{sortKey:"dueDate",label:"期日"})]})}),y.jsxs("tbody",{className:"divide-y divide-slate-200",children:[x.map(({actionItem:E,subStep:N,task:D},B)=>y.jsxs("tr",{className:"hover:bg-slate-50",children:[y.jsx("td",{className:"px-6 py-3",children:E.completed?y.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[y.jsx(Bv,{className:"w-4 h-4 mr-1"}),"完了"]}):y.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-800",children:[y.jsx($v,{className:"w-4 h-4 mr-1"}),"未完了"]})}),y.jsx("td",{className:"px-6 py-3 font-medium text-slate-900",children:E.text}),y.jsx("td",{className:"px-6 py-3",children:N.responsible||"未設定"}),y.jsx("td",{className:"px-6 py-3",children:N.text}),y.jsx("td",{className:"px-6 py-3",children:D.title}),y.jsx("td",{className:"px-6 py-3",children:E.dueDate||N.dueDate?new Date((E.dueDate||N.dueDate)+"T00:00:00Z").toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):"未設定"})]},E.id+B)),x.length===0&&y.jsx("tr",{children:y.jsx("td",{colSpan:6,className:"text-center py-8 text-slate-500",children:"条件に一致するアイテムはありません。"})})]})]})})]})]})},Ny={"On Track":{bgColor:"bg-green-100",textColor:"text-green-800",icon:y.jsx(Nf,{className:"w-12 h-12 text-green-500"})},"At Risk":{bgColor:"bg-yellow-100",textColor:"text-yellow-800",icon:y.jsx(ha,{className:"w-12 h-12 text-yellow-500"})},"Off Track":{bgColor:"bg-red-100",textColor:"text-red-800",icon:y.jsx(ha,{className:"w-12 h-12 text-red-500"})},Unknown:{bgColor:"bg-slate-100",textColor:"text-slate-800",icon:y.jsx(ha,{className:"w-12 h-12 text-slate-500"})}},Zk=({report:t,onClose:e})=>{if(!t)return null;const n=Ny[t.overallStatus]||Ny.Unknown;return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center p-4 z-[60]",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl h-[90vh] flex flex-col",children:[y.jsxs("header",{className:"flex items-center justify-between p-5 border-b border-slate-200 flex-shrink-0",children:[y.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"AIプロジェクト診断レポート"}),y.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-slate-100",children:y.jsx(Zn,{className:"w-6 h-6 text-slate-500"})})]}),y.jsxs("div",{className:"flex-grow p-6 overflow-y-auto space-y-6",children:[y.jsxs("section",{className:`p-6 rounded-lg flex items-center gap-6 ${n.bgColor}`,children:[y.jsx("div",{className:"flex-shrink-0",children:n.icon}),y.jsxs("div",{children:[y.jsx("h4",{className:`text-2xl font-bold ${n.textColor}`,children:t.overallStatus}),y.jsx("p",{className:`mt-1 text-base ${n.textColor}`,children:t.summary})]})]}),y.jsxs("section",{children:[y.jsxs("h5",{className:"text-lg font-semibold text-slate-700 mb-3 flex items-center",children:[y.jsx(Nf,{className:"w-5 h-5 mr-2 text-green-500"}),"うまくいっている点"]}),y.jsx("ul",{className:"list-disc list-inside space-y-2 text-slate-600 pl-2",children:t.positivePoints.map((s,r)=>y.jsx("li",{children:s},r))})]}),y.jsxs("section",{children:[y.jsxs("h5",{className:"text-lg font-semibold text-slate-700 mb-3 flex items-center",children:[y.jsx(ha,{className:"w-5 h-5 mr-2 text-yellow-500"}),"懸念事項"]}),y.jsx("div",{className:"space-y-3",children:t.areasOfConcern.map((s,r)=>y.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg",children:[y.jsx("p",{className:"font-semibold text-yellow-800",children:s.description}),s.relatedTaskIds.length>0&&y.jsxs("p",{className:"text-xs text-yellow-700 mt-1",children:["関連タスクID: ",s.relatedTaskIds.join(", ")]})]},r))})]}),y.jsxs("section",{children:[y.jsxs("h5",{className:"text-lg font-semibold text-slate-700 mb-3 flex items-center",children:[y.jsx(qv,{className:"w-5 h-5 mr-2 text-blue-500"}),"AIからの提案"]}),y.jsx("div",{className:"space-y-3",children:t.suggestions.map((s,r)=>y.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-lg",children:y.jsx("p",{className:"text-blue-800",children:s})},r))})]})]}),y.jsx("footer",{className:"p-4 bg-slate-50 border-t flex justify-end",children:y.jsx("button",{onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-slate-600 rounded-md hover:bg-slate-700",children:"閉じる"})})]})})};class Yi{static async getProjectMembers(e){const{data:n,error:s}=await ut.from("project_members").select(`
        *,
        users:user_id (email)
      `).eq("project_id",e).order("created_at",{ascending:!0});if(s)throw new Error(`メンバー一覧の取得に失敗しました: ${s.message}`);return n.map(r=>{var l;return{id:r.id,projectId:r.project_id,userId:r.user_id,role:r.role,invitedBy:r.invited_by,joinedAt:r.joined_at,userEmail:(l=r.users)==null?void 0:l.email}})}static async inviteToProject(e,n,s){const{data:{user:r}}=await ut.auth.getUser();if(!r)throw new Error("ログインが必要です");const{data:l,error:f}=await ut.from("project_invitations").insert({project_id:e,email:n,role:s,invited_by:r.id}).select().single();if(f)throw f.code==="23505"?new Error("このメールアドレスは既に招待されています"):new Error(`招待の送信に失敗しました: ${f.message}`);return{id:l.id,projectId:l.project_id,email:l.email,role:l.role,invitedBy:l.invited_by,token:l.token,expiresAt:l.expires_at,acceptedAt:l.accepted_at,createdAt:l.created_at}}static async getProjectInvitations(e){const{data:n,error:s}=await ut.from("project_invitations").select("*").eq("project_id",e).order("created_at",{ascending:!1});if(s)throw new Error(`招待一覧の取得に失敗しました: ${s.message}`);return n.map(r=>({id:r.id,projectId:r.project_id,email:r.email,role:r.role,invitedBy:r.invited_by,token:r.token,expiresAt:r.expires_at,acceptedAt:r.accepted_at,createdAt:r.created_at}))}static async acceptInvitation(e){const{data:n,error:s}=await ut.rpc("accept_project_invitation",{invitation_token:e});if(s)throw new Error(`招待の受諾に失敗しました: ${s.message}`);return n}static async updateMemberRole(e,n,s){const{error:r}=await ut.from("project_members").update({role:s}).eq("project_id",e).eq("user_id",n);if(r)throw new Error(`メンバーの役割変更に失敗しました: ${r.message}`)}static async removeMember(e,n){const{error:s}=await ut.from("project_members").delete().eq("project_id",e).eq("user_id",n);if(s)throw new Error(`メンバーの削除に失敗しました: ${s.message}`)}static async cancelInvitation(e){const{error:n}=await ut.from("project_invitations").delete().eq("id",e);if(n)throw new Error(`招待の取り消しに失敗しました: ${n.message}`)}static async getActivityLog(e,n=50){const{data:s,error:r}=await ut.from("project_activity_log").select(`
        *,
        users:user_id (email)
      `).eq("project_id",e).order("created_at",{ascending:!1}).limit(n);if(r)throw new Error(`活動ログの取得に失敗しました: ${r.message}`);return s.map(l=>{var f;return{id:l.id,projectId:l.project_id,userId:l.user_id,action:l.action,details:l.details,createdAt:l.created_at,userEmail:(f=l.users)==null?void 0:f.email}})}static async getUserRole(e){const{data:{user:n}}=await ut.auth.getUser();if(!n)return null;const{data:s,error:r}=await ut.from("project_members").select("role").eq("project_id",e).eq("user_id",n.id).single();return r?null:s.role}static subscribeToProjectUpdates(e,n){return ut.channel(`project-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"projects",filter:`id=eq.${e}`},n).on("postgres_changes",{event:"*",schema:"public",table:"project_members",filter:`project_id=eq.${e}`},n).subscribe()}}const uu=({message:t})=>t?y.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md relative",role:"alert",children:[y.jsx("strong",{className:"font-bold",children:"Error: "}),y.jsx("span",{className:"block sm:inline",children:t})]}):null,Kk=({isOpen:t,onClose:e,projectId:n,userRole:s})=>{const[r,l]=G.useState([]),[f,h]=G.useState([]),[g,m]=G.useState(!1),[x,_]=G.useState(null),[b,C]=G.useState(!1),[E,N]=G.useState(""),[D,B]=G.useState("editor"),[z,U]=G.useState(!1),F=s==="owner"||s==="admin";G.useEffect(()=>{t&&V()},[t,n]);const V=async()=>{m(!0),_(null);try{const[Q,Se]=await Promise.all([Yi.getProjectMembers(n),F?Yi.getProjectInvitations(n):Promise.resolve([])]);l(Q),h(Se)}catch(Q){_(Q instanceof Error?Q.message:"データの読み込みに失敗しました")}finally{m(!1)}},W=async Q=>{if(Q.preventDefault(),!!E.trim()){U(!0);try{await Yi.inviteToProject(n,E,D),N(""),C(!1),await V()}catch(Se){_(Se instanceof Error?Se.message:"招待の送信に失敗しました")}finally{U(!1)}}},se=async(Q,Se)=>{try{await Yi.updateMemberRole(n,Q,Se),await V()}catch(Fe){_(Fe instanceof Error?Fe.message:"役割の変更に失敗しました")}},ye=async Q=>{if(confirm("このメンバーを削除しますか？"))try{await Yi.removeMember(n,Q),await V()}catch(Se){_(Se instanceof Error?Se.message:"メンバーの削除に失敗しました")}},ne=async Q=>{try{await Yi.cancelInvitation(Q),await V()}catch(Se){_(Se instanceof Error?Se.message:"招待の取り消しに失敗しました")}},oe=Q=>{switch(Q){case"owner":return"オーナー";case"admin":return"管理者";case"editor":return"編集者";case"viewer":return"閲覧者";default:return Q}},re=Q=>{switch(Q){case"owner":return"bg-purple-100 text-purple-800";case"admin":return"bg-red-100 text-red-800";case"editor":return"bg-blue-100 text-blue-800";case"viewer":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return t?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[y.jsxs("header",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[y.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"プロジェクトメンバー"}),y.jsxs("div",{className:"flex items-center gap-3",children:[F&&y.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[y.jsx(Rs,{className:"w-5 h-5"}),"メンバーを招待"]}),y.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 transition-colors p-1 rounded-full hover:bg-slate-100",children:y.jsx(Zn,{className:"w-6 h-6"})})]})]}),y.jsxs("div",{className:"flex-grow p-6 overflow-y-auto",children:[x&&y.jsx(uu,{message:x}),g?y.jsx("div",{className:"flex items-center justify-center py-12",children:y.jsx(Qt,{size:"lg",text:"読み込み中..."})}):y.jsxs("div",{className:"space-y-6",children:[b&&y.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[y.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"新しいメンバーを招待"}),y.jsxs("form",{onSubmit:W,className:"space-y-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"メールアドレス"}),y.jsx("input",{type:"email",value:E,onChange:Q=>N(Q.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",placeholder:"example@email.com",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"役割"}),y.jsxs("select",{value:D,onChange:Q=>B(Q.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[y.jsx("option",{value:"viewer",children:"閲覧者 - プロジェクトを閲覧のみ"}),y.jsx("option",{value:"editor",children:"編集者 - プロジェクトを編集可能"}),y.jsx("option",{value:"admin",children:"管理者 - メンバー管理も可能"})]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{type:"submit",disabled:z,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-slate-400",children:z?y.jsx(Qt,{size:"sm",color:"border-white"}):"招待を送信"}),y.jsx("button",{type:"button",onClick:()=>C(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-md hover:bg-slate-300",children:"キャンセル"})]})]})]}),y.jsxs("div",{children:[y.jsxs("h4",{className:"font-semibold text-slate-800 mb-3 flex items-center",children:[y.jsx(qk,{className:"w-5 h-5 mr-2"}),"現在のメンバー (",r.length,")"]}),y.jsx("div",{className:"space-y-2",children:r.map(Q=>{var Se;return y.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:y.jsx("span",{className:"text-white text-sm font-semibold",children:(Se=Q.userEmail)==null?void 0:Se.charAt(0).toUpperCase()})}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-slate-800",children:Q.userEmail}),y.jsxs("p",{className:"text-sm text-slate-500",children:["参加日: ",new Date(Q.joinedAt).toLocaleDateString("ja-JP")]})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[F&&Q.role!=="owner"?y.jsxs("select",{value:Q.role,onChange:Fe=>se(Q.userId,Fe.target.value),className:"px-2 py-1 text-sm border border-slate-300 rounded",children:[y.jsx("option",{value:"viewer",children:"閲覧者"}),y.jsx("option",{value:"editor",children:"編集者"}),y.jsx("option",{value:"admin",children:"管理者"})]}):y.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${re(Q.role)}`,children:oe(Q.role)}),F&&Q.role!=="owner"&&y.jsx("button",{onClick:()=>ye(Q.userId),className:"p-1 text-red-500 hover:text-red-700 rounded",title:"メンバーを削除",children:y.jsx(Ms,{className:"w-4 h-4"})})]})]},Q.id)})})]}),F&&f.length>0&&y.jsxs("div",{children:[y.jsxs("h4",{className:"font-semibold text-slate-800 mb-3 flex items-center",children:[y.jsx(Bk,{className:"w-5 h-5 mr-2"}),"保留中の招待 (",f.filter(Q=>!Q.acceptedAt).length,")"]}),y.jsx("div",{className:"space-y-2",children:f.filter(Q=>!Q.acceptedAt).map(Q=>y.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-slate-800",children:Q.email}),y.jsxs("p",{className:"text-sm text-slate-500",children:["役割: ",oe(Q.role)," | 期限: ",new Date(Q.expiresAt).toLocaleDateString("ja-JP")]})]}),y.jsx("button",{onClick:()=>ne(Q.id),className:"p-1 text-red-500 hover:text-red-700 rounded",title:"招待を取り消し",children:y.jsx(Ms,{className:"w-4 h-4"})})]},Q.id))})]})]})]})]})}):null},My=t=>{const e=Math.cos(2*Math.PI*t),n=Math.sin(2*Math.PI*t);return[e,n]},Xk=({data:t,title:e})=>{const n=t.reduce((f,h)=>f+h.value,0);if(n===0)return y.jsx("div",{className:"flex items-center justify-center h-full text-xs text-slate-500",children:"No data to display"});let s=0;const r=["#4a90e2","#50e3c2","#f5a623","#f8e71c","#7ed321","#9013fe"],l=t.map((f,h)=>{const g=f.value/n,[m,x]=My(s);s+=g;const[_,b]=My(s),C=g>.5?1:0;return{path:[`M ${m} ${x}`,`A 1 1 0 ${C} 1 ${_} ${b}`,"L 0 0"].join(" "),color:r[h%r.length],label:f.label}});return y.jsxs("div",{className:"w-full h-full flex flex-col bg-white p-2",children:[y.jsx("text",{x:"50%",y:"10",textAnchor:"middle",fontSize:"10",fontWeight:"bold",fill:"#333",className:"block text-center",children:e}),y.jsxs("div",{className:"flex-grow flex items-center",children:[y.jsx("svg",{viewBox:"-1 -1 2 2",className:"w-2/3 h-full",children:l.map((f,h)=>y.jsx("path",{d:f.path,fill:f.color},h))}),y.jsx("div",{className:"w-1/3 text-[8px] space-y-1",children:l.map((f,h)=>y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"w-2 h-2 rounded-full mr-1",style:{backgroundColor:f.color}}),y.jsx("span",{className:"truncate",children:f.label})]},h))})]})]})},Wk=({data:t,title:e})=>{const n=Math.max(...t.map(m=>m.value),0),s=300,r=150,l={top:20,right:10,bottom:30,left:30},f=s-l.left-l.right,h=r-l.top-l.bottom,g=t.map((m,x)=>{const _=x/(t.length-1)*f,b=h-m.value/n*h;return`${_},${b}`}).join(" ");return y.jsxs("svg",{viewBox:`0 0 ${s} ${r}`,className:"w-full h-full bg-white",children:[y.jsx("text",{x:s/2,y:l.top/2+5,textAnchor:"middle",fontSize:"10",fontWeight:"bold",fill:"#333",children:e}),y.jsxs("g",{transform:`translate(${l.left}, ${l.top})`,children:[y.jsx("line",{x1:"0",y1:"0",x2:"0",y2:h,stroke:"#ddd",strokeWidth:"0.5"}),y.jsx("line",{x1:"0",y1:h,x2:f,y2:h,stroke:"#ddd",strokeWidth:"0.5"}),y.jsx("polyline",{fill:"none",stroke:"#4a90e2",strokeWidth:"1.5",points:g}),t.map((m,x)=>{const _=x/(t.length-1)*f,b=h-m.value/n*h;return y.jsx("circle",{cx:_,cy:b,r:"2",fill:"#4a90e2"},x)})]})]})},Qk=({data:t,title:e})=>{const n=Math.max(...t.map(m=>m.value),0),s=300,r=150,l={top:20,right:10,bottom:30,left:30},f=s-l.left-l.right,h=r-l.top-l.bottom,g=t.length>0?f/t.length*.8:0;return y.jsxs("svg",{viewBox:`0 0 ${s} ${r}`,className:"w-full h-full bg-white",children:[y.jsx("text",{x:s/2,y:l.top/2+5,textAnchor:"middle",fontSize:"10",fontWeight:"bold",fill:"#333",children:e}),y.jsxs("g",{transform:`translate(${l.left}, ${l.top})`,children:[y.jsx("line",{x1:"0",y1:"0",x2:"0",y2:h,stroke:"#999",strokeWidth:"0.5"}),[0,n/2,n].map(m=>y.jsxs("g",{transform:`translate(0, ${h-m/n*h})`,children:[y.jsx("line",{x1:"-3",y1:"0",x2:"0",y2:"0",stroke:"#999",strokeWidth:"0.5"}),y.jsx("text",{x:"-5",y:"3",textAnchor:"end",fontSize:"6",fill:"#666",children:m.toFixed(0)})]},m)),t.map((m,x)=>y.jsxs("g",{transform:`translate(${x*f/t.length+f/t.length*.1}, 0)`,children:[y.jsx("rect",{x:"0",y:h-m.value/n*h,width:g,height:m.value/n*h,fill:"#4a90e2"}),y.jsx("text",{x:g/2,y:h+8,textAnchor:"middle",fontSize:"6",fill:"#666",transform:`rotate(-45, ${g/2}, ${h+8})`,children:m.label})]},m.label))]})]})},eD=({subStep:t,statusColor:e})=>{var n,s;return y.jsx("div",{style:{position:"absolute",left:((n=t.position)==null?void 0:n.x)||0,top:((s=t.position)==null?void 0:s.y)||0,width:192,minHeight:76,padding:"8px",borderRadius:"8px",backgroundColor:"white",borderLeft:`4px solid ${e}`,boxShadow:"0 2px 4px rgba(0,0,0,0.1)",fontSize:"12px",fontFamily:"sans-serif",color:"#333",display:"flex",flexDirection:"column",justifyContent:"center"},children:y.jsx("p",{className:`font-bold break-words ${t.status===Gl.COMPLETED?"line-through text-slate-500":""}`,children:t.text})})},tD=({subSteps:t})=>{if(!t||t.length===0)return y.jsx("div",{className:"w-full h-full flex items-center justify-center bg-slate-100 text-slate-500 text-sm",children:"No sub-steps to display."});const e=f=>{switch(f){case Gl.COMPLETED:return"#22c55e";case Gl.IN_PROGRESS:return"#3b82f6";default:return"#94a3b8"}},n=192,s=76,r=G.useMemo(()=>{const f=[];return(t||[]).forEach(h=>{var g;if((g=h==null?void 0:h.nextSubStepIds)!=null&&g.length&&h.position){const m={x:h.position.x+n,y:h.position.y+s/2};h.nextSubStepIds.forEach(x=>{const _=t.find(b=>b.id===x);if(_&&_.position){const b={x:_.position.x,y:_.position.y+s/2};f.push({id:`fc-render-${h.id}-${x}`,from:m,to:b,sourceId:h.id,targetId:x})}})}}),f},[t,n,s]),l=G.useMemo(()=>{if(!t||t.length===0)return{minX:0,minY:0,width:400,height:300};let f=0,h=0;return t.forEach(g=>{g.position&&(f=Math.max(f,g.position.x+n),h=Math.max(h,g.position.y+s))}),{minX:0,minY:0,width:f+20,height:h+20}},[t,n,s]);return y.jsx("div",{className:"w-full h-full bg-slate-50 overflow-hidden",style:{fontFamily:"Inter, sans-serif"},children:y.jsxs("svg",{width:"100%",height:"100%",viewBox:`${l.minX} ${l.minY} ${l.width} ${l.height}`,children:[y.jsx("style",{children:`
                    .flowchart-card-container {
                        position: relative;
                        width: 100%;
                        height: 100%;
                        font-family: Inter, sans-serif;
                    }
                    `}),y.jsx("foreignObject",{x:"0",y:"0",width:l.width,height:l.height,children:y.jsx("div",{className:"flowchart-card-container",children:(t||[]).map(f=>y.jsx(eD,{subStep:f,statusColor:e(f.status)},f.id))})}),r.map(f=>y.jsx(df,{from:f.from,to:f.to,id:f.id},f.id))]})})},nD=({el:t,onUpdate:e,children:n,isSelected:s,onClick:r})=>y.jsx("div",{onClick:l=>{l.stopPropagation(),r()},style:{position:"absolute",left:`${t.position.x}%`,top:`${t.position.y}%`,width:`${t.position.width}%`,height:`${t.position.height}%`,outline:s?"2px solid #3b82f6":"1px dashed transparent",cursor:"move"},className:"transition-all duration-150 hover:outline-dashed hover:outline-slate-400",children:n}),Fv=({tasks:t,initialDeck:e,onSave:n,onClose:s,generateUniqueId:r,projectGoal:l,targetDate:f,reportScope:h})=>{const[g,m]=G.useState(e),[x,_]=G.useState(0),[b,C]=G.useState(null),[E,N]=G.useState(!1),[D,B]=G.useState(null),[z,U]=G.useState(!1),F=G.useRef(null),V=(R,Y)=>{m(S=>({...S,slides:S.slides.map(M=>M.id===R?{...M,...typeof Y=="function"?Y(M):M}:M)}))},W=R=>{const Y=g.slides[R];V(Y.id,{isLocked:!Y.isLocked})},se=(R,Y,S)=>{V(R,M=>({elements:M.elements.map(H=>H.id===Y?{...H,...S}:H)}))},ye=async()=>{N(!0),B(null);try{const R={...g,slides:g.slides.map(M=>M.isLocked?M:{...M,isLocked:void 0})},Y=await fM(R),S={...Y,slides:Y.slides.map((M,H)=>({...M,isLocked:g.slides[H].isLocked}))};m(S)}catch(R){B(R instanceof Error?R.message:"最適化に失敗しました。")}finally{N(!1)}},ne=async()=>{N(!0),B(null);try{let R;h==="project"?R=await pM(g,t,l,f):R=await dM(g,t[0],l),m(R)}catch(R){B(R instanceof Error?R.message:"レポートの再生成に失敗しました。")}finally{N(!1)}},oe=(R,Y)=>{var S,M,H;for(const K of t){const le=(M=(S=K.extendedDetails)==null?void 0:S.subSteps)==null?void 0:M.find(ae=>ae.id===R);if(le){const ae=(H=le==null?void 0:le.actionItems)==null?void 0:H.find(de=>de.id===Y);if(ae)return ae}}},re=R=>{var Y,S,M,H,K;switch(R.type){case"textbox":const le=R;return y.jsx("textarea",{value:le.content,onChange:ae=>se(g.slides[x].id,R.id,{content:ae.target.value}),className:"w-full h-full bg-transparent resize-none border-none outline-none p-2",style:{fontSize:le.fontSize,fontWeight:le.fontWeight,textAlign:le.textAlign,color:"#333"}});case"image":{const ae=R,de=oe(ae.subStepId,ae.actionItemId),_e=(S=(Y=de==null?void 0:de.report)==null?void 0:Y.attachments)==null?void 0:S.find(Me=>Me.id===ae.attachmentId);return _e?y.jsx("img",{src:_e.dataUrl,className:"w-full h-full object-contain",alt:_e.name}):y.jsx("div",{className:"bg-slate-200 flex items-center justify-center text-xs text-slate-500",children:"画像が見つかりません"})}case"table":{const ae=R,de=oe(ae.subStepId,ae.actionItemId),_e=(M=de==null?void 0:de.report)==null?void 0:M.matrixData;return _e?y.jsx("div",{className:"p-2 overflow-auto h-full",children:y.jsxs("table",{className:"w-full text-[8px] border-collapse bg-white",children:[y.jsx("thead",{children:y.jsx("tr",{className:"bg-slate-200",children:_e.headers.map((Me,rt)=>y.jsx("th",{className:"border border-slate-300 p-1 font-semibold",children:Me},rt))})}),y.jsx("tbody",{children:_e.rows.map((Me,rt)=>y.jsx("tr",{children:Me.map((Je,Ht)=>y.jsx("td",{className:"border border-slate-300 p-1",children:Je},`${rt}-${Ht}`))},rt))})]})}):y.jsx("div",{className:"bg-slate-200 flex items-center justify-center text-xs text-slate-500",children:"データなし"})}case"chart":{const ae=R,de=oe(ae.subStepId,ae.actionItemId),_e=(((K=(H=de==null?void 0:de.report)==null?void 0:H.matrixData)==null?void 0:K.rows)||[]).map(Me=>({label:Me[0],value:parseFloat(Me[1])||0})).filter(Me=>Me.label&&!isNaN(Me.value));if(_e.length===0)return y.jsx("div",{className:"bg-slate-200 flex items-center justify-center text-xs text-slate-500",children:"チャートデータなし"});switch(ae.chartType){case"line":return y.jsx(Wk,{data:_e,title:ae.title});case"pie":return y.jsx(Xk,{data:_e,title:ae.title});case"bar":default:return y.jsx(Qk,{data:_e,title:ae.title})}}case"flowchart":{const ae=R;return ae.data&&ae.data.subSteps?y.jsx(tD,{subSteps:ae.data.subSteps}):y.jsx("div",{className:"bg-slate-200 flex items-center justify-center text-xs text-slate-500",children:"フローチャートのデータが見つかりません。"})}default:return null}},Q=()=>window.print(),Se=(R,Y)=>{const S=JSON.stringify(R,null,2),M=new Blob([S],{type:"application/json"}),H=URL.createObjectURL(M),K=document.createElement("a");K.href=H,K.download=Y,document.body.appendChild(K),K.click(),document.body.removeChild(K),URL.revokeObjectURL(H)},Fe=R=>{R==="pdf"?Q():Se(g,"report-deck.json"),U(!1)},Ce=()=>{n(g),s()},q=g.slides[x],$=h==="project"?`プロジェクト全体レポート: ${l}`:`タスクレポート: ${t[0].title}`;return y.jsxs(y.Fragment,{children:[y.jsx("style",{children:"@media print { body { -webkit-print-color-adjust: exact; print-color-adjust: exact; } .no-print { display: none !important; } .slide-print-page { page-break-after: always; width: 100vw; height: 56.25vw; /* 16:9 aspect ratio */ box-shadow: none !important; border: none; } }"}),y.jsxs("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-80 z-[100] flex flex-col p-4 no-print",onClick:()=>C(null),children:[y.jsxs("header",{className:"flex items-center justify-between pb-4 flex-shrink-0",children:[y.jsx("h2",{className:"text-xl font-bold text-white truncate pr-4",children:$}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsxs("button",{onClick:ne,disabled:E,className:"flex items-center gap-2 px-3 py-1.5 text-xs font-semibold text-white bg-green-600 rounded-md hover:bg-green-700 disabled:bg-slate-400",children:[y.jsx(Mf,{className:"w-4 h-4"})," ",E?"処理中...":"レポート再生成"]}),y.jsxs("button",{onClick:ye,disabled:E,className:"flex items-center gap-2 px-3 py-1.5 text-xs font-semibold text-white bg-purple-600 rounded-md hover:bg-purple-700 disabled:bg-slate-400",children:[y.jsx(qv,{className:"w-4 h-4"})," ",E?"処理中...":"AIでレイアウト最適化"]}),y.jsxs("div",{className:"relative",ref:F,children:[y.jsx("button",{onClick:()=>U(R=>!R),className:"p-2 bg-slate-600 text-white rounded-md hover:bg-slate-500",title:"ダウンロード",children:y.jsx(Jo,{className:"w-5 h-5"})}),z&&y.jsxs("div",{className:"absolute right-0 mt-2 w-32 bg-white rounded-md shadow-lg z-10",children:[y.jsx("button",{onClick:()=>Fe("pdf"),className:"block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:"PDFとして保存"}),y.jsx("button",{onClick:()=>Fe("json"),className:"block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:"JSONとして保存"})]})]}),y.jsxs("button",{onClick:s,className:"p-2 bg-slate-600 text-white rounded-md hover:bg-slate-500",title:"閉じる",children:[" ",y.jsx(Zn,{className:"w-5 h-5"})]}),y.jsx("button",{onClick:Ce,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-semibold text-sm",children:"保存して閉じる"})]})]}),D&&y.jsx("div",{className:"text-red-400 text-sm mb-2 bg-red-100 border border-red-400 p-2 rounded-md",children:D}),y.jsxs("div",{className:"flex-grow flex gap-4 min-h-0",children:[y.jsx("aside",{className:"w-40 bg-slate-800 rounded-lg p-2 flex flex-col gap-2 overflow-y-auto",children:g.slides.map((R,Y)=>y.jsxs("div",{onClick:()=>_(Y),className:`relative group aspect-video bg-white rounded cursor-pointer transition-all p-1 ${x===Y?"ring-4 ring-blue-500":"hover:ring-2 ring-blue-400"}`,children:[y.jsx("div",{className:"absolute top-1 right-1 z-10 opacity-50 group-hover:opacity-100 transition-opacity",children:y.jsx("button",{onClick:S=>{S.stopPropagation(),W(Y)},title:R.isLocked?"スライドのロック解除":"スライドをロック",className:`p-1 rounded-full ${R.isLocked?"bg-blue-600 text-white":"bg-slate-500 text-white"}`,children:R.isLocked?y.jsx(Pk,{className:"w-3 h-3"}):y.jsx(Ok,{className:"w-3 h-3"})})}),y.jsx("div",{className:"w-full h-full transform scale-[0.1] origin-top-left overflow-hidden relative",children:R.elements.map(S=>y.jsx("div",{style:{position:"absolute",left:`${S.position.x}%`,top:`${S.position.y}%`,width:`${S.position.width}%`,height:`${S.position.height}%`,backgroundColor:"#ccc"}},S.id))}),y.jsx("span",{className:"text-white text-xs block text-center -mt-2",children:Y+1})]},R.id))}),y.jsx("main",{className:"flex-grow flex items-center justify-center",children:q&&y.jsx("div",{className:"aspect-video w-full max-w-[100vh] bg-white shadow-2xl rounded-lg relative overflow-hidden",children:q.elements.map(R=>y.jsx(nD,{el:R,onUpdate:()=>{},isSelected:b===R.id,onClick:()=>C(R.id),children:re(R)},R.id))})}),y.jsxs("aside",{className:"w-64 bg-slate-800 rounded-lg p-3 text-white overflow-y-auto",children:[y.jsx("h3",{className:"font-bold border-b border-slate-600 pb-2 mb-3",children:"プロパティ"}),y.jsx("p",{className:"text-xs text-slate-400",children:"要素を選択してプロパティを編集します。"})]})]})]}),y.jsx("div",{className:"hidden print:block",children:g.slides.map((R,Y)=>y.jsx("div",{className:"slide-print-page bg-white relative",children:y.jsx("div",{className:"w-full h-full relative",children:R.elements.map(S=>y.jsx("div",{style:{position:"absolute",left:`${S.position.x}%`,top:`${S.position.y}%`,width:`${S.position.width}%`,height:`${S.position.height}%`},children:re(S)},S.id))})},R.id))})]})},iD=({onClose:t,onDownloadAndStartNew:e,onStartNewWithoutSaving:n})=>y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-4 z-[60]",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[y.jsxs("header",{className:"flex items-center justify-between p-5 border-b border-slate-200",children:[y.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center",children:[y.jsx(ha,{className:"w-6 h-6 mr-2 text-yellow-500"}),"確認"]}),y.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-700 transition-colors p-1 rounded-full hover:bg-slate-100",title:"閉じる","aria-label":"確認モーダルを閉じる",children:y.jsx(Zn,{className:"w-5 h-5"})})]}),y.jsxs("div",{className:"p-6",children:[y.jsx("p",{className:"text-slate-700",children:"新しいプロジェクトを開始します。現在の作業内容は保存されませんが、よろしいですか？"}),y.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"現在のプロジェクトを保存したい場合は、JSON形式でダウンロードできます。"})]}),y.jsxs("footer",{className:"p-4 bg-slate-50 border-t border-slate-200 flex flex-col sm:flex-row justify-end gap-3 rounded-b-xl",children:[y.jsx("button",{type:"button",onClick:t,className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-md shadow-sm hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"キャンセル"}),y.jsx("button",{type:"button",onClick:n,className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-red-700 bg-red-100 border border-transparent rounded-md shadow-sm hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"保存せずに新規作成"}),y.jsxs("button",{type:"submit",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center justify-center gap-2",children:[y.jsx(Jo,{className:"w-4 h-4"}),"ダウンロードして新規作成"]})]})]})});function sD(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),s=n.createElement("base"),r=n.createElement("a");return n.head.appendChild(s),n.body.appendChild(r),e&&(s.href=e),r.href=t,r.href}const oD=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function Xi(t){const e=[];for(let n=0,s=t.length;n<s;n++)e.push(t[n]);return e}let Io=null;function Hv(t={}){return Io||(t.includeStyleProperties?(Io=t.includeStyleProperties,Io):(Io=Xi(window.getComputedStyle(document.documentElement)),Io))}function tu(t,e){const s=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return s?parseFloat(s.replace("px","")):0}function rD(t){const e=tu(t,"border-left-width"),n=tu(t,"border-right-width");return t.clientWidth+e+n}function aD(t){const e=tu(t,"border-top-width"),n=tu(t,"border-bottom-width");return t.clientHeight+e+n}function Jv(t,e={}){const n=e.width||rD(t),s=e.height||aD(t);return{width:n,height:s}}function lD(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const dn=16384;function uD(t){(t.width>dn||t.height>dn)&&(t.width>dn&&t.height>dn?t.width>t.height?(t.height*=dn/t.width,t.width=dn):(t.width*=dn/t.height,t.height=dn):t.width>dn?(t.height*=dn/t.width,t.width=dn):(t.width*=dn/t.height,t.height=dn))}function nu(t){return new Promise((e,n)=>{const s=new Image;s.onload=()=>{s.decode().then(()=>{requestAnimationFrame(()=>e(s))})},s.onerror=n,s.crossOrigin="anonymous",s.decoding="async",s.src=t})}async function cD(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function dD(t,e,n){const s="http://www.w3.org/2000/svg",r=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return r.setAttribute("width",`${e}`),r.setAttribute("height",`${n}`),r.setAttribute("viewBox",`0 0 ${e} ${n}`),l.setAttribute("width","100%"),l.setAttribute("height","100%"),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("externalResourcesRequired","true"),r.appendChild(l),l.appendChild(t),cD(r)}const en=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||en(n,e)};function fD(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function hD(t,e){return Hv(e).map(n=>{const s=t.getPropertyValue(n),r=t.getPropertyPriority(n);return`${n}: ${s}${r?" !important":""};`}).join(" ")}function mD(t,e,n,s){const r=`.${t}:${e}`,l=n.cssText?fD(n):hD(n,s);return document.createTextNode(`${r}{${l}}`)}function Ry(t,e,n,s){const r=window.getComputedStyle(t,n),l=r.getPropertyValue("content");if(l===""||l==="none")return;const f=oD();try{e.className=`${e.className} ${f}`}catch{return}const h=document.createElement("style");h.appendChild(mD(f,n,r,s)),e.appendChild(h)}function pD(t,e,n){Ry(t,e,":before",n),Ry(t,e,":after",n)}const ky="application/font-woff",Dy="image/jpeg",gD={woff:ky,woff2:ky,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Dy,jpeg:Dy,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function yD(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function kf(t){const e=yD(t).toLowerCase();return gD[e]||""}function vD(t){return t.split(/,/)[1]}function ff(t){return t.search(/^(data:)/)!==-1}function xD(t,e){return`data:${e};base64,${t}`}async function Yv(t,e,n){const s=await fetch(t,e);if(s.status===404)throw new Error(`Resource "${s.url}" not found`);const r=await s.blob();return new Promise((l,f)=>{const h=new FileReader;h.onerror=f,h.onloadend=()=>{try{l(n({res:s,result:h.result}))}catch(g){f(g)}},h.readAsDataURL(r)})}const Ud={};function _D(t,e,n){let s=t.replace(/\?.*/,"");return n&&(s=t),/ttf|otf|eot|woff2?/i.test(s)&&(s=s.replace(/.*\//,"")),e?`[${e}]${s}`:s}async function Df(t,e,n){const s=_D(t,e,n.includeQueryParams);if(Ud[s]!=null)return Ud[s];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let r;try{const l=await Yv(t,n.fetchRequestInit,({res:f,result:h})=>(e||(e=f.headers.get("Content-Type")||""),vD(h)));r=xD(l,e)}catch(l){r=n.imagePlaceholder||"";let f=`Failed to fetch resource: ${t}`;l&&(f=typeof l=="string"?l:l.message),f&&console.warn(f)}return Ud[s]=r,r}async function TD(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):nu(e)}async function bD(t,e){if(t.currentSrc){const l=document.createElement("canvas"),f=l.getContext("2d");l.width=t.clientWidth,l.height=t.clientHeight,f==null||f.drawImage(t,0,0,l.width,l.height);const h=l.toDataURL();return nu(h)}const n=t.poster,s=kf(n),r=await Df(n,s,e);return nu(r)}async function wD(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await cu(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function SD(t,e){return en(t,HTMLCanvasElement)?TD(t):en(t,HTMLVideoElement)?bD(t,e):en(t,HTMLIFrameElement)?wD(t,e):t.cloneNode(Zv(t))}const CD=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",Zv=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function ED(t,e,n){var s,r;if(Zv(e))return e;let l=[];return CD(t)&&t.assignedNodes?l=Xi(t.assignedNodes()):en(t,HTMLIFrameElement)&&(!((s=t.contentDocument)===null||s===void 0)&&s.body)?l=Xi(t.contentDocument.body.childNodes):l=Xi(((r=t.shadowRoot)!==null&&r!==void 0?r:t).childNodes),l.length===0||en(t,HTMLVideoElement)||await l.reduce((f,h)=>f.then(()=>cu(h,n)).then(g=>{g&&e.appendChild(g)}),Promise.resolve()),e}function AD(t,e,n){const s=e.style;if(!s)return;const r=window.getComputedStyle(t);r.cssText?(s.cssText=r.cssText,s.transformOrigin=r.transformOrigin):Hv(n).forEach(l=>{let f=r.getPropertyValue(l);l==="font-size"&&f.endsWith("px")&&(f=`${Math.floor(parseFloat(f.substring(0,f.length-2)))-.1}px`),en(t,HTMLIFrameElement)&&l==="display"&&f==="inline"&&(f="block"),l==="d"&&e.getAttribute("d")&&(f=`path(${e.getAttribute("d")})`),s.setProperty(l,f,r.getPropertyPriority(l))})}function ND(t,e){en(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),en(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function MD(t,e){if(en(t,HTMLSelectElement)){const n=e,s=Array.from(n.children).find(r=>t.value===r.getAttribute("value"));s&&s.setAttribute("selected","")}}function RD(t,e,n){return en(e,Element)&&(AD(t,e,n),pD(t,e,n),ND(t,e),MD(t,e)),e}async function kD(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const s={};for(let l=0;l<n.length;l++){const h=n[l].getAttribute("xlink:href");if(h){const g=t.querySelector(h),m=document.querySelector(h);!g&&m&&!s[h]&&(s[h]=await cu(m,e,!0))}}const r=Object.values(s);if(r.length){const l="http://www.w3.org/1999/xhtml",f=document.createElementNS(l,"svg");f.setAttribute("xmlns",l),f.style.position="absolute",f.style.width="0",f.style.height="0",f.style.overflow="hidden",f.style.display="none";const h=document.createElementNS(l,"defs");f.appendChild(h);for(let g=0;g<r.length;g++)h.appendChild(r[g]);t.appendChild(f)}return t}async function cu(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(s=>SD(s,e)).then(s=>ED(t,s,e)).then(s=>RD(t,s,e)).then(s=>kD(s,e))}const Kv=/url\((['"]?)([^'"]+?)\1\)/g,DD=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ID=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function UD(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function LD(t){const e=[];return t.replace(Kv,(n,s,r)=>(e.push(r),n)),e.filter(n=>!ff(n))}async function PD(t,e,n,s,r){try{const l=n?sD(e,n):e,f=kf(e);let h;return r||(h=await Df(l,f,s)),t.replace(UD(e),`$1${h}$3`)}catch{}return t}function OD(t,{preferredFontFormat:e}){return e?t.replace(ID,n=>{for(;;){const[s,,r]=DD.exec(n)||[];if(!r)return"";if(r===e)return`src: ${s};`}}):t}function Xv(t){return t.search(Kv)!==-1}async function Wv(t,e,n){if(!Xv(t))return t;const s=OD(t,n);return LD(s).reduce((l,f)=>l.then(h=>PD(h,f,e,n)),Promise.resolve(s))}async function Uo(t,e,n){var s;const r=(s=e.style)===null||s===void 0?void 0:s.getPropertyValue(t);if(r){const l=await Wv(r,null,n);return e.style.setProperty(t,l,e.style.getPropertyPriority(t)),!0}return!1}async function jD(t,e){await Uo("background",t,e)||await Uo("background-image",t,e),await Uo("mask",t,e)||await Uo("-webkit-mask",t,e)||await Uo("mask-image",t,e)||await Uo("-webkit-mask-image",t,e)}async function VD(t,e){const n=en(t,HTMLImageElement);if(!(n&&!ff(t.src))&&!(en(t,SVGImageElement)&&!ff(t.href.baseVal)))return;const s=n?t.src:t.href.baseVal,r=await Df(s,kf(s),e);await new Promise((l,f)=>{t.onload=l,t.onerror=e.onImageErrorHandler?(...g)=>{try{l(e.onImageErrorHandler(...g))}catch(m){f(m)}}:f;const h=t;h.decode&&(h.decode=l),h.loading==="lazy"&&(h.loading="eager"),n?(t.srcset="",t.src=r):t.href.baseVal=r})}async function qD(t,e){const s=Xi(t.childNodes).map(r=>Qv(r,e));await Promise.all(s).then(()=>t)}async function Qv(t,e){en(t,Element)&&(await jD(t,e),await VD(t,e),await qD(t,e))}function BD(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const s=e.style;return s!=null&&Object.keys(s).forEach(r=>{n[r]=s[r]}),t}const Iy={};async function Uy(t){let e=Iy[t];if(e!=null)return e;const s=await(await fetch(t)).text();return e={url:t,cssText:s},Iy[t]=e,e}async function Ly(t,e){let n=t.cssText;const s=/url\(["']?([^"')]+)["']?\)/g,l=(n.match(/url\([^)]+\)/g)||[]).map(async f=>{let h=f.replace(s,"$1");return h.startsWith("https://")||(h=new URL(h,t.url).href),Yv(h,e.fetchRequestInit,({result:g})=>(n=n.replace(f,`url(${g})`),[f,g]))});return Promise.all(l).then(()=>n)}function Py(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let s=t.replace(n,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const g=r.exec(s);if(g===null)break;e.push(g[0])}s=s.replace(r,"");const l=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,f="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",h=new RegExp(f,"gi");for(;;){let g=l.exec(s);if(g===null){if(g=h.exec(s),g===null)break;l.lastIndex=h.lastIndex}else h.lastIndex=l.lastIndex;e.push(g[0])}return e}async function $D(t,e){const n=[],s=[];return t.forEach(r=>{if("cssRules"in r)try{Xi(r.cssRules||[]).forEach((l,f)=>{if(l.type===CSSRule.IMPORT_RULE){let h=f+1;const g=l.href,m=Uy(g).then(x=>Ly(x,e)).then(x=>Py(x).forEach(_=>{try{r.insertRule(_,_.startsWith("@import")?h+=1:r.cssRules.length)}catch(b){console.error("Error inserting rule from remote css",{rule:_,error:b})}})).catch(x=>{console.error("Error loading remote css",x.toString())});s.push(m)}})}catch(l){const f=t.find(h=>h.href==null)||document.styleSheets[0];r.href!=null&&s.push(Uy(r.href).then(h=>Ly(h,e)).then(h=>Py(h).forEach(g=>{f.insertRule(g,f.cssRules.length)})).catch(h=>{console.error("Error loading remote stylesheet",h)})),console.error("Error inlining remote css file",l)}}),Promise.all(s).then(()=>(t.forEach(r=>{if("cssRules"in r)try{Xi(r.cssRules||[]).forEach(l=>{n.push(l)})}catch(l){console.error(`Error while reading CSS rules from ${r.href}`,l)}}),n))}function zD(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>Xv(e.style.getPropertyValue("src")))}async function GD(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Xi(t.ownerDocument.styleSheets),s=await $D(n,e);return zD(s)}function ex(t){return t.trim().replace(/["']/g,"")}function FD(t){const e=new Set;function n(s){(s.style.fontFamily||getComputedStyle(s).fontFamily).split(",").forEach(l=>{e.add(ex(l))}),Array.from(s.children).forEach(l=>{l instanceof HTMLElement&&n(l)})}return n(t),e}async function HD(t,e){const n=await GD(t,e),s=FD(t);return(await Promise.all(n.filter(l=>s.has(ex(l.style.fontFamily))).map(l=>{const f=l.parentStyleSheet?l.parentStyleSheet.href:null;return Wv(l.cssText,f,e)}))).join(`
`)}async function JD(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await HD(t,e);if(n){const s=document.createElement("style"),r=document.createTextNode(n);s.appendChild(r),t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s)}}async function YD(t,e={}){const{width:n,height:s}=Jv(t,e),r=await cu(t,e,!0);return await JD(r,e),await Qv(r,e),BD(r,e),await dD(r,n,s)}async function ZD(t,e={}){const{width:n,height:s}=Jv(t,e),r=await YD(t,e),l=await nu(r),f=document.createElement("canvas"),h=f.getContext("2d"),g=e.pixelRatio||lD(),m=e.canvasWidth||n,x=e.canvasHeight||s;return f.width=m*g,f.height=x*g,e.skipAutoScale||uD(f),f.style.width=`${m}`,f.style.height=`${x}`,e.backgroundColor&&(h.fillStyle=e.backgroundColor,h.fillRect(0,0,f.width,f.height)),h.drawImage(l,0,0,f.width,f.height),f}async function KD(t,e={}){return(await ZD(t,e)).toDataURL()}const aa=40,Oy=64,jy=320,Vy=["#3B82F6","#F59E0B","#10B981","#EF4444","#6B7280","#6366F1","#EC4899","#8B5CF6"],XD=({data:t,onClose:e,onItemClick:n,onRegenerate:s,isRegenerating:r})=>{const[l,f]=G.useState(!0),[h,g]=G.useState(new Set),[m,x]=G.useState("all"),_=G.useRef(null),[b,C]=G.useState(!1),[E,N]=G.useState("day"),[D,B]=G.useState({start:"",end:""}),U={day:40,week:15,month:5}[E],F=G.useMemo(()=>{const R=new Map;return t.filter(Y=>Y.type==="task").forEach((Y,S)=>{R.set(Y.id,Vy[S%Vy.length])}),R},[t]),V=G.useCallback((R,Y)=>{if(R.type==="task")return R.id;let S=R;for(;S.parentId;){const M=Y.get(S.parentId);if(!M)return null;if(M.type==="task")return M.id;S=M}return null},[]),W=G.useMemo(()=>new Map(t.map(R=>[R.id,R])),[t]),se=G.useCallback(R=>{const Y=V(R,W);return Y&&F.get(Y)||"#9CA3AF"},[W,F,V]);G.useEffect(()=>{const R=new Set(t.filter(Y=>Y.type==="task").map(Y=>Y.id));g(R)},[t]);const ye=R=>{g(Y=>{const S=new Set(Y);return S.has(R)?S.delete(R):S.add(R),S})},ne=G.useMemo(()=>{const R=[];return t.filter(S=>S.type==="task").forEach(S=>{R.push(S),h.has(S.id)&&t.filter(H=>H.type==="substep"&&H.parentId===S.id).forEach(H=>{if(R.push(H),h.has(H.id)){const K=t.filter(le=>{if(le.type!=="actionitem"||le.parentId!==H.id)return!1;if(m==="all")return!0;const ae=le.progress===100;return m==="completed"?ae:m==="pending"?!ae:!0});R.push(...K)}})}),R},[t,h,m]),{timelineStart:oe,totalDays:re}=G.useMemo(()=>{if(t.length===0)return{timelineStart:new Date,totalDays:30};const R=t.map(ae=>new Date(ae.start)).filter(ae=>!isNaN(ae.getTime())),Y=t.map(ae=>new Date(ae.end)).filter(ae=>!isNaN(ae.getTime()));let S,M;R.length===0||Y.length===0?(S=new Date,M=new Date,M.setMonth(M.getMonth()+1)):(S=new Date(Math.min(...R.map(ae=>ae.getTime()))),M=new Date(Math.max(...Y.map(ae=>ae.getTime()))));let H=D.start?new Date(D.start):S,K=D.end?new Date(D.end):M;isNaN(H.getTime())&&(H=S),isNaN(K.getTime())&&(K=M),K<H&&(K=H),H.setDate(H.getDate()-2),K.setDate(K.getDate()+5);const le=(K.getTime()-H.getTime())/(1e3*3600*24);return{timelineStart:H,totalDays:Math.ceil(le)}},[t,D]),Q=G.useMemo(()=>{const R=M=>{M=new Date(Date.UTC(M.getFullYear(),M.getMonth(),M.getDate())),M.setUTCDate(M.getUTCDate()+4-(M.getUTCDay()||7));const H=new Date(Date.UTC(M.getUTCFullYear(),0,1));return Math.ceil(((M.getTime()-H.getTime())/864e5+1)/7)},Y=[];let S=new Date(oe);if(E==="day")for(let M=0;M<re;M++)Y.push({secondaryLabel:S.toLocaleDateString("ja-JP",{weekday:"short"}),label:String(S.getDate()),width:U}),S.setDate(S.getDate()+1);else if(E==="week")for(let M=0;M<re;M++)(S.getDay()===1||Y.length===0)&&Y.push({label:`W${R(S)}`,secondaryLabel:S.toLocaleDateString("ja-JP",{month:"short"}),width:0}),Y[Y.length-1].width+=U,S.setDate(S.getDate()+1);else if(E==="month"){let M=-1;for(let H=0;H<re;H++){const K=S.getMonth();K!==M&&(M=K,Y.push({label:S.toLocaleDateString("ja-JP",{month:"long",year:"numeric"}),width:0})),Y[Y.length-1].width+=U,S.setDate(S.getDate()+1)}}return Y},[oe,re,E,U]),Se=R=>{const Y=new Date(R);return isNaN(Y.getTime())?-1:(Y.getTime()-oe.getTime())/(1e3*3600*24)},Fe=R=>{switch(R){case"substep":return"pl-5";case"actionitem":return"pl-9";default:return"pl-1"}},Ce=R=>t.some(Y=>Y.parentId===R),q=G.useCallback(()=>{if(_.current===null){alert("チャート要素が見つかりません。");return}C(!0),KD(_.current,{cacheBust:!0,backgroundColor:"#ffffff",width:_.current.scrollWidth,height:_.current.scrollHeight}).then(R=>{const Y=document.createElement("a");Y.download="gantt-chart.png",Y.href=R,Y.click()}).catch(R=>{console.error("ガントチャートのダウンロードに失敗しました。",R),alert("画像のダウンロードに失敗しました。コンソールログを確認してください。")}).finally(()=>{C(!1)})},[]),$=G.useMemo(()=>Q.reduce((R,Y)=>R+Y.width,0),[Q]);return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex flex-col p-4 z-[80]",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full h-full flex flex-col",children:[y.jsxs("header",{className:"flex-shrink-0 flex flex-wrap items-center justify-between p-4 border-b gap-4",children:[y.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"ガントチャート"}),y.jsxs("div",{className:"flex items-center flex-wrap gap-x-6 gap-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-sm font-medium text-slate-600",children:"表示単位:"}),y.jsx("div",{className:"flex items-center rounded-md bg-slate-100 p-1",children:["day","week","month"].map(R=>y.jsx("button",{onClick:()=>N(R),className:`px-3 py-1 text-xs capitalize rounded-md ${E===R?"bg-white shadow-sm font-semibold text-blue-600":""}`,children:R},R))})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-sm font-medium text-slate-600",children:"表示範囲:"}),y.jsx("input",{type:"date",value:D.start,onChange:R=>B(Y=>({...Y,start:R.target.value})),className:"p-1 border rounded-md text-sm"}),y.jsx("span",{children:"-"}),y.jsx("input",{type:"date",value:D.end,onChange:R=>B(Y=>({...Y,end:R.target.value})),className:"p-1 border rounded-md text-sm"}),y.jsx("button",{onClick:()=>B({start:"",end:""}),className:"text-xs px-2 py-1 bg-slate-200 rounded-md hover:bg-slate-300",children:"リセット"})]}),y.jsxs("button",{onClick:q,disabled:b,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm font-semibold text-white bg-green-600 rounded-md hover:bg-green-700 disabled:bg-slate-400",children:[b?y.jsx(Qt,{size:"sm",color:"border-white"}):y.jsx(Jo,{className:"w-4 h-4"}),"PNG"]}),y.jsxs("button",{onClick:e,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-semibold text-slate-700 bg-slate-100 rounded-md hover:bg-slate-200",children:[y.jsx(Zn,{className:"w-5 h-5"}),"閉じる"]})]})]}),y.jsxs("div",{className:"flex-shrink-0 p-4 border-b flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-slate-100 p-1",children:[y.jsx("button",{onClick:()=>x("all"),className:`px-3 py-1 text-xs rounded-full ${m==="all"?"bg-white shadow-sm":""}`,children:"すべて"}),y.jsx("button",{onClick:()=>x("pending"),className:`px-3 py-1 text-xs rounded-full ${m==="pending"?"bg-white shadow-sm":""}`,children:"未完了"}),y.jsx("button",{onClick:()=>x("completed"),className:`px-3 py-1 text-xs rounded-full ${m==="completed"?"bg-white shadow-sm":""}`,children:"完了"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("button",{onClick:s,disabled:r,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-slate-400",children:[r?y.jsx(Qt,{size:"sm",color:"border-white"}):y.jsx(Mf,{className:"w-4 h-4"}),"AIで再生成"]}),y.jsxs("label",{className:"flex items-center text-sm text-slate-600 cursor-pointer",children:[y.jsx("input",{type:"checkbox",checked:l,onChange:()=>f(R=>!R),className:"w-4 h-4 mr-2 accent-blue-600"}),"依存関係"]})]})]}),y.jsx("div",{className:"flex-grow overflow-auto relative",children:y.jsxs("div",{ref:_,className:"grid",style:{gridTemplateColumns:`${jy}px 1fr`,width:`${jy+$}px`},children:[y.jsx("div",{className:"sticky top-0 left-0 z-30 flex items-center p-2 font-semibold text-sm border-b border-r bg-slate-100 text-slate-800",style:{gridColumn:1,gridRow:1,height:Oy},children:"タスク / サブステップ"}),y.jsx("div",{className:"sticky top-0 z-20 border-b bg-slate-50",style:{gridColumn:2,gridRow:1,height:Oy},children:y.jsx("div",{className:"flex h-full",children:Q.map((R,Y)=>y.jsxs("div",{className:"border-r text-center text-[10px] flex flex-col items-center justify-center",style:{width:R.width},children:[R.secondaryLabel&&y.jsx("span",{className:"font-semibold text-slate-600",children:R.secondaryLabel}),y.jsx("div",{className:`font-bold text-slate-800 ${E==="day"?"text-lg":"text-sm"}`,children:R.label})]},Y))})}),y.jsx("div",{className:"pointer-events-none flex",style:{gridColumn:2,gridRow:`2 / span ${ne.length}`},children:Q.map((R,Y)=>y.jsx("div",{className:"h-full border-r border-slate-200",style:{width:R.width}},Y))}),ne.map((R,Y)=>{const S=se(R),M=(()=>{const _e=ne[Y+1];return _e?V(R,W)!==V(_e,W):!0})(),H=Se(R.start),K=Math.max(.2,Se(R.end)-H+1),le=H*U,ae=K*U,de={task:{height:"24px"},substep:{height:"20px"},actionitem:{height:"8px"}};return y.jsxs(qo.Fragment,{children:[y.jsxs("div",{className:"sticky left-0 z-10 flex items-center border-r bg-slate-50",style:{gridColumn:1,gridRow:Y+2,height:aa,borderBottom:M?`2px solid ${S}`:"1px solid #e5e7eb"},children:[y.jsx("div",{className:"w-1 h-full flex-shrink-0",style:{backgroundColor:S}}),y.jsxs("div",{className:`flex items-center w-full ${Fe(R.type)}`,children:[(R.type==="task"||R.type==="substep")&&(Ce(R.id)?y.jsx(kk,{onClick:()=>ye(R.id),className:`w-4 h-4 mr-1 text-slate-500 cursor-pointer transition-transform ${h.has(R.id)?"rotate-0":"-rotate-90"}`}):y.jsx("div",{className:"w-4 h-4 mr-1"})),R.type==="actionitem"&&(R.progress===100?y.jsx(Bv,{className:"w-3.5 h-3.5 text-green-600 mr-2 flex-shrink-0"}):y.jsx($v,{className:"w-3.5 h-3.5 text-slate-400 mr-2 flex-shrink-0"})),y.jsx("span",{onClick:()=>n==null?void 0:n(R),className:`truncate text-xs ${R.type==="task"?"font-semibold text-slate-800":"text-slate-600"} ${n?"cursor-pointer hover:text-blue-600":""}`,title:R.name,children:R.name})]})]}),y.jsx("div",{className:"relative",style:{gridColumn:2,gridRow:Y+2,borderBottom:M?`2px solid ${S}`:"1px solid #e5e7eb"},children:H>=0&&y.jsx("div",{title:`${R.name} (${R.progress}%)`,onClick:()=>n==null?void 0:n(R),className:"absolute h-full flex items-center group",style:{left:le,width:ae,cursor:n?"pointer":"default"},children:y.jsx("div",{className:"w-full rounded",style:{...de[R.type],backgroundColor:S},children:y.jsx("div",{className:"bg-black bg-opacity-30 h-full rounded",style:{width:`${R.progress}%`}})})})})]},R.id)}),y.jsx("div",{style:{gridColumn:2,gridRow:`2 / span ${ne.length}`,position:"relative",pointerEvents:"none"},children:l&&y.jsx(WD,{items:ne,getDaysFromStart:Se,dayWidth:U})})]})})]})})},WD=({items:t,getDaysFromStart:e,dayWidth:n})=>{const s=G.useMemo(()=>{const r=[],l=new Map(t.map((f,h)=>[f.id,h]));return t.forEach((f,h)=>{(f.dependencies||[]).forEach(g=>{const m=l.get(g),x=m!==void 0?t[m]:void 0;if(x&&m!==void 0){const _=e(x.end),b=e(f.start);if(_<0||b<0)return;const C=(_+1)*n,E=m*aa+aa/2,N=b*n,D=h*aa+aa/2,B=C+20,z=N-20,U=`M ${C} ${E} C ${B} ${E}, ${z} ${D}, ${N} ${D}`;r.push({key:`${g}-${f.id}`,d:U})}})}),r},[t,e,n]);return y.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none",overflow:"visible",children:[y.jsx("defs",{children:y.jsx("marker",{id:"gantt_arrowhead",markerWidth:"5",markerHeight:"4",refX:"5",refY:"2",orient:"auto",children:y.jsx("polygon",{points:"0 0, 5 2, 0 4",fill:"#4b5563"})})}),s.map(r=>y.jsx("path",{d:r.d,stroke:"#4b5563",strokeWidth:"1",fill:"none",markerEnd:"url(#gantt_arrowhead)"},r.key))]})},QD=({tasks:t,projectGoal:e,targetDate:n,ganttData:s,projectReportDeck:r,onClose:l,onReportGenerated:f,generateUniqueId:h})=>{const[g,m]=G.useState("list"),[x,_]=G.useState(new Set),[b,C]=G.useState(""),[E,N]=G.useState(!1),[D,B]=G.useState(null),[z,U]=G.useState({key:"taskName",direction:"ascending"}),[F,V]=G.useState("slides"),[W,se]=G.useState(null),ye=G.useMemo(()=>{const S=[];return s&&S.push({id:"gantt-chart-main",name:"プロジェクト ガントチャート",type:"Gantt Chart",taskName:"プロジェクト全体",subStepName:"",actionItemName:"",source:{name:"プロジェクト ガントチャート",type:"json",content:s}}),r&&S.push({id:"project-report-main",name:"プロジェクトレポート",type:"Project Report",taskName:"プロジェクト全体",subStepName:"",actionItemName:"",source:{name:"プロジェクトレポート",type:"json",content:r}}),t.forEach(M=>{var H,K,le,ae,de;(H=M.extendedDetails)!=null&&H.reportDeck&&S.push({id:`task-report-${M.id}`,name:`タスクレポート: ${M.title}`,type:"Task Report",taskName:M.title,subStepName:"",actionItemName:"",source:{name:`タスクレポート: ${M.title}`,type:"json",content:M.extendedDetails.reportDeck}}),(le=(K=M.extendedDetails)==null?void 0:K.attachments)==null||le.forEach(_e=>{S.push({id:_e.id,name:_e.name,type:"Attachment",taskName:M.title,subStepName:"",actionItemName:"",source:{name:_e.name,type:_e.type.startsWith("image/")?"image":"text",content:_e.dataUrl,dataUrl:_e.dataUrl}})}),(de=(ae=M.extendedDetails)==null?void 0:ae.subSteps)==null||de.forEach(_e=>{var Me,rt;(Me=_e.attachments)==null||Me.forEach(Je=>{S.push({id:Je.id,name:Je.name,type:"Attachment",taskName:M.title,subStepName:_e.text,actionItemName:"",source:{name:Je.name,type:Je.type.startsWith("image/")?"image":"text",content:Je.dataUrl,dataUrl:Je.dataUrl}})}),(rt=_e.actionItems)==null||rt.forEach(Je=>{var Ht,Cn,En;(Cn=(Ht=Je.report)==null?void 0:Ht.attachments)==null||Cn.forEach($t=>{S.push({id:$t.id,name:$t.name,type:"Attachment",taskName:M.title,subStepName:_e.text,actionItemName:Je.text,source:{name:$t.name,type:$t.type.startsWith("image/")?"image":"text",content:$t.dataUrl,dataUrl:$t.dataUrl}})}),(En=Je.report)!=null&&En.matrixData&&S.push({id:`matrix-${Je.id}`,name:`データマトリクス: ${Je.text}`,type:"Data Matrix",taskName:M.title,subStepName:_e.text,actionItemName:Je.text,source:{name:`データマトリクス: ${Je.text}`,type:"json",content:Je.report.matrixData}})})})}),S},[t,s,r]),ne=G.useMemo(()=>{let S=[...ye];return z!==null&&S.sort((M,H)=>{const K=(M[z.key]||"").toLowerCase(),le=(H[z.key]||"").toLowerCase();return K<le?z.direction==="ascending"?-1:1:K>le?z.direction==="ascending"?1:-1:0}),S},[ye,z]),oe=S=>{let M="ascending";z&&z.key===S&&z.direction==="ascending"&&(M="descending"),U({key:S,direction:M})},re=S=>!z||z.key!==S?y.jsx(cf,{className:"w-3 h-3 ml-1 opacity-30 group-hover:opacity-100"}):z.direction==="ascending"?y.jsx(uf,{className:"w-3 h-3 ml-1 text-blue-600"}):y.jsx(cf,{className:"w-3 h-3 ml-1 text-blue-600"}),Q=S=>{_(M=>{const H=new Set(M);return H.has(S)?H.delete(S):H.add(S),H})},Se=()=>{x.size===ye.length?_(new Set):_(new Set(ye.map(S=>S.id)))},Fe=async()=>{if(x.size===0){B("レポート生成には、少なくとも1つの資料を選択してください。");return}if(!b.trim()){B("レポートの目的をプロンプトに入力してください。");return}N(!0),B(null),se(null);const S=ye.filter(M=>x.has(M.id)).map(M=>M.source);try{if(F==="slides"){const M=await yM(S,b);f(M)}else{const M=await vM(S,b);se(M)}}catch(M){B(M instanceof Error?M.message:"カスタムレポートの生成に失敗しました。")}finally{N(!1)}},Ce=S=>{switch(S){case"Gantt Chart":return y.jsx(Gv,{className:"w-5 h-5 text-amber-600"});case"Project Report":case"Task Report":return y.jsx(zv,{className:"w-5 h-5 text-teal-600"});case"Attachment":return y.jsx(Uk,{className:"w-5 h-5 text-slate-600"});case"Data Matrix":return y.jsx(Lk,{className:"w-5 h-5 text-purple-600"});default:return y.jsx(ya,{className:"w-5 h-5 text-slate-500"})}},q=S=>{if(S.dataUrl)return S.dataUrl;if(S.type==="json")try{const M=JSON.stringify(S.content,null,2),H=new Blob([M],{type:"application/json"});return URL.createObjectURL(H)}catch{return}},$=G.useMemo(()=>ye.filter(S=>x.has(S.id)),[x,ye]),R=()=>y.jsxs(y.Fragment,{children:[y.jsx("main",{className:"flex-grow p-4 overflow-y-auto",children:y.jsxs("table",{className:"w-full min-w-[1000px] border-collapse text-sm",children:[y.jsx("thead",{className:"sticky top-0 bg-slate-200 z-10",children:y.jsxs("tr",{children:[y.jsx("th",{className:"p-2 border border-slate-300 w-10 text-center",children:y.jsx("input",{type:"checkbox",checked:x.size===ye.length&&ye.length>0,onChange:Se,className:"w-4 h-4 accent-blue-600"})}),y.jsx("th",{className:"p-0 border border-slate-300 w-1/4",children:y.jsxs("button",{onClick:()=>oe("name"),className:"w-full h-full flex items-center justify-between group font-semibold text-slate-700 p-2 hover:bg-slate-200/50",children:[y.jsx("span",{children:"資料名"}),re("name")]})}),y.jsx("th",{className:"p-0 border border-slate-300 w-40",children:y.jsxs("button",{onClick:()=>oe("type"),className:"w-full h-full flex items-center justify-between group font-semibold text-slate-700 p-2 hover:bg-slate-200/50",children:[y.jsx("span",{children:"種類"}),re("type")]})}),y.jsx("th",{className:"p-0 border border-slate-300 w-1/4",children:y.jsxs("button",{onClick:()=>oe("taskName"),className:"w-full h-full flex items-center justify-between group font-semibold text-slate-700 p-2 hover:bg-slate-200/50",children:[y.jsx("span",{children:"タスク"}),re("taskName")]})}),y.jsx("th",{className:"p-0 border border-slate-300 w-1/4",children:y.jsxs("button",{onClick:()=>oe("subStepName"),className:"w-full h-full flex items-center justify-between group font-semibold text-slate-700 p-2 hover:bg-slate-200/50",children:[y.jsx("span",{children:"サブステップ"}),re("subStepName")]})}),y.jsx("th",{className:"p-0 border border-slate-300 w-1/4",children:y.jsxs("button",{onClick:()=>oe("actionItemName"),className:"w-full h-full flex items-center justify-between group font-semibold text-slate-700 p-2 hover:bg-slate-200/50",children:[y.jsx("span",{children:"アクション"}),re("actionItemName")]})})]})}),y.jsx("tbody",{children:ne.map(S=>{const M=q(S.source);return y.jsxs("tr",{className:"bg-white hover:bg-slate-50 transition-colors",children:[y.jsx("td",{className:"border border-slate-300 align-middle text-center p-2",children:y.jsx("input",{type:"checkbox",checked:x.has(S.id),onChange:()=>Q(S.id),className:"w-4 h-4 accent-blue-600"})}),y.jsx("td",{className:"border border-slate-300 p-2 font-medium text-slate-800",children:M?y.jsx("a",{href:M,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:S.name}):y.jsx("span",{children:S.name})}),y.jsx("td",{className:"border border-slate-300 p-2 text-slate-600",children:y.jsxs("div",{className:"flex items-center gap-2",children:[Ce(S.type),y.jsx("span",{children:S.type})]})}),y.jsx("td",{className:"border border-slate-300 p-2 text-slate-600 truncate",children:S.taskName}),y.jsx("td",{className:"border border-slate-300 p-2 text-slate-600 truncate",children:S.subStepName}),y.jsx("td",{className:"border border-slate-300 p-2 text-slate-600 truncate",children:S.actionItemName})]},S.id)})})]})}),y.jsxs("footer",{className:"flex-shrink-0 p-4 bg-white border-t flex justify-between items-center rounded-b-xl",children:[y.jsxs("span",{className:"text-sm text-slate-600",children:[x.size," / ",ye.length," 件の資料を選択中"]}),y.jsx("button",{onClick:()=>m("generate"),disabled:x.size===0,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 disabled:bg-slate-400 disabled:cursor-not-allowed",children:"レポート生成へ"})]})]}),Y=()=>y.jsxs(y.Fragment,{children:[y.jsxs("main",{className:"flex-grow p-6 overflow-y-auto grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsxs("h4",{className:"font-semibold text-lg text-slate-800 mb-2",children:["選択した資料 (",$.length,"件)"]}),y.jsx("div",{className:"bg-slate-50 border rounded-lg p-3 max-h-96 overflow-y-auto space-y-2",children:$.map(S=>y.jsxs("div",{className:"text-sm text-slate-700 flex items-center gap-2",children:[Ce(S.type),y.jsx("span",{className:"truncate",title:S.name,children:S.name})]},S.id))}),y.jsx("h4",{className:"font-semibold text-lg text-slate-800 mt-6 mb-2",children:"レポート形式"}),y.jsxs("div",{className:"flex gap-4",children:[y.jsxs("label",{className:"flex items-center gap-2 p-3 border rounded-lg cursor-pointer flex-1 hover:bg-slate-50",children:[y.jsx("input",{type:"radio",name:"reportFormat",value:"slides",checked:F==="slides",onChange:()=>V("slides"),className:"w-4 h-4 accent-blue-600"}),"スライド形式"]}),y.jsxs("label",{className:"flex items-center gap-2 p-3 border rounded-lg cursor-pointer flex-1 hover:bg-slate-50",children:[y.jsx("input",{type:"radio",name:"reportFormat",value:"text",checked:F==="text",onChange:()=>V("text"),className:"w-4 h-4 accent-blue-600"}),"テキスト形式"]})]})]}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-semibold text-lg text-slate-800 mb-2",children:"レポート作成の目的"}),y.jsx("textarea",{value:b,onChange:S=>C(S.target.value),placeholder:"例：これらの資料からプロジェクトの進捗状況をまとめ、経営層向けの報告スライドを作成してください。",rows:6,className:"w-full p-3 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition text-sm"}),D&&y.jsx("div",{className:"mt-2",children:y.jsx(uu,{message:D})}),W&&y.jsxs("div",{className:"mt-4 p-4 border rounded-lg bg-slate-50",children:[y.jsx("h5",{className:"font-semibold text-md text-slate-800 mb-2",children:"生成されたテキストレポート"}),y.jsx("pre",{className:"text-sm text-slate-700 bg-white p-3 rounded whitespace-pre-wrap max-h-60 overflow-y-auto",children:W}),y.jsx("button",{onClick:()=>navigator.clipboard.writeText(W),className:"text-xs mt-2 px-2 py-1 bg-slate-200 rounded",children:"クリップボードにコピー"})]})]})]}),y.jsxs("footer",{className:"flex-shrink-0 p-4 bg-white border-t flex justify-between items-center rounded-b-xl",children:[y.jsxs("button",{onClick:()=>{m("list"),se(null)},className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 border border-slate-300 rounded-md shadow-sm hover:bg-slate-200",children:[y.jsx(Vv,{className:"w-4 h-4"}),"資料選択に戻る"]}),y.jsxs("button",{onClick:Fe,disabled:E,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-green-600 rounded-md shadow-sm hover:bg-green-700 disabled:bg-slate-400",children:[E?y.jsx(Qt,{size:"sm",color:"border-white"}):y.jsx(Rf,{className:"w-5 h-5"}),y.jsx("span",{children:E?"生成中...":"レポートを生成"})]})]})]});return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex flex-col p-4 sm:p-6 md:p-8 z-[70]",children:y.jsxs("div",{className:"bg-slate-100 rounded-xl shadow-2xl w-full h-full flex flex-col",children:[y.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-slate-200 bg-white rounded-t-xl",children:[y.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-3",children:[y.jsx(ya,{className:"w-7 h-7 text-blue-600"}),y.jsx("span",{children:"資料センター"})]}),y.jsx("button",{onClick:l,className:"p-1.5 rounded-full hover:bg-slate-100",children:y.jsx(Zn,{className:"w-6 h-6 text-slate-500"})})]}),g==="list"?R():Y()]})})},e5=({tasks:t,projectGoal:e,targetDate:n,onSelectTask:s,onUpdateTaskExtendedDetails:r,onUpdateTaskPosition:l,onUpdateTaskStatus:f,onStartNewProject:h,onExportProject:g,onAddTask:m,onRemoveTask:x,onImportSingleTask:_,onAutoLayout:b,onUndo:C,canUndo:E,onRedo:N,canRedo:D,generateUniqueId:B,onUpdateTaskConnections:z,ganttData:U,setGanttData:F,onCustomReportGenerated:V,onClearApiKey:W,onOpenProjectList:se,onLogout:ye,currentProjectId:ne,onSaveProject:oe})=>{G.useRef(null);const re=G.useRef(null),[Q,Se]=G.useState(new Map),[Fe,Ce]=G.useState([]),q=G.useRef(null),$=G.useRef({x:0,y:0}),[R,Y]=G.useState(!1),[S,M]=G.useState(!1),[H,K]=G.useState(null),[le,ae]=G.useState(!1),[de,_e]=G.useState(null),[Me,rt]=G.useState(!1),[Je,Ht]=G.useState(null),[Cn,En]=G.useState(!1),[$t,Os]=G.useState(null),[er,kt]=G.useState(!1),[ts,Kn]=G.useState(!1),[ns,An]=G.useState(null),[tr,is]=G.useState(!1),[nr,ss]=G.useState(!1),[On,wt]=G.useState(!1),[ee,ue]=G.useState(null),[ve,Te]=G.useState({x:0,y:0}),[mt,at]=G.useState(!1),[yt,fn]=G.useState("viewer"),[Nn,jn]=G.useState(!1);G.useEffect(()=>{(async()=>{if(ne)try{const we=await Yi.getUserRole(ne);fn(we||"viewer");const Ie=await Ns.getProject(ne);jn(Ie.isPublic)}catch(we){console.error("権限の取得に失敗しました:",we)}})()},[ne]),G.useEffect(()=>{if(!ne)return;const te=Yi.subscribeToProjectUpdates(ne,we=>{we.table==="projects"&&we.eventType==="UPDATE"&&window.location.reload()});return()=>{te.unsubscribe()}},[ne]);const Dt=yt==="owner"||yt==="admin"||yt==="editor",xi=yt==="owner"||yt==="admin";G.useEffect(()=>{const te=new Map;t.forEach(we=>{te.set(we.id,Q.get(we.id)||G.createRef())}),Se(te)},[t]);const tn=G.useCallback(()=>{if(!re.current||Q.size===0){Ce([]);return}const te=[];t.forEach(we=>{var Ie,ct;if(we.nextTaskIds&&we.nextTaskIds.length>0){const Ot=Q.get(we.id),Ct=Ot==null?void 0:Ot.current;if(!Ct)return;const st=((Ie=we.position)==null?void 0:Ie.x)||0,js=((ct=we.position)==null?void 0:ct.y)||0,as=Ct.getBoundingClientRect(),hn={x:st+as.width,y:js+as.height/2};we.nextTaskIds.forEach(Rn=>{var $s,rr;const sr=t.find(bi=>bi.id===Rn);if(!sr)return;const Vs=Q.get(Rn),or=Vs==null?void 0:Vs.current;if(!or)return;const mu=(($s=sr.position)==null?void 0:$s.x)||0,qs=((rr=sr.position)==null?void 0:rr.y)||0,Bs=or.getBoundingClientRect(),kn={x:mu,y:qs+Bs.height/2};te.push({id:`conn-${we.id}-${Rn}`,from:hn,to:kn,sourceId:we.id,targetId:Rn})})}}),Ce(te)},[t,Q]);G.useEffect(()=>{const te=setTimeout(tn,50);return()=>clearTimeout(te)},[tn,t]),G.useEffect(()=>{window.addEventListener("resize",tn);const te=new MutationObserver(tn);return re.current&&te.observe(re.current,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),()=>{window.removeEventListener("resize",tn),te.disconnect()}},[tn]);const _i=(te,we)=>{var ct,Ot;if(!Dt)return;q.current=we;const Ie=t.find(Ct=>Ct.id===we);if(re.current){const Ct=re.current.getBoundingClientRect();$.current.x=te.clientX-Ct.left-(((ct=Ie==null?void 0:Ie.position)==null?void 0:ct.x)||0),$.current.y=te.clientY-Ct.top-(((Ot=Ie==null?void 0:Ie.position)==null?void 0:Ot.y)||0)}te.dataTransfer.effectAllowed="move"},Be=te=>{Dt&&(te.preventDefault(),te.dataTransfer.dropEffect="move")},zt=te=>{var hn;if(!Dt||(te.preventDefault(),!q.current||!re.current))return;const we=re.current.getBoundingClientRect(),Ie=(hn=Q.get(q.current))==null?void 0:hn.current,ct=(Ie==null?void 0:Ie.offsetWidth)||380,Ot=(Ie==null?void 0:Ie.offsetHeight)||280;let Ct=te.clientX-we.left-$.current.x,st=te.clientY-we.top-$.current.y;const js=re.current.scrollWidth,as=re.current.scrollHeight;Ct=Math.max(0,Math.min(Ct,js-ct)),st=Math.max(0,Math.min(st,as-Ot)),l(q.current,{x:Ct,y:st}),q.current=null,setTimeout(tn,0)},nn=async()=>{ae(!0),_e(null);try{const te=await hM(t,e,n);K(te),M(!0)}catch(te){_e(te instanceof Error?te.message:"プロジェクト診断レポートの生成に失敗しました。")}finally{ae(!1)}},Mn=async()=>{if(Je){rt(!0);return}En(!0),Os(null);try{const te=await mM(t,e,n);Ht(te),rt(!0)}catch(te){Os(te instanceof Error?te.message:"プロジェクトレポートの生成に失敗しました。")}finally{En(!1)}},os=async()=>{if(U){kt(!0);return}Kn(!0),An(null);try{const te=await ey(t,e,n);F(te),kt(!0)}catch(te){An(te instanceof Error?te.message:"ガントチャートのデータ生成に失敗しました。")}finally{Kn(!1)}},rs=async()=>{Kn(!0),An(null);try{const te=await ey(t,e,n);F(te)}catch(te){An(te instanceof Error?te.message:"ガントチャートのデータ再生成に失敗しました。")}finally{Kn(!1)}},ba=async()=>{if(!Dt){alert("このプロジェクトを編集する権限がありません。");return}if(ne){at(!0);try{await oe(),alert("プロジェクトが保存されました！")}catch(te){alert("プロジェクトの保存に失敗しました: "+(te instanceof Error?te.message:"不明なエラー"))}finally{at(!1)}}else{const te=prompt("プロジェクト名を入力してください:",`${e.substring(0,50)}...`);if(!te)return;at(!0);try{const we=await Ns.createProject(te,e,n,t,U);alert("プロジェクトが保存されました！")}catch(we){alert("プロジェクトの保存に失敗しました: "+(we instanceof Error?we.message:"不明なエラー"))}finally{at(!1)}}},du=async()=>{if(!(!xi||!ne))try{const te=await Ns.toggleProjectVisibility(ne);jn(te),alert(te?"プロジェクトを公開しました":"プロジェクトを非公開にしました")}catch(te){alert("公開設定の変更に失敗しました: "+(te instanceof Error?te.message:"不明なエラー"))}},Vn=(te,we)=>{if(!Dt||!re.current)return;const Ie=re.current.getBoundingClientRect(),ct={x:we.clientX-Ie.left+re.current.scrollLeft,y:we.clientY-Ie.top+re.current.scrollTop};ue({fromId:te,fromPos:ct})},St=te=>{if(!Dt)return;if(!ee||ee.fromId===te){ue(null);return}const we=t.find(Ie=>Ie.id===ee.fromId);if(we){const Ie=Array.from(new Set([...we.nextTaskIds||[],te]));z(we.id,Ie)}ue(null)},Pt=(te,we)=>{if(!Dt)return;const Ie=t.find(ct=>ct.id===te);if(Ie){const ct=(Ie.nextTaskIds||[]).filter(Ot=>Ot!==we);z(Ie.id,ct)}},Ti=te=>{if(!ee||!re.current)return;const we=re.current.getBoundingClientRect();Te({x:te.clientX-we.left+re.current.scrollLeft,y:te.clientY-we.top+re.current.scrollTop})},ir=()=>{ee&&ue(null)},fu=te=>{const we=te.type==="task"?te.id:te.parentId;if(!we)return;const Ie=t.find(ct=>ct.id===we);Ie&&(kt(!1),s(Ie))},hu=te=>{V(te),ss(!1)},wa=n?new Date(n+"T00:00:00Z").toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):"未設定";return Me&&Je?y.jsx(Fv,{tasks:t,initialDeck:Je,onSave:te=>Ht(te),onClose:()=>rt(!1),projectGoal:e,targetDate:n,reportScope:"project",generateUniqueId:B}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"min-h-screen bg-slate-100 p-4 md:p-6 flex flex-col overflow-hidden",children:[y.jsxs("div",{className:"max-w-full mx-auto w-full",children:[y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[y.jsxs("button",{onClick:()=>is(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-slate-600 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-transform hover:scale-105",children:[y.jsx(Rs,{className:"w-5 h-5 mr-2"}),"新規プロジェクト"]}),y.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.jsx("button",{onClick:se,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-slate-800 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",title:"保存済みプロジェクト",children:y.jsx(ya,{className:"w-5 h-5"})}),Dt&&y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:ba,disabled:mt,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 disabled:bg-slate-400",title:"プロジェクトを保存",children:mt?y.jsx(Qt,{size:"sm",color:"border-white"}):y.jsx(Jo,{className:"w-5 h-5"})}),y.jsx("button",{onClick:C,disabled:!E,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-slate-800 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400 disabled:bg-slate-300 disabled:cursor-not-allowed",title:"元に戻す",children:y.jsx(Dk,{className:"w-5 h-5"})}),y.jsx("button",{onClick:N,disabled:!D,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-slate-800 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400 disabled:bg-slate-300 disabled:cursor-not-allowed",title:"やり直し",children:y.jsx(Ik,{className:"w-5 h-5"})})]}),xi&&ne&&y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>wt(!0),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-slate-800 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",title:"メンバー管理",children:y.jsx($k,{className:"w-5 h-5"})}),y.jsx("button",{onClick:du,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-slate-800 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",title:Nn?"プロジェクトを非公開にする":"プロジェクトを公開する",children:Nn?y.jsx(zk,{className:"w-5 h-5"}):y.jsx(Gk,{className:"w-5 h-5"})})]}),y.jsx("button",{onClick:W,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-slate-800 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",title:"APIキーを変更",children:y.jsx(va,{className:"w-5 h-5 text-yellow-600"})}),y.jsx("button",{onClick:ye,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700",title:"ログアウト",children:y.jsx(va,{className:"w-5 h-5"})}),Dt&&y.jsxs(y.Fragment,{children:[y.jsxs("button",{onClick:m,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700",children:[y.jsx(Ck,{className:"w-5 h-5 mr-2"}),"タスク追加"]}),y.jsxs("button",{onClick:g,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:[y.jsx(Jo,{className:"w-5 h-5 mr-2"}),"JSONエクスポート"]}),y.jsxs("button",{onClick:b,className:"inline-flex items-center px-4 py-2 border border-slate-300 text-sm font-medium rounded-md shadow-sm text-slate-700 bg-white hover:bg-slate-50",title:"自動整列",children:[y.jsx(Mf,{className:"w-5 h-5 mr-2"}),"整列"]})]})]})]}),y.jsxs("header",{className:"mb-6 p-6 bg-white rounded-xl shadow-lg",children:[y.jsxs("div",{className:"flex flex-wrap justify-between items-start gap-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-3",children:"プロジェクトフロー"}),y.jsxs("div",{className:"space-y-2 text-slate-700",children:[y.jsxs("p",{className:"flex items-start",children:[y.jsx(Af,{className:"w-5 h-5 mr-2 text-blue-600 flex-shrink-0 mt-1"}),y.jsx("strong",{children:"目的:"})," ",y.jsx("span",{className:"break-all",children:e})]}),y.jsxs("p",{className:"flex items-center",children:[y.jsx(Ef,{className:"w-5 h-5 mr-2 text-blue-600 flex-shrink-0"}),y.jsx("strong",{children:"目標日:"})," ",wa]}),y.jsxs("div",{className:"flex items-center gap-4",children:[ne&&y.jsx("p",{className:"text-sm text-green-600",children:"✓ Supabaseに保存済み"}),Nn&&y.jsx("p",{className:"text-sm text-blue-600",children:"🌐 公開プロジェクト"}),y.jsxs("p",{className:"text-sm text-slate-500",children:["権限: ",yt==="owner"?"オーナー":yt==="admin"?"管理者":yt==="editor"?"編集者":"閲覧者"]})]})]})]}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 flex-shrink-0",children:[y.jsxs("button",{onClick:()=>Y(!0),className:"inline-flex items-center justify-center px-4 py-2 border border-slate-300 text-sm font-medium rounded-md shadow-sm text-slate-700 bg-white hover:bg-slate-50",children:[y.jsx(jk,{className:"w-5 h-5 mr-2"}),"アクションアイテム一覧"]}),y.jsxs("button",{onClick:()=>ss(!0),className:"inline-flex items-center justify-center px-4 py-2 border border-slate-300 text-sm font-medium rounded-md shadow-sm text-slate-700 bg-white hover:bg-slate-50",children:[y.jsx(ya,{className:"w-5 h-5 mr-2"}),"資料センター"]}),y.jsxs("button",{onClick:os,disabled:ts,className:"inline-flex items-center justify-center px-4 py-2 border border-amber-300 text-sm font-medium rounded-md shadow-sm text-amber-800 bg-amber-100 hover:bg-amber-200 disabled:bg-slate-400",children:[ts?y.jsx(Qt,{size:"sm"}):y.jsx(Gv,{className:"w-5 h-5 mr-2"}),"ガントチャート"]}),y.jsxs("button",{onClick:nn,disabled:le,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700 disabled:bg-slate-400",children:[le?y.jsx(Qt,{size:"sm"}):y.jsx(Rf,{className:"w-5 h-5 mr-2"}),"AIプロジェクト診断"]}),y.jsxs("button",{onClick:Mn,disabled:Cn,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 disabled:bg-slate-400",children:[Cn?y.jsx(Qt,{size:"sm"}):y.jsx(zv,{className:"w-5 h-5 mr-2"}),"プロジェクトレポート作成"]})]})]}),de&&y.jsx("div",{className:"mt-4",children:y.jsx("p",{className:"text-red-600 text-sm",children:de})}),$t&&y.jsx("div",{className:"mt-4",children:y.jsx("p",{className:"text-red-600 text-sm",children:$t})}),ns&&y.jsx("div",{className:"mt-4",children:y.jsx("p",{className:"text-red-600 text-sm",children:ns})})]})]}),y.jsxs("div",{ref:re,className:"flex-grow overflow-auto pb-8 relative min-h-[600px] border border-slate-300 rounded-lg bg-slate-50 p-4 shadow-inner",onDragOver:Be,onDrop:zt,onMouseMove:Ti,onMouseUp:ir,children:[y.jsxs("div",{className:"relative w-full h-full min-w-[1200px] min-h-[800px]",children:[t.map((te,we)=>y.jsx(Jk,{cardRef:Q.get(te.id),task:te,onSelectTask:s,onRemoveTask:Dt?x:()=>{},onUpdateStatus:Dt?f:()=>{},onDragCardStart:_i,onStartConnection:Vn,onEndConnection:St,index:we},te.id)),Fe.map(te=>y.jsx(df,{from:te.from,to:te.to,id:te.id,onDelete:Dt?()=>Pt(te.sourceId,te.targetId):void 0},te.id)),ee&&y.jsx(df,{from:ee.fromPos,to:ve,id:"preview-connector"})]}),t.length===0&&y.jsx("div",{className:"text-center py-10 flex-grow flex items-center justify-center",children:y.jsx("p",{className:"text-slate-500 text-lg",children:Dt?"タスクがありません。「タスク追加」ボタンで最初のタスクを作成しましょう。":"このプロジェクトにはまだタスクがありません。"})})]})]}),er&&U&&y.jsx(XD,{data:U,onClose:()=>kt(!1),onItemClick:fu,onRegenerate:rs,isRegenerating:ts}),nr&&y.jsx(QD,{tasks:t,projectGoal:e,targetDate:n,ganttData:U,projectReportDeck:Je,onClose:()=>ss(!1),onReportGenerated:hu,generateUniqueId:B}),R&&y.jsx(Yk,{tasks:t,onClose:()=>Y(!1)}),S&&y.jsx(Zk,{report:H,onClose:()=>M(!1)}),On&&ne&&y.jsx(Kk,{isOpen:On,onClose:()=>wt(!1),projectId:ne,userRole:yt}),tr&&y.jsx(iD,{onClose:()=>is(!1),onDownloadAndStartNew:()=>{g(),h()},onStartNewWithoutSaving:h})]})},t5=({task:t,onClose:e,onUpdate:n,onDelete:s,onOpenSlideEditor:r,onSubStepUpdate:l,onSubStepAdd:f,onSubStepDelete:h,onSubStepStatusChange:g,onAttachmentAdd:m,onAttachmentDelete:x,onDecisionAdd:_,onDecisionUpdate:b,onDecisionDelete:C,onCanvasSizeUpdate:E})=>{var ye,ne,oe,re,Q,Se,Fe,Ce,q;const[N,D]=G.useState(t),[B,z]=G.useState(!1),[U,F]=G.useState("details");G.useEffect(()=>{D(t)},[t]);const V=async()=>{z(!0);try{await n(N)}catch($){console.error("Failed to save task:",$)}finally{z(!1)}},W=($,R)=>{D(Y=>({...Y,[$]:R}))},se=($,R)=>{D(Y=>({...Y,extendedDetails:{...Y.extendedDetails,[$]:R}}))};return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[y.jsxs("header",{className:"flex items-center justify-between p-6 border-b",children:[y.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"タスク詳細"}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("button",{onClick:V,disabled:B,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2",children:[B?y.jsx(Qt,{size:"sm"}):y.jsx(Vk,{className:"w-4 h-4"}),"保存"]}),y.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100",children:y.jsx(Zn,{className:"w-6 h-6"})})]})]}),y.jsxs("div",{className:"flex-1 overflow-hidden",children:[y.jsx("div",{className:"border-b",children:y.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"details",label:"基本情報"},{id:"substeps",label:"サブステップ"},{id:"attachments",label:"添付ファイル"},{id:"decisions",label:"決定事項"}].map($=>y.jsx("button",{onClick:()=>F($.id),className:`py-4 px-1 border-b-2 font-medium text-sm ${U===$.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:$.label},$.id))})}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[U==="details"&&y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"タスク名"}),y.jsx("input",{type:"text",value:N.title,onChange:$=>W("title",$.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"説明"}),y.jsx("textarea",{value:N.description,onChange:$=>W("description",$.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ステータス"}),y.jsxs("select",{value:N.status||Le.NOT_STARTED,onChange:$=>W("status",$.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[y.jsx("option",{value:Le.NOT_STARTED,children:"未着手"}),y.jsx("option",{value:Le.IN_PROGRESS,children:"進行中"}),y.jsx("option",{value:Le.COMPLETED,children:"完了"}),y.jsx("option",{value:Le.BLOCKED,children:"停滞中"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"期日"}),y.jsx("input",{type:"date",value:((ye=N.extendedDetails)==null?void 0:ye.dueDate)||"",onChange:$=>se("dueDate",$.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"担当者"}),y.jsx("input",{type:"text",value:((ne=N.extendedDetails)==null?void 0:ne.responsible)||"",onChange:$=>se("responsible",$.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"メモ"}),y.jsx("textarea",{value:((oe=N.extendedDetails)==null?void 0:oe.notes)||"",onChange:$=>se("notes",$.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})]}),U==="substeps"&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"text-lg font-medium",children:"サブステップ"}),y.jsxs("button",{onClick:()=>f("新しいサブステップ",""),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[y.jsx(Rs,{className:"w-4 h-4"}),"追加"]})]}),y.jsx("div",{className:"space-y-3",children:((Q=(re=N.extendedDetails)==null?void 0:re.subSteps)==null?void 0:Q.map($=>y.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("h4",{className:"font-medium",children:$.text}),y.jsx("p",{className:"text-sm text-gray-600 mt-1",children:$.notes})]}),y.jsx("button",{onClick:()=>h($.id),className:"text-red-500 hover:text-red-700 p-1",children:y.jsx(Ms,{className:"w-4 h-4"})})]})},$.id)))||[]})]}),U==="attachments"&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"text-lg font-medium",children:"添付ファイル"}),y.jsx("input",{type:"file",onChange:$=>{var Y;const R=(Y=$.target.files)==null?void 0:Y[0];if(R){const S=new FileReader;S.onload=M=>{var H;m({name:R.name,type:R.type,dataUrl:(H=M.target)==null?void 0:H.result})},S.readAsDataURL(R)}},className:"hidden",id:"file-upload"}),y.jsxs("label",{htmlFor:"file-upload",className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 cursor-pointer",children:[y.jsx(Rs,{className:"w-4 h-4"}),"ファイル追加"]})]}),y.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:((Fe=(Se=N.extendedDetails)==null?void 0:Se.attachments)==null?void 0:Fe.map($=>y.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("span",{className:"text-sm font-medium truncate",children:$.name}),y.jsx("button",{onClick:()=>x($.id),className:"text-red-500 hover:text-red-700",children:y.jsx(Ms,{className:"w-4 h-4"})})]}),$.type.startsWith("image/")&&y.jsx("img",{src:$.dataUrl,alt:$.name,className:"w-full h-20 object-cover rounded"})]},$.id)))||[]})]}),U==="decisions"&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"text-lg font-medium",children:"決定事項"}),y.jsxs("button",{onClick:()=>_({question:"",status:"undecided"}),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[y.jsx(Rs,{className:"w-4 h-4"}),"追加"]})]}),y.jsx("div",{className:"space-y-3",children:((q=(Ce=N.extendedDetails)==null?void 0:Ce.decisions)==null?void 0:q.map($=>y.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("input",{type:"text",value:$.question,onChange:R=>b($.id,{question:R.target.value}),placeholder:"決定すべき項目",className:"w-full font-medium border-none outline-none bg-transparent"}),y.jsxs("div",{className:"mt-2 space-y-2",children:[y.jsxs("select",{value:$.status,onChange:R=>b($.id,{status:R.target.value}),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[y.jsx("option",{value:"undecided",children:"未決定"}),y.jsx("option",{value:"decided",children:"決定済み"})]}),$.status==="decided"&&y.jsx("input",{type:"text",value:$.decision||"",onChange:R=>b($.id,{decision:R.target.value}),placeholder:"決定内容",className:"w-full text-sm border border-gray-300 rounded px-2 py-1"})]})]}),y.jsx("button",{onClick:()=>C($.id),className:"text-red-500 hover:text-red-700 p-1",children:y.jsx(Ms,{className:"w-4 h-4"})})]})},$.id)))||[]})]})]})]}),y.jsxs("footer",{className:"border-t p-6 flex justify-between",children:[y.jsx("button",{onClick:()=>s(t.id),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"タスクを削除"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"キャンセル"}),y.jsx("button",{onClick:V,disabled:B,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:B?"保存中...":"保存"})]})]})]})})},n5=({onClose:t,onSubmit:e})=>{const[n,s]=G.useState(""),[r,l]=G.useState(""),[f,h]=G.useState(""),g=m=>{if(m.preventDefault(),!n.trim()){h("タスクのタイトルは必須です。");return}if(!r.trim()){h("タスクの説明は必須です。");return}e({title:n,description:r}),h("")};return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-4 z-[60]",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg",children:[y.jsxs("header",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[y.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"新しいタスクを追加"}),y.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-700 transition-colors p-1 rounded-full hover:bg-slate-100",title:"閉じる","aria-label":"タスク追加モーダルを閉じる",children:y.jsx(Zn,{className:"w-6 h-6"})})]}),y.jsxs("form",{onSubmit:g,children:[y.jsxs("div",{className:"p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"taskTitle",className:"block text-sm font-medium text-slate-700 mb-1",children:"タスクタイトル"}),y.jsx("input",{type:"text",id:"taskTitle",value:n,onChange:m=>s(m.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base text-slate-800 placeholder-slate-500",placeholder:"例: 市場調査を実施"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"taskDescription",className:"block text-sm font-medium text-slate-700 mb-1",children:"タスク説明"}),y.jsx("textarea",{id:"taskDescription",value:r,onChange:m=>l(m.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base text-slate-800 placeholder-slate-500",placeholder:"例: 競合製品の分析とターゲット顧客の特定"})]}),f&&y.jsx("p",{className:"text-sm text-red-600",children:f})]}),y.jsxs("footer",{className:"p-6 bg-slate-50 border-t border-slate-200 flex justify-end space-x-3 rounded-b-xl",children:[y.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-md shadow-sm hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"キャンセル"}),y.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"タスクを追加"})]})]})]})})},i5=({onSetApiKey:t,error:e,isLoading:n})=>{const[s,r]=G.useState(""),l=f=>{f.preventDefault(),t(s)};return y.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-slate-900 to-slate-700 p-4",children:[y.jsxs("div",{className:"w-full max-w-md bg-white shadow-2xl rounded-xl p-8",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx(Rf,{className:"w-12 h-12 mx-auto text-blue-600 mb-4"}),y.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"AI Project Planner"}),y.jsx("p",{className:"text-slate-600 mt-2",children:"始めるには、Google Gemini APIキーを入力してください。"})]}),y.jsxs("form",{onSubmit:l,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"apiKey",className:"block text-sm font-semibold text-slate-700 mb-2 flex items-center",children:[y.jsx(va,{className:"w-5 h-5 mr-2 text-slate-500"}),"Gemini API Key"]}),y.jsx("input",{id:"apiKey",type:"password",value:s,onChange:f=>r(f.target.value),placeholder:"APIキーをここに貼り付け",className:"w-full px-4 py-3 bg-slate-100 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out text-base text-slate-800 placeholder-slate-400"})]}),e&&y.jsx("p",{className:"text-sm text-red-600 bg-red-100 p-3 rounded-md",children:e}),y.jsx("button",{type:"submit",disabled:n||!s,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out flex items-center justify-center",children:n?y.jsx(Qt,{size:"sm"}):"保存して開始"})]}),y.jsxs("div",{className:"text-center mt-6",children:[y.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"APIキーの取得はこちら"}),y.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"APIキーはセッション中のみブラウザに保存されます。"})]})]}),y.jsx("footer",{className:"mt-8 text-center",children:y.jsx("p",{className:"text-slate-400 text-sm",children:"Powered by Gemini API"})})]})},s5=({isOpen:t,onClose:e,onSuccess:n})=>{const[s,r]=G.useState(!0),[l,f]=G.useState(""),[h,g]=G.useState(""),[m,x]=G.useState(!1),[_,b]=G.useState(null),C=async E=>{E.preventDefault(),x(!0),b(null);try{if(s){const{error:N}=await ut.auth.signInWithPassword({email:l,password:h});if(N)throw N}else{const{error:N}=await ut.auth.signUp({email:l,password:h});if(N)throw N}n()}catch(N){b(N instanceof Error?N.message:"認証に失敗しました")}finally{x(!1)}};return t?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[y.jsxs("header",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[y.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center",children:[y.jsx(va,{className:"w-6 h-6 mr-2 text-blue-600"}),s?"ログイン":"アカウント作成"]}),y.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 transition-colors p-1 rounded-full hover:bg-slate-100",children:y.jsx(Zn,{className:"w-5 h-5"})})]}),y.jsxs("form",{onSubmit:C,className:"p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"メールアドレス"}),y.jsx("input",{type:"email",id:"email",value:l,onChange:E=>f(E.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-1",children:"パスワード"}),y.jsx("input",{type:"password",id:"password",value:h,onChange:E=>g(E.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:6})]}),_&&y.jsx("div",{className:"text-sm text-red-600 bg-red-100 p-3 rounded-md",children:_}),y.jsx("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out flex items-center justify-center",children:m?y.jsx(Qt,{size:"sm",color:"border-white"}):s?"ログイン":"アカウント作成"}),y.jsx("div",{className:"text-center",children:y.jsx("button",{type:"button",onClick:()=>r(!s),className:"text-sm text-blue-600 hover:underline",children:s?"アカウントをお持ちでない方はこちら":"すでにアカウントをお持ちの方はこちら"})})]})]})}):null},o5=({isOpen:t,onClose:e,onSelectProject:n,onCreateNew:s})=>{const[r,l]=G.useState([]),[f,h]=G.useState(!1),[g,m]=G.useState(null),x=async()=>{h(!0),m(null);try{const C=await Ns.getProjects();l(C)}catch(C){m(C instanceof Error?C.message:"プロジェクトの読み込みに失敗しました")}finally{h(!1)}};G.useEffect(()=>{t&&x()},[t]);const _=async(C,E)=>{if(E.stopPropagation(),!!confirm("このプロジェクトを削除しますか？この操作は取り消せません。"))try{await Ns.deleteProject(C),await x()}catch(N){m(N instanceof Error?N.message:"プロジェクトの削除に失敗しました")}},b=C=>{const E={projectGoal:C.goal,targetDate:C.targetDate,tasks:C.tasks,ganttData:C.ganttData},N=JSON.stringify(E,null,2),D=new Blob([N],{type:"application/json"}),B=URL.createObjectURL(D),z=document.createElement("a");z.href=B,z.download=`${C.title}.json`,document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(B)};return t?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[y.jsxs("header",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[y.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"プロジェクト一覧"}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[y.jsx(Rs,{className:"w-5 h-5"}),"新規作成"]}),y.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 transition-colors p-1 rounded-full hover:bg-slate-100",children:y.jsx(Zn,{className:"w-6 h-6"})})]})]}),y.jsxs("div",{className:"flex-grow p-6 overflow-y-auto",children:[g&&y.jsx(uu,{message:g}),f?y.jsx("div",{className:"flex items-center justify-center py-12",children:y.jsx(Qt,{size:"lg",text:"プロジェクトを読み込み中..."})}):r.length===0?y.jsxs("div",{className:"text-center py-12",children:[y.jsx("p",{className:"text-slate-500 text-lg mb-4",children:"プロジェクトがありません"}),y.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 mx-auto",children:[y.jsx(Rs,{className:"w-5 h-5"}),"最初のプロジェクトを作成"]})]}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(C=>y.jsxs("div",{onClick:()=>n(C),className:"bg-slate-50 rounded-lg p-4 cursor-pointer hover:bg-slate-100 transition-colors border border-slate-200 hover:border-blue-300",children:[y.jsxs("div",{className:"flex items-start justify-between mb-3",children:[y.jsx("h4",{className:"font-semibold text-slate-800 truncate flex-grow",children:C.title}),y.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[y.jsx("button",{onClick:E=>{E.stopPropagation(),b(C)},className:"p-1 text-slate-500 hover:text-blue-600 rounded",title:"JSONでダウンロード",children:y.jsx(Jo,{className:"w-4 h-4"})}),y.jsx("button",{onClick:E=>_(C.id,E),className:"p-1 text-slate-500 hover:text-red-600 rounded",title:"削除",children:y.jsx(Ms,{className:"w-4 h-4"})})]})]}),y.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[y.jsxs("p",{className:"flex items-start",children:[y.jsx(Af,{className:"w-4 h-4 mr-2 text-blue-600 flex-shrink-0 mt-0.5"}),y.jsx("span",{className:"line-clamp-2",children:C.goal})]}),y.jsxs("p",{className:"flex items-center",children:[y.jsx(Ef,{className:"w-4 h-4 mr-2 text-blue-600 flex-shrink-0"}),new Date(C.targetDate+"T00:00:00Z").toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})]}),y.jsxs("p",{className:"text-xs text-slate-500",children:["タスク数: ",C.tasks.length," | 更新: ",new Date(C.updatedAt).toLocaleDateString("ja-JP")]})]})]},C.id))})]})]})}):null},hi={subSteps:[],resources:"",responsible:"",notes:"",numericalTarget:void 0,dueDate:"",reportDeck:void 0,resourceMatrix:null,attachments:[],decisions:[],subStepCanvasSize:{width:1200,height:800}},r5=()=>[{id:"apqp_1",title:"フェーズ1: 計画とプログラムの定義",description:"顧客の声を収集し、ビジネスプランと製品/プロセスベンチマークを定義する。設計・品質目標を設定。",status:Le.NOT_STARTED,nextTaskIds:["apqp_2"]},{id:"apqp_2",title:"フェーズ2: 製品設計と開発",description:"DFMEA、製品仕様、図面を作成し、プロトタイプを製作・管理する。材料仕様とサプライヤーを確定。",status:Le.NOT_STARTED,nextTaskIds:["apqp_3"]},{id:"apqp_3",title:"フェーズ3: 工程設計と開発",description:"製造工程フローチャート、PFMEA、コントロールプランを作成する。測定システム分析(MSA)計画を立案。",status:Le.NOT_STARTED,nextTaskIds:["apqp_4"]},{id:"apqp_4",title:"フェーズ4: 製品と工程の妥当性確認",description:"トライアウト生産を実施し、MSAと初期工程能力調査(SPC)を行う。生産部品承認プロセス(PPAP)を完了。",status:Le.NOT_STARTED,nextTaskIds:["apqp_5"]},{id:"apqp_5",title:"フェーズ5: フィードバック、評価、是正処置",description:"量産を開始し、ばらつきを低減させる。顧客満足度を評価し、継続的改善を実施する。",status:Le.NOT_STARTED,nextTaskIds:[]}].map(e=>({...e,extendedDetails:{...hi,...e.extendedDetails||{}}})),a5=()=>[{id:"change_1",title:"1. 変更要求と影響分析",description:"変更要求を特定し、品質、コスト、納期、安全性への影響を評価する。",status:Le.NOT_STARTED,nextTaskIds:["change_2"]},{id:"change_2",title:"2. 変更計画と承認",description:"詳細な変更計画（スケジュール、リソース、検証計画）を作成し、変更管理委員会(CCB)の承認を得る。",status:Le.NOT_STARTED,nextTaskIds:["change_3"]},{id:"change_3",title:"3. 変更の実施と検証",description:"計画に基づき変更を実施。変更後のプロセスでトライアル生産を行い、結果を検証する。",status:Le.NOT_STARTED,nextTaskIds:["change_4"]},{id:"change_4",title:"4. 文書化とトレーニング",description:"FMEA、コントロールプラン、作業手順書等の関連文書をすべて更新し、関係者にトレーニングを実施する。",status:Le.NOT_STARTED,nextTaskIds:["change_5"]},{id:"change_5",title:"5. 変更のレビューとクローズ",description:"変更後のプロセスパフォーマンスを監視し、有効性をレビュー。問題がなければ変更をクローズする。",status:Le.NOT_STARTED,nextTaskIds:[]}].map(e=>({...e,extendedDetails:{...hi,...e.extendedDetails||{}}})),l5=()=>[{id:"eval_1",title:"1. 顧客要求の分析",description:"顧客から提供された製品仕様、図面、品質要求、生産量を詳細に分析する。",status:Le.NOT_STARTED,nextTaskIds:["eval_2"]},{id:"eval_2",title:"2. 既存設備の能力評価 (ギャップ分析)",description:"要求仕様に対し、既存の設備・工程能力を評価し、ギャップ（治工具、精度、サイクルタイム等）を特定する。",status:Le.NOT_STARTED,nextTaskIds:["eval_3"]},{id:"eval_3",title:"3. 評価用トライアル計画の立案",description:"ギャップを埋めるための暫定対策を講じ、評価用トライアルの計画（材料、段取り、測定項目）を立案する。",status:Le.NOT_STARTED,nextTaskIds:["eval_4"]},{id:"eval_4",title:"4. 評価トライアルの実施とデータ収集",description:"計画に基づきトライアルを実施し、寸法、性能、外観等のデータを収集する。",status:Le.NOT_STARTED,nextTaskIds:["eval_5"]},{id:"eval_5",title:"5. 評価レポート作成と顧客への報告",description:"トライアル結果をまとめ、実現可能性、課題、推奨事項を記載したレポートを作成し、顧客に報告する。",status:Le.NOT_STARTED,nextTaskIds:[]}].map(e=>({...e,extendedDetails:{...hi,...e.extendedDetails||{}}})),u5=()=>[{id:"dmaic_1",title:"フェーズ1: 定義 (Define)",description:"プロジェクトの目的、範囲、目標を明確にし、現状の問題点とビジネスインパクトを特定する。",status:Le.NOT_STARTED,nextTaskIds:["dmaic_2"]},{id:"dmaic_2",title:"フェーズ2: 測定 (Measure)",description:"現状プロセスのパフォーマンスを測定するためのデータを収集し、KPIを設定してベースラインを確立する。",status:Le.NOT_STARTED,nextTaskIds:["dmaic_3"]},{id:"dmaic_3",title:"フェーズ3: 分析 (Analyze)",description:"収集データを分析し、問題の根本原因を特定する。特性要因図やパレート図などを活用。",status:Le.NOT_STARTED,nextTaskIds:["dmaic_4"]},{id:"dmaic_4",title:"フェーズ4: 改善 (Improve)",description:"根本原因に対する解決策を立案・テストし、最も効果的な改善策をパイロット導入する。",status:Le.NOT_STARTED,nextTaskIds:["dmaic_5"]},{id:"dmaic_5",title:"フェーズ5: 管理 (Control)",description:"改善策を標準化し、効果をモニタリングする管理体制を構築する。成果を文書化し水平展開を検討。",status:Le.NOT_STARTED,nextTaskIds:[]}].map(e=>({...e,extendedDetails:{...hi,...e.extendedDetails||{}}})),c5=()=>[{id:"mod_1",title:"1. 改造計画の立案と承認",description:"改造の目的（生産性、安全性、品質向上など）、目標仕様、スコープを定義し、関連部署からの承認を得る。",status:Le.NOT_STARTED,nextTaskIds:["mod_2"]},{id:"mod_2",title:"2. 改造設計と部品手配",description:"具体的な改造内容（機械、電気、ソフトウェア）を設計し、図面を作成する。必要な部品や材料を発注・手配する。",status:Le.NOT_STARTED,nextTaskIds:["mod_3"]},{id:"mod_3",title:"3. 設備改造の実施と初期トライアル",description:"安全手順に従い、設備の改造作業を実施する。改造後、初期の動作確認とトライアル運転を行う。",status:Le.NOT_STARTED,nextTaskIds:["mod_4"]},{id:"mod_4",title:"4. パフォーマンス評価と安全性検証",description:"一定期間の連続運転を行い、生産性、品質、サイクルタイムなどのパフォーマンスを評価し、安全性を検証する。",status:Le.NOT_STARTED,nextTaskIds:["mod_5"]},{id:"mod_5",title:"5. 標準化とプロジェクト完了",description:"設備関連の図面、作業標準書、保全計画を更新する。関係者へのトレーニングを実施し、プロジェクトを完了させる。",status:Le.NOT_STARTED,nextTaskIds:[]}].map(e=>({...e,extendedDetails:{...hi,...e.extendedDetails||{}}})),d5=()=>{const[t,e]=G.useState(null),[n,s]=G.useState(null),[r,l]=G.useState(""),[f,h]=G.useState(""),[g,m]=G.useState([]),[x,_]=G.useState(null),[b,C]=G.useState(null),[E,N]=G.useState(null),[D,B]=G.useState(!1),[z,U]=G.useState(null),[F,V]=G.useState(Wt.INPUT_FORM),[W,se]=G.useState(!1),[ye,ne]=G.useState(!1),[oe,re]=G.useState(!1),[Q,Se]=G.useState([]),[Fe,Ce]=G.useState([]),[q,$]=G.useState(null);G.useEffect(()=>{const{data:{subscription:ee}}=ut.auth.onAuthStateChange((ue,ve)=>{e((ve==null?void 0:ve.user)??null),ve!=null&&ve.user||(N(null),m([]),l(""),h(""),C(null),V(Wt.INPUT_FORM))});return ut.auth.getSession().then(({data:{session:ue}})=>{e((ue==null?void 0:ue.user)??null)}),()=>ee.unsubscribe()},[]),G.useEffect(()=>{const ee=sessionStorage.getItem("gemini-api-key");ee&&de(ee)},[]);const R=ee=>{Se(ue=>[...ue.slice(-10),ee]),Ce([])},Y=G.useCallback((ee="id")=>`${ee}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,[]),S=(ee,ue)=>{const ve=JSON.stringify(ee,null,2),Te=new Blob([ve],{type:"application/json"}),mt=URL.createObjectURL(Te),at=document.createElement("a");at.href=mt,at.download=ue,document.body.appendChild(at),at.click(),document.body.removeChild(at),URL.revokeObjectURL(mt)},M=ee=>new Promise((ue,ve)=>{const Te=new FileReader;Te.onload=mt=>{var at;try{typeof((at=mt.target)==null?void 0:at.result)=="string"?ue(JSON.parse(mt.target.result)):ve(new Error("Failed to read file."))}catch(yt){ve(new Error(`Invalid JSON: ${yt.message}`))}},Te.onerror=()=>ve(new Error("File read error.")),Te.readAsText(ee)}),H=G.useCallback(ee=>{if(ee.length===0)return ee;const ue=new Map(ee.map(Be=>[Be.id,Be])),ve=new Map(ee.map(Be=>[Be.id,0])),Te=new Map;ee.forEach(Be=>{Te.set(Be.id,[]),(Be.nextTaskIds||[]).forEach(zt=>{var nn;ue.has(zt)&&(ve.set(zt,(ve.get(zt)||0)+1),(nn=Te.get(Be.id))==null||nn.push(zt))})});const mt=ee.filter(Be=>(ve.get(Be.id)||0)===0).map(Be=>Be.id),at=[];let yt=0;const fn=new Set;for(;mt.length>0;){const Be=mt.length;at[yt]=[];for(let zt=0;zt<Be;zt++){const nn=mt.shift();fn.add(nn),at[yt].push(nn),(Te.get(nn)||[]).forEach(Mn=>{ve.set(Mn,(ve.get(Mn)||0)-1),(ve.get(Mn)||0)===0&&mt.push(Mn)})}yt++}const Nn=ee.filter(Be=>!fn.has(Be.id));Nn.length>0&&at.push(Nn.map(Be=>Be.id));const jn=380,Dt=60,xi=50,tn=280,_i=new Map;return at.forEach((Be,zt)=>{const nn=Be.length*tn+(Be.length-1)*xi,Mn=Math.max(20,(500-nn)/2);Be.forEach((os,rs)=>{_i.set(os,{x:zt*(jn+Dt)+20,y:Mn+rs*(tn+xi)})})}),ee.map((Be,zt)=>({...Be,position:_i.get(Be.id)||Be.position||{x:20,y:20+zt*100}}))},[]),K=ee=>{R(g),m(ee)},le=()=>{if(Q.length>0){const ee=Q[Q.length-1];Se(ue=>ue.slice(0,-1)),Ce(ue=>[g,...ue]),m(ee)}},ae=()=>{if(Fe.length>0){const ee=Fe[0];Ce(ue=>ue.slice(1)),Se(ue=>[...ue,g]),m(ee)}},de=ee=>{ee.trim()&&(Q0(ee),sessionStorage.setItem("gemini-api-key",ee),s(ee),U(null))},_e=()=>{sessionStorage.removeItem("gemini-api-key"),s(null),Q0("")},Me=async()=>{await ut.auth.signOut()},rt=async()=>{if(!(!t||!E))try{await Ns.updateProject(E,{tasks:g,ganttData:b})}catch(ee){console.error("プロジェクトの自動保存に失敗しました:",ee)}};G.useEffect(()=>{if(E&&g.length>0){const ee=setTimeout(rt,2e3);return()=>clearTimeout(ee)}},[g,b,E]);const Je=()=>{l(""),h(""),m([]),C(null),$(null),N(null),V(Wt.INPUT_FORM),U(null),Se([]),Ce([])},Ht=()=>{S({projectGoal:r,targetDate:f,tasks:g,ganttData:b},"project-plan.json")},Cn=async ee=>{try{const ue=await M(ee);if(ue.projectGoal&&ue.targetDate&&Array.isArray(ue.tasks))l(ue.projectGoal),h(ue.targetDate),m(ue.tasks.map(ve=>({...ve,extendedDetails:{...hi,...ve.extendedDetails||{}}}))),C(ue.ganttData||null),$(null),N(null),V(Wt.PROJECT_FLOW),Se([]),Ce([]);else throw new Error("Invalid project file format.")}catch(ue){const ve=ue.message;U(ve),ve.toLowerCase().includes("api key")&&_e()}},En=ee=>{l(ee.goal),h(ee.targetDate),m(ee.tasks.map(ue=>({...ue,extendedDetails:{...hi,...ue.extendedDetails||{}}}))),C(ee.ganttData||null),N(ee.id),$(null),V(Wt.PROJECT_FLOW),Se([]),Ce([]),re(!1)},$t=()=>{re(!1),Je()},Os=({title:ee,description:ue})=>{const ve={id:Y("task"),title:ee,description:ue,extendedDetails:hi,status:Le.NOT_STARTED,position:{x:20,y:20}};K(Te=>H([...Te,ve])),se(!1)},er=ee=>{K(ue=>ue.filter(ve=>ve.id!==ee).map(ve=>({...ve,nextTaskIds:(ve.nextTaskIds||[]).filter(Te=>Te!==ee)})))},kt=(ee,ue)=>{K(ve=>ve.map(Te=>Te.id===ee?{...Te,status:ue}:Te))},ts=(ee,ue)=>{K(ve=>ve.map(Te=>Te.id===ee?{...Te,nextTaskIds:ue}:Te))},Kn=(ee,ue)=>{m(ve=>ve.map(Te=>Te.id===ee?{...Te,position:ue}:Te))},ns=(ee,ue)=>{K(ve=>ve.map(Te=>Te.id===ee?{...Te,...ue}:Te))},An=(ee,ue)=>{K(ve=>ve.map(Te=>Te.id===ee?{...Te,extendedDetails:ue}:Te))},tr=(ee,ue,ve)=>{let Te=[];switch(ee){case"process-design":Te=r5();break;case"process-change":Te=a5();break;case"new-product-eval":Te=l5();break;case"improvement-project":Te=u5();break;case"equipment-modification":Te=c5();break}l(ue),h(ve),m(H(Te)),C(null),$(null),N(null),V(Wt.PROJECT_FLOW),Se([]),Ce([]),U(null)},is=async(ee,ue)=>{B(!0),U(null);try{l(ee),h(ue);const ve=await cM(ee,ue),Te=H(ve.map(mt=>({...mt,extendedDetails:hi,status:Le.NOT_STARTED})));if(m(Te),C(null),$(null),N(null),V(Wt.PROJECT_FLOW),Se([]),Ce([]),t)try{const mt=await Ns.createProject(`AI生成プロジェクト - ${new Date().toLocaleDateString("ja-JP")}`,ee,ue,Te);N(mt.id)}catch(mt){console.error("プロジェクトの自動保存に失敗しました:",mt)}}catch(ve){const Te=ve.message;Te.toLowerCase().includes("api key")&&_e(),U(Te)}finally{B(!1)}},nr=ee=>{_(ee),V(Wt.TASK_DETAIL)},ss=()=>{_(null),V(Wt.PROJECT_FLOW)},On=ee=>{$(ee)},wt=()=>{if(!t)return y.jsx(s5,{isOpen:!0,onClose:()=>{},onSuccess:()=>ne(!1)});if(!n)return y.jsx(i5,{onSetApiKey:de,error:z});if(z)return y.jsxs("div",{className:"p-4",children:[y.jsx(uu,{message:z}),y.jsx("button",{onClick:()=>{U(null),n?V(Wt.INPUT_FORM):_e()},className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded",children:"最初に戻る"})]});switch(F){case Wt.PROJECT_FLOW:return y.jsx(e5,{tasks:g,projectGoal:r,targetDate:f,onSelectTask:nr,onUpdateTaskExtendedDetails:()=>{},onUpdateTaskPosition:Kn,onStartNewProject:Je,onExportProject:Ht,onAddTask:()=>se(!0),onRemoveTask:er,onUpdateTaskStatus:kt,onImportSingleTask:()=>{},onAutoLayout:()=>K(ee=>H([...ee])),onUndo:le,canUndo:Q.length>0,onRedo:ae,canRedo:Fe.length>0,generateUniqueId:Y,onUpdateTaskConnections:ts,ganttData:b,setGanttData:C,onCustomReportGenerated:On,onClearApiKey:_e,onOpenProjectList:()=>re(!0),onLogout:Me,currentProjectId:E,onSaveProject:rt});case Wt.TASK_DETAIL:return x&&y.jsx(t5,{task:x,onClose:ss,onUpdateTaskCoreInfo:ns,onUpdateExtendedDetails:An,generateUniqueId:Y,projectGoal:r,targetDate:f});case Wt.INPUT_FORM:default:return y.jsx(Fk,{onSubmit:is,isLoading:D,onImportProject:Cn,onLoadTemplate:tr,initialGoal:r,initialDate:f,onOpenProjectList:()=>re(!0),onLogout:Me,user:t})}};return y.jsxs("div",{className:"h-full w-full",children:[wt(),W&&y.jsx(n5,{onClose:()=>se(!1),onSubmit:Os}),oe&&y.jsx(o5,{isOpen:oe,onClose:()=>re(!1),onSelectProject:En,onCreateNew:$t}),q&&y.jsx(Fv,{tasks:g,initialDeck:q,onSave:ee=>$(ee),onClose:()=>$(null),projectGoal:r,targetDate:f,reportScope:"project",generateUniqueId:Y})]})},tx=document.getElementById("root");if(!tx)throw new Error("Could not find root element to mount to");const f5=xT.createRoot(tx);f5.render(y.jsx(qo.StrictMode,{children:y.jsx(d5,{})}));
